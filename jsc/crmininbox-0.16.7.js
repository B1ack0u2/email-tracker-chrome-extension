(function(){var g,aa=aa||{},p=this;function t(a){return void 0!==a}function ba(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&t(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}function ca(a){a=a.split(".");for(var b=p,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function da(){}function ea(a){a.t=function(){return a.xh?a.xh:a.xh=new a}}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"array"==fa(a)}function ga(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function ha(a){return"boolean"==typeof a}function w(a){return"number"==typeof a}function ja(a){return"function"==fa(a)}function x(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ka(a){return a[la]||(a[la]=++ma)}
var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function z(a,b,c){z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return z.apply(null,arguments)}function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var qa=Date.now||function(){return+new Date};
function B(a,b){function c(){}c.prototype=b.prototype;a.f=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.uk=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}B(ra,Error);ra.prototype.name="CustomError";var sa;function ta(a,b){return 0==a.lastIndexOf(b,0)}function ua(a){var b=a.length-8;return 0<=b&&a.indexOf("#archive",b)==b}function va(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function wa(a){return/^[\s\xa0]*$/.test(a)}function xa(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
var ya=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function za(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}
function Aa(a){if(!Ba.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ca,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Da,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ea,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Fa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ga,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Ha,"&#0;"));return a}var Ca=/&/g,Da=/</g,Ea=/>/g,Fa=/"/g,Ga=/'/g,Ha=/\x00/g,Ba=/[\x00&<>"']/;
function Ia(a,b){var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d;d=b?b.createElement("div"):p.document.createElement("div");return a.replace(Ja,function(a,b){var h=c[a];if(h)return h;if("#"==b.charAt(0)){var k=Number("0"+b.substr(1));isNaN(k)||(h=String.fromCharCode(k))}h||(d.innerHTML=a+" ",h=d.firstChild.nodeValue.slice(0,-1));return c[a]=h})}var Ja=/&([^;\s<&]+);?/g;function Ka(a){return za(a.replace(/  /g," &#160;"),void 0)}
function La(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ma={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Na={"'":"\\'"};
function Oa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,h;if(!(h=Ma[d])){if(!(31<e&&127>e))if(d in Na)d=Na[d];else if(d in Ma)d=Na[d]=Ma[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Na[d]=e}h=d}b[f]=h}b.push('"');return b.join("")}function Pa(a,b){return-1!=a.indexOf(b)}
function Qa(a,b){for(var c=0,d=ya(String(a)).split("."),e=ya(String(b)).split("."),f=Math.max(d.length,e.length),h=0;0==c&&h<f;h++){var k=d[h]||"",l=e[h]||"",m=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=m.exec(k)||["","",""],r=n.exec(l)||["","",""];if(0==q[0].length&&0==r[0].length)break;c=Ra(0==q[1].length?0:parseInt(q[1],10),0==r[1].length?0:parseInt(r[1],10))||Ra(0==q[2].length,0==r[2].length)||Ra(q[2],r[2])}while(0==c)}return c}function Ra(a,b){return a<b?-1:a>b?1:0}
function Sa(a){var b=Number(a);return 0==b&&wa(a)?NaN:b}function Ta(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Ua(a){var b=v(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function Va(a,b){b.unshift(a);ra.call(this,va.apply(null,b));b.shift()}B(Va,ra);Va.prototype.name="AssertionError";function Wa(a,b){throw new Va("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Xa=Array.prototype,Ya=Xa.indexOf?function(a,b,c){return Xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(v(a))return v(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Za=Xa.lastIndexOf?function(a,b,c){return Xa.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(v(a))return v(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},C=Xa.forEach?function(a,b,c){Xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},$a=Xa.filter?function(a,b,c){return Xa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=v(a)?a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},ab=Xa.map?function(a,b,c){return Xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=v(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=
b.call(c,f[h],h,a));return e},bb=Xa.some?function(a,b,c){return Xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},cb=Xa.every?function(a,b,c){return Xa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function eb(a,b){var c=0;C(a,function(a,e,f){b.call(void 0,a,e,f)&&++c},void 0);return c}
function fb(a,b){var c=gb(a,b,void 0);return 0>c?null:v(a)?a.charAt(c):a[c]}function gb(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function hb(a,b){return 0<=Ya(a,b)}function ib(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function jb(a,b){var c=Ya(a,b),d;(d=0<=c)&&Xa.splice.call(a,c,1);return d}function kb(a){return Xa.concat.apply(Xa,arguments)}
function lb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function mb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(u(d)||(e=ga(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,h=d.length,k=0;k<h;k++)a[f+k]=d[k];else a.push(d)}}function nb(a,b,c,d){Xa.splice.apply(a,ob(arguments,1))}function ob(a,b,c){return 2>=arguments.length?Xa.slice.call(a,b):Xa.slice.call(a,b,c)}
function pb(a,b){a.sort(b||qb)}function rb(a,b){if(!ga(a)||!ga(b)||a.length!=b.length)return!1;for(var c=a.length,d=sb,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function qb(a,b){return a>b?1:a<b?-1:0}function sb(a,b){return a===b}function tb(a,b,c){var d={};C(a,function(e,f){d[b.call(c,e,f,a)]=e});return d};var ub;a:{var vb=p.navigator;if(vb){var wb=vb.userAgent;if(wb){ub=wb;break a}}ub=""};function xb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function yb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function zb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ab(a,b){for(var c=ga(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function Bb(){var a=Cb,b;for(b in a)return!1;return!0}function Db(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function Eb(a,b){return b in a?a[b]:void 0}
function Fb(a){var b={},c;for(c in a)b[c]=a[c];return b}var Gb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Gb.length;f++)c=Gb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function Ib(a){var b=arguments.length;if(1==b&&u(arguments[0]))return Ib.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c}function Jb(a){var b=arguments.length;if(1==b&&u(arguments[0]))return Jb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var Kb,Lb;function Mb(){return p.navigator||null}var Nb=Pa(ub,"Opera")||Pa(ub,"OPR"),D=Pa(ub,"Trident")||Pa(ub,"MSIE"),Ob=Pa(ub,"Gecko")&&!Pa(ub.toLowerCase(),"webkit")&&!(Pa(ub,"Trident")||Pa(ub,"MSIE")),Pb=Pa(ub.toLowerCase(),"webkit");Pb&&Pa(ub,"Mobile");var Qb,Rb=Mb();Qb=Rb&&Rb.platform||"";Kb=Pa(Qb,"Mac");Pa(Qb,"Win");Pa(Qb,"Linux");Lb=!!Mb()&&Pa(Mb().appVersion||"","X11");var Sb=ub;Sb&&Pa(Sb,"Android");Sb&&Pa(Sb,"iPhone");Sb&&Pa(Sb,"iPad");
function Tb(){var a=p.document;return a?a.documentMode:void 0}var Ub=function(){var a="",b;if(Nb&&p.opera)return a=p.opera.version,ja(a)?a():a;Ob?b=/rv\:([^\);]+)(\)|;)/:D?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Pb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(ub))?a[1]:"");return D&&(b=Tb(),b>parseFloat(a))?String(b):a}(),Vb={};function Wb(a){return Vb[a]||(Vb[a]=0<=Qa(Ub,a))}var Xb=p.document,Yb=Xb&&D?Tb()||("CSS1Compat"==Xb.compatMode?parseInt(Ub,10):5):void 0;var Zb=!D||D&&9<=Yb,$b=!Ob&&!D||D&&D&&9<=Yb||Ob&&Wb("1.9.1"),ac=D&&!Wb("9");function bc(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}g=bc.prototype;g.clone=function(){return new bc(this.x,this.y)};g.toString=function(){return"("+this.x+", "+this.y+")"};function cc(a,b){return new bc(a.x-b.x,a.y-b.y)}g.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};g.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};g.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function dc(a,b){this.width=a;this.height=b}g=dc.prototype;g.clone=function(){return new dc(this.width,this.height)};g.toString=function(){return"("+this.width+" x "+this.height+")"};g.Ga=function(){return!(this.width*this.height)};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function ec(a){return a?new fc(gc(a)):sa||(sa=new fc)}function hc(a,b){var c=b||document,d=null;c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):d=ic(document,"*",a,b)[0];return d||null}
function ic(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,h;h=a[f];f++)b==h.nodeName&&(d[e++]=h);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;h=a[f];f++)b=h.className,"function"==typeof b.split&&hb(b.split(/\s+/),c)&&(d[e++]=h);d.length=e;return d}return a}
function jc(a,b){xb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in kc?a.setAttribute(kc[d],b):ta(d,"aria-")||ta(d,"data-")?a.setAttribute(d,b):a[d]=b})}var kc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function lc(a){a=(a||window).document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new dc(a.clientWidth,a.clientHeight)}function mc(a){return Pb||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function nc(a){return a?oc(a):window}function oc(a){return a.parentWindow||a.defaultView}function pc(a,b,c){return qc(document,arguments)}
function qc(a,b){var c=b[0],d=b[1];if(!Zb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Aa(d.name),'"');if(d.type){c.push(' type="',Aa(d.type),'"');var e={};Hb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(v(d)?c.className=d:u(d)?c.className=d.join(" "):jc(c,d));2<b.length&&rc(a,c,b,2);return c}function rc(a,b,c,d){function e(c){c&&b.appendChild(v(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!ga(f)||x(f)&&0<f.nodeType?e(f):C(sc(f)?lb(f):f,e)}}
function tc(){return document.createElement("div")}function uc(a,b){rc(gc(a),a,arguments,1)}function vc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function wc(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function xc(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function yc(a){return x(a)&&1==a.nodeType}
function zc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function gc(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Ac(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else vc(a),a.appendChild(gc(a).createTextNode(String(b)))}var Bc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Cc={IMG:" ",BR:"\n"};function Dc(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function Ec(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function Fc(a){a=a.tabIndex;return w(a)&&0<=a&&32768>a}function Gc(a){if(ac&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Hc(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");ac||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Ic(a){var b=[];Hc(a,b,!1);return b.join("")}
function Hc(a,b,c){if(!(a.nodeName in Bc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Cc)b.push(Cc[a.nodeName]);else for(a=a.firstChild;a;)Hc(a,b,c),a=a.nextSibling}function sc(a){if(a&&"number"==typeof a.length){if(x(a))return"function"==typeof a.item||"string"==typeof a.item;if(ja(a))return"function"==typeof a.item}return!1}
function Jc(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return Kc(a,function(a){return(!d||a.nodeName==d)&&(!c||v(a.className)&&hb(a.className.split(/\s+/),c))})}function Kc(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Lc(a){try{return a&&a.activeElement}catch(b){}return null}function fc(a){this.a=a||p.document||document}g=fc.prototype;g.e=function(a){return v(a)?this.a.getElementById(a):a};g.setProperties=jc;g.j=function(a,b,c){return qc(this.a,arguments)};
g.createElement=function(a){return this.a.createElement(a)};function Mc(a,b){return a.a.createTextNode(String(b))}function Nc(a){return"CSS1Compat"==a.a.compatMode}function Oc(a){var b=a.a;a=mc(b);b=oc(b);return D&&Wb("10")&&b.pageYOffset!=a.scrollTop?new bc(a.scrollLeft,a.scrollTop):new bc(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}g.appendChild=function(a,b){a.appendChild(b)};g.tg=vc;g.wh=wc;g.mh=xc;
g.getChildren=function(a){return $b&&void 0!=a.children?a.children:$a(a.childNodes,function(a){return 1==a.nodeType})};g.Aj=yc;g.contains=zc;function Pc(){return Pb?"Webkit":Ob?"Moz":D?"ms":Nb?"O":null};function Qc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}g=Qc.prototype;g.getHeight=function(){return this.bottom-this.top};g.clone=function(){return new Qc(this.top,this.right,this.bottom,this.left)};g.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};
g.contains=function(a){return this&&a?a instanceof Qc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};g.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};
g.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};g.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function Rc(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}g=Rc.prototype;g.clone=function(){return new Rc(this.left,this.top,this.width,this.height)};g.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};g.contains=function(a){return a instanceof Rc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
g.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};g.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Sc(a,b,c){if(v(b))(b=Tc(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=Tc(c,d);f&&(c.style[f]=e)}}function Tc(a,b){var c=Ta(b);if(void 0===a.style[c]){var d=Pc()+Ua(c);if(void 0!==a.style[d])return d}return c}function Uc(a,b){var c=gc(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Vc(a,b){return Uc(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function Wc(a){return Vc(a,"position")}function Xc(a,b,c){var d,e=Ob&&(Kb||Lb)&&Wb("1.9");b instanceof bc?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Yc(d,e);a.style.top=Yc(b,e)}function Zc(a){return new bc(a.offsetLeft,a.offsetTop)}function ad(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}D&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function bd(a){if(D&&!(D&&8<=Yb))return a.offsetParent;var b=gc(a),c=Vc(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Vc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function cd(a){for(var b=new Qc(0,Infinity,Infinity,0),c=ec(a),d=c.a.body,e=c.a.documentElement,f=mc(c.a);a=bd(a);)if(!(D&&0==a.clientWidth||Pb&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=Vc(a,"overflow")){var h=dd(a),k;k=a;if(Ob&&!Wb("1.9")){var l=parseFloat(Uc(k,"borderLeftWidth"));if(ed(k))var m=k.offsetWidth-k.clientWidth-l-parseFloat(Uc(k,"borderRightWidth")),l=l+m;k=new bc(l,parseFloat(Uc(k,"borderTopWidth")))}else k=new bc(k.clientLeft,k.clientTop);h.x+=k.x;h.y+=k.y;b.top=Math.max(b.top,
h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=lc(oc(c.a));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function dd(a){var b,c=gc(a),d=Vc(a,"position"),e=Ob&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new bc(0,0),h;b=c?gc(c):document;h=!D||D&&9<=Yb||Nc(ec(b))?b.documentElement:b.body;if(a==h)return f;if(a.getBoundingClientRect)b=ad(a),a=Oc(ec(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=
b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(Pb&&"fixed"==Wc(b)){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Nb||Pb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=bd(b))&&b!=c.body&&b!=h;)f.x-=b.scrollLeft,Nb&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function fd(a,b,c){if(b instanceof dc)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=Yc(b,!0);gd(a,c)}
function Yc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function gd(a,b){a.style.height=Yc(b,!0)}function hd(a){return id(a)}function id(a){var b=jd;if("none"!=Vc(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}
function jd(a){var b=a.offsetWidth,c=a.offsetHeight,d=Pb&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new dc(b,c):(a=ad(a),new dc(a.right-a.left,a.bottom-a.top))}function kd(a){var b=dd(a);a=id(a);return new Rc(b.x,b.y,a.width,a.height)}function ld(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function E(a,b){a.style.display=b?"":"none"}function ed(a){return"rtl"==Vc(a,"direction")}
var md=Ob?"MozUserSelect":Pb?"WebkitUserSelect":null;function nd(a,b,c){c=c?null:a.getElementsByTagName("*");if(md){if(b=b?"none":"",a.style[md]=b,c){a=0;for(var d;d=c[a];a++)d.style[md]=b}}else if(D||Nb)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function od(a){return new dc(a.offsetWidth,a.offsetHeight)}
function pd(a){var b=gc(a),c=D&&a.currentStyle;if(c&&Nc(ec(b))&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=qd(a,c.width,"width","pixelWidth"),a=qd(a,c.height,"height","pixelHeight"),new dc(b,a);c=od(a);b=rd(a,"padding");a=sd(a);return new dc(c.width-a.left-b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)}
function qd(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return b}function td(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?qd(a,c,"left","pixelLeft"):0}
function rd(a,b){if(D){var c=td(a,b+"Left"),d=td(a,b+"Right"),e=td(a,b+"Top"),f=td(a,b+"Bottom");return new Qc(e,d,f,c)}c=Uc(a,b+"Left");d=Uc(a,b+"Right");e=Uc(a,b+"Top");f=Uc(a,b+"Bottom");return new Qc(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(c))}var ud={thin:2,medium:4,thick:6};function vd(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in ud?ud[c]:qd(a,c,"left","pixelLeft")}
function sd(a){if(D&&!(D&&9<=Yb)){var b=vd(a,"borderLeft"),c=vd(a,"borderRight"),d=vd(a,"borderTop");a=vd(a,"borderBottom");return new Qc(d,c,a,b)}b=Uc(a,"borderLeftWidth");c=Uc(a,"borderRightWidth");d=Uc(a,"borderTopWidth");a=Uc(a,"borderBottomWidth");return new Qc(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var wd=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;D&&Wb(8);Jb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function xd(){this.a="";this.c=yd;this.b=null}xd.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function zd(a){if(a instanceof xd&&a.constructor===xd&&a.c===yd)return a.a;Wa("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}Jb("action","cite","data","formaction","href","manifest","poster","src");Jb("link","script","style");var yd={};function Ad(a,b){var c=new xd;c.a=a;c.b=b;return c}var Bd=Ad("",0);var Cd={yk:!0},Dd={zk:!0};function Ed(){throw Error("Do not instantiate directly");}Ed.prototype.vf=null;Ed.prototype.N=function(){return this.content};Ed.prototype.toString=function(){return this.content};function Fd(a){if(!x(a))return String(a);if(a instanceof Ed){if(a.Vd===Cd)return a.N();if(a.Vd===Dd)return Aa(a.N())}Wa("Soy template output is unsafe for use as HTML: "+a);return"zSoyz"};function Gd(a){if(null!=a)switch(a.vf){case 1:return 1;case -1:return-1;case 0:return 0}return null}function Id(){Ed.call(this)}B(Id,Ed);Id.prototype.Vd=Cd;function Jd(a){return null!=a&&a.Vd===Cd?a:a instanceof xd?Kd(zd(a),a.b):Kd(Aa(String(String(a))),Gd(a))}var Kd=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){var e=new b(String(a));void 0!==d&&(e.vf=d);return e}}(Id);
(function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){var e=String(a);if(!e)return"";e=new b(e);void 0!==d&&(e.vf=d);return e}})(Id);function Ld(a){null!=a&&a.Vd===Cd?(a=a.N(),a=String(a).replace(Md,"").replace(Nd,"&lt;"),a=String(a).replace(Od,Pd)):a=Aa(String(a));return a}
var Qd={"\x00":"&#0;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Pd(a){return Qd[a]}var Od=/[\x00\x22\x27\x3c\x3e]/g,Md=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Nd=/</g;function Rd(){return Kd('<div class="setting-dialog"><form class="basic-setting"><div><input type="checkbox" name="log-on-console"/> Log on console<br /></div><div class="group-panel" style="display: none"><div>Gmail context panel location</div>\x3c!-- see this value in ydn.crm.ui.ContextPanelPosition --\x3e<input type="radio" name="context-panel-position" value="in"/> Inline<br /><input type="radio" name="context-panel-position" value="st"/> Stick on right side<br /><input type="radio" name="context-panel-position" value="wg"/> Inside widget panel<br /></div></form></div>')}
Rd.a="templ.ydn.crm.inj.setting";function Sd(a){return Kd("<div>Current you are login as "+Jd(a.ok)+" to Yathit server.</div>")}Sd.a="templ.ydn.crm.inj.wrongLogin";function Td(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function Ud(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function Vd(a){p.setTimeout(function(){throw a;},0)}var Wd;
function Xd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=z(function(a){if(a.origin==d||a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!Pa(ub,"Trident")&&!Pa(ub,"MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){c=c.next;var a=c.Vg;c.Vg=null;a()};return function(a){d.next={Vg:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Yd(a,b){Zd||$d();ae||(Zd(),ae=!0);be.push(new ce(a,b))}var Zd;function $d(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve();Zd=function(){a.then(de)}}else Zd=function(){var a=de;!ja(p.setImmediate)||p.yi&&p.yi.prototype.setImmediate==p.setImmediate?(Wd||(Wd=Xd()),Wd(a)):p.setImmediate(a)}}var ae=!1,be=[];[].push(function(){ae=!1;be=[]});function de(){for(;be.length;){var a=be;be=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.ee.call(c.a)}catch(d){Vd(d)}}}ae=!1}
function ce(a,b){this.ee=a;this.a=b};function ee(a,b){this.b=fe;this.i=void 0;this.a=this.c=null;this.d=this.g=!1;try{var c=this;a.call(b,function(a){ge(c,he,a)},function(a){if(!(a instanceof ie))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}ge(c,je,a)})}catch(d){ge(this,je,d)}}var fe=0,he=2,je=3;ee.prototype.then=function(a,b,c){return ke(this,ja(a)?a:null,ja(b)?b:null,c)};Td(ee);function le(a){a.b==fe&&Yd(function(){var a=new ie(void 0);me(this,a)},a)}
function me(a,b){if(a.b==fe)if(a.c){var c=a.c;if(c.a){for(var d=0,e=-1,f=0,h;h=c.a[f];f++)if(h=h.Td)if(d++,h==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.b==fe&&1==d?me(c,b):(d=c.a.splice(e,1)[0],ne(c,d,je,b)))}}else ge(a,je,b)}function oe(a,b){a.a&&a.a.length||a.b!=he&&a.b!=je||pe(a);a.a||(a.a=[]);a.a.push(b)}
function ke(a,b,c,d){var e={Td:null,Eh:null,Ih:null};e.Td=new ee(function(a,h){e.Eh=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){h(m)}}:a;e.Ih=c?function(b){try{var e=c.call(d,b);!t(e)&&b instanceof ie?h(b):a(e)}catch(m){h(m)}}:h});e.Td.c=a;oe(a,e);return e.Td}ee.prototype.h=function(a){this.b=fe;ge(this,he,a)};ee.prototype.o=function(a){this.b=fe;ge(this,je,a)};
function ge(a,b,c){if(a.b==fe){if(a==c)b=je,c=new TypeError("Promise cannot resolve to itself");else{if(Ud(c)){a.b=1;c.then(a.h,a.o,a);return}if(x(c))try{var d=c.then;if(ja(d)){qe(a,c,d);return}}catch(e){b=je,c=e}}a.i=c;a.b=b;pe(a);b!=je||c instanceof ie||re(a,c)}}function qe(a,b,c){function d(b){f||(f=!0,a.o(b))}function e(b){f||(f=!0,a.h(b))}a.b=1;var f=!1;try{c.call(b,e,d)}catch(h){d(h)}}function pe(a){a.g||(a.g=!0,Yd(a.k,a))}
ee.prototype.k=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;b++)ne(this,a[b],this.b,this.i)}this.g=!1};function ne(a,b,c,d){if(c==he)b.Eh(d);else{for(;a&&a.d;a=a.c)a.d=!1;b.Ih(d)}}function re(a,b){a.d=!0;Yd(function(){a.d&&se.call(null,b)})}var se=Vd;function ie(a){ra.call(this,a)}B(ie,ra);ie.prototype.name="cancel";/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function te(a,b){this.o=[];this.S=a;this.F=b||null;this.g=this.b=!1;this.d=void 0;this.pa=this.K=this.k=!1;this.i=0;this.c=null;this.v=0}function ue(a,b){if(a.b)a.d instanceof te&&ue(a.d);else{if(a.c){var c=a.c;delete a.c;b?ue(c,b):(c.v--,0>=c.v&&ue(c))}a.S?a.S.call(a.F,a):a.pa=!0;a.b||a.H(new ve)}}te.prototype.w=function(a,b){this.k=!1;we(this,a,b)};function we(a,b,c){a.b=!0;a.d=c;a.g=!b;a.Df()}function xe(a){if(a.b){if(!a.pa)throw new ze;a.pa=!1}}
te.prototype.callback=function(a){xe(this);we(this,!0,a)};te.prototype.H=function(a){xe(this);we(this,!1,a)};function F(a,b,c){return G(a,b,null,c)}function Ae(a,b){return G(a,null,b,void 0)}function Be(a,b,c){return G(a,b,b,c)}function G(a,b,c,d){a.o.push([b,c,d]);a.b&&a.Df();return a}te.prototype.then=function(a,b,c){var d,e,f=new ee(function(a,b){d=a;e=b});G(this,d,function(a){a instanceof ve?le(f):e(a)});return f.then(a,b,c)};Td(te);function Ce(a){return bb(a.o,function(a){return ja(a[1])})}
te.prototype.Df=function(){this.i&&this.b&&Ce(this)&&(De(this.i),this.i=0);this.c&&(this.c.v--,delete this.c);for(var a=this.d,b=!1,c=!1;this.o.length&&!this.k;){var d=this.o.shift(),e=d[0],f=d[1],d=d[2];if(e=this.g?f:e)try{var h=e.call(d||this.F,a);t(h)&&(this.g=this.g&&(h==a||h instanceof Error),this.d=a=h);Ud(a)&&(this.k=c=!0)}catch(k){a=k,this.g=!0,Ce(this)||(b=!0)}}this.d=a;c&&(c=z(this.w,this,!0),h=z(this.w,this,!1),a instanceof te?(G(a,c,h),a.K=!0):a.then(c,h));b&&(a=new Ee(a),Fe[a.me]=a,this.i=
a.me)};function Ge(a){var b=new te;b.callback(a);return b}function He(a){var b=new te;b.H(a);return b}function ze(){ra.call(this)}B(ze,ra);ze.prototype.message="Deferred has already fired";ze.prototype.name="AlreadyCalledError";function ve(){ra.call(this)}B(ve,ra);ve.prototype.message="Deferred was canceled";ve.prototype.name="CanceledError";function Ee(a){this.me=p.setTimeout(z(this.b,this),0);this.a=a}Ee.prototype.b=function(){delete Fe[this.me];throw this.a;};var Fe={};
function De(a){var b=Fe[a];b&&(p.clearTimeout(b.me),delete Fe[a])};function Ie(){0!=Je&&(Ke[ka(this)]=this);this.P=this.P;this.pa=this.pa}var Je=0,Ke={};Ie.prototype.P=!1;Ie.prototype.u=function(){if(!this.P&&(this.P=!0,this.l(),0!=Je)){var a=ka(this);delete Ke[a]}};Ie.prototype.l=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};function Le(a){a&&"function"==typeof a.u&&a.u()};var Me=!D||D&&9<=Yb,Ne=!D||D&&9<=Yb,Oe=D&&!Wb("9");!Pb||Wb("528");Ob&&Wb("1.9b")||D&&Wb("8")||Nb&&Wb("9.5")||Pb&&Wb("528");Ob&&!Wb("8")||D&&Wb("9");function H(a,b){this.type=a;this.b=this.target=b;this.d=this.g=!1;this.Nh=!0}H.prototype.u=function(){};H.prototype.stopPropagation=function(){this.g=!0};H.prototype.preventDefault=function(){this.d=!0;this.Nh=!1};function Pe(a){Pe[" "](a);return a}Pe[" "]=da;function Qe(a,b){H.call(this,a?a.type:"");this.i=this.b=this.target=null;this.a=this.clientY=this.clientX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.h=!1;this.c=null;a&&this.init(a,b)}B(Qe,H);var Re=[1,4,2];
Qe.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.b=b;var d=a.relatedTarget;if(d){if(Ob){var e;a:{try{Pe(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.i=d;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.a=a.keyCode||0;this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.h=Kb?a.metaKey:
a.ctrlKey;this.state=a.state;this.c=a;a.defaultPrevented&&this.preventDefault()};function Se(a){return(Me?0==a.c.button:"click"==a.type?!0:!!(a.c.button&Re[0]))&&!(Pb&&Kb&&a.ctrlKey)}Qe.prototype.stopPropagation=function(){Qe.f.stopPropagation.call(this);this.c.stopPropagation?this.c.stopPropagation():this.c.cancelBubble=!0};
Qe.prototype.preventDefault=function(){Qe.f.preventDefault.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Oe)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Te="closure_listenable_"+(1E6*Math.random()|0);function Ue(a){return!(!a||!a[Te])}var Ve=0;function We(a,b,c,d,e){this.qc=a;this.proxy=null;this.src=b;this.type=c;this.Sd=!!d;this.L=e;this.key=++Ve;this.removed=this.Rd=!1}function Xe(a){a.removed=!0;a.qc=null;a.proxy=null;a.src=null;a.L=null};function Ye(a){this.src=a;this.a={};this.b=0}Ye.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var h=Ze(a,b,d,e);-1<h?(b=a[h],c||(b.Rd=!1)):(b=new We(b,this.src,f,!!d,e),b.Rd=c,a.push(b));return b};Ye.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.a))return!1;var e=this.a[a];b=Ze(e,b,c,d);return-1<b?(Xe(e[b]),Xa.splice.call(e,b,1),0==e.length&&(delete this.a[a],this.b--),!0):!1};
function $e(a,b){var c=b.type;if(!(c in a.a))return!1;var d=jb(a.a[c],b);d&&(Xe(b),0==a.a[c].length&&(delete a.a[c],a.b--));return d}Ye.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Xe(d[e]);delete this.a[c];this.b--}return b};function af(a,b,c,d,e){a=a.a[b.toString()];b=-1;a&&(b=Ze(a,c,d,e));return-1<b?a[b]:null}
function Ze(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.qc==b&&f.Sd==!!c&&f.L==d)return e}return-1};var bf="closure_lm_"+(1E6*Math.random()|0),cf={},df=0;function ef(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)ef(a,b[f],c,d,e);return null}c=ff(c);return Ue(a)?a.listen(b,c,d,e):gf(a,b,c,!1,d,e)}function gf(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=!!e,k=hf(a);k||(a[bf]=k=new Ye(a));c=k.add(b,c,d,e,f);if(c.proxy)return c;d=jf();c.proxy=d;d.src=a;d.qc=c;a.addEventListener?a.addEventListener(b.toString(),d,h):a.attachEvent(kf(b.toString()),d);df++;return c}
function jf(){var a=lf,b=Ne?function(c){return a.call(b.src,b.qc,c)}:function(c){c=a.call(b.src,b.qc,c);if(!c)return c};return b}function mf(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)mf(a,b[f],c,d,e);return null}c=ff(c);return Ue(a)?a.yb.add(String(b),c,!0,d,e):gf(a,b,c,!0,d,e)}function nf(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)nf(a,b[f],c,d,e);else c=ff(c),Ue(a)?a.O(b,c,d,e):a&&(a=hf(a))&&(b=af(a,b,c,!!d,e))&&of(b)}
function of(a){if(w(a)||!a||a.removed)return!1;var b=a.src;if(Ue(b))return $e(b.yb,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.Sd):b.detachEvent&&b.detachEvent(kf(c),d);df--;(c=hf(b))?($e(c,a),0==c.b&&(c.src=null,b[bf]=null)):Xe(a);return!0}function kf(a){return a in cf?cf[a]:cf[a]="on"+a}function pf(a,b,c,d){var e=1;if(a=hf(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.Sd==c&&!f.removed&&(e&=!1!==qf(f,d))}return Boolean(e)}
function qf(a,b){var c=a.qc,d=a.L||a.src;a.Rd&&of(a);return c.call(d,b)}
function lf(a,b){if(a.removed)return!0;if(!Ne){var c=b||ca("window.event"),d=new Qe(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(h){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.b;f;f=f.parentNode)c.push(f);for(var f=a.type,k=c.length-1;!d.g&&0<=k;k--)d.b=c[k],e&=pf(c[k],f,!0,d);for(k=0;!d.g&&k<c.length;k++)d.b=c[k],e&=pf(c[k],f,!1,d)}return e}return qf(a,new Qe(b,this))}
function hf(a){a=a[bf];return a instanceof Ye?a:null}var rf="__closure_events_fn_"+(1E9*Math.random()>>>0);function ff(a){if(ja(a))return a;a[rf]||(a[rf]=function(b){return a.handleEvent(b)});return a[rf]};function J(){Ie.call(this);this.yb=new Ye(this);this.ki=this;this.df=null}B(J,Ie);J.prototype[Te]=!0;g=J.prototype;g.Gc=function(){return this.df};g.Ne=function(a){this.df=a};g.addEventListener=function(a,b,c,d){ef(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){nf(this,a,b,c,d)};
function K(a,b){var c,d=a.Gc();if(d)for(c=[];d;d=d.Gc())c.push(d);var d=a.ki,e=b,f=e.type||e;if(v(e))e=new H(e,d);else if(e instanceof H)e.target=e.target||d;else{var h=e,e=new H(f,d);Hb(e,h)}var h=!0,k;if(c)for(var l=c.length-1;!e.g&&0<=l;l--)k=e.b=c[l],h=sf(k,f,!0,e)&&h;e.g||(k=e.b=d,h=sf(k,f,!0,e)&&h,e.g||(h=sf(k,f,!1,e)&&h));if(c)for(l=0;!e.g&&l<c.length;l++)k=e.b=c[l],h=sf(k,f,!1,e)&&h;return h}g.l=function(){J.f.l.call(this);this.yb&&this.yb.removeAll(void 0);this.df=null};
g.listen=function(a,b,c,d){return this.yb.add(String(a),b,!1,c,d)};g.O=function(a,b,c,d){return this.yb.remove(String(a),b,c,d)};function sf(a,b,c,d){b=a.yb.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.removed&&h.Sd==c){var k=h.qc,l=h.L||h.src;h.Rd&&$e(a.yb,h);e=!1!==k.call(l,d)&&e}}return e&&0!=d.Nh};function tf(a,b){J.call(this);this.b=a||1;this.a=b||p;this.c=z(this.Xj,this);this.d=qa()}B(tf,J);g=tf.prototype;g.jd=!1;g.Y=null;g.setInterval=function(a){this.b=a;this.Y&&this.jd?(this.stop(),uf(this)):this.Y&&this.stop()};g.Xj=function(){if(this.jd){var a=qa()-this.d;0<a&&a<.8*this.b?this.Y=this.a.setTimeout(this.c,this.b-a):(this.Y&&(this.a.clearTimeout(this.Y),this.Y=null),K(this,vf),this.jd&&(this.Y=this.a.setTimeout(this.c,this.b),this.d=qa()))}};
function uf(a){a.jd=!0;a.Y||(a.Y=a.a.setTimeout(a.c,a.b),a.d=qa())}g.stop=function(){this.jd=!1;this.Y&&(this.a.clearTimeout(this.Y),this.Y=null)};g.l=function(){tf.f.l.call(this);this.stop();delete this.a};var vf="tick";function wf(a,b,c){if(ja(a))c&&(a=z(a,c));else if(a&&"function"==typeof a.handleEvent)a=z(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:p.setTimeout(a,b||0)};function xf(a,b,c){Ie.call(this);this.b=a;this.d=b||0;this.a=c;this.c=z(this.lh,this)}B(xf,Ie);g=xf.prototype;g.Hc=0;g.l=function(){xf.f.l.call(this);this.stop();delete this.b;delete this.a};function yf(a){a.stop();a.Hc=wf(a.c,t(void 0)?void 0:a.d)}g.stop=function(){0!=this.Hc&&p.clearTimeout(this.Hc);this.Hc=0};g.Cf=function(){this.stop();this.lh()};g.lh=function(){this.Hc=0;this.b&&this.b.call(this.a)};function zf(a){Ie.call(this);this.a=a;this.b={}}B(zf,Ie);var Af=[];g=zf.prototype;g.listen=function(a,b,c,d){return Bf(this,a,b,c,d)};function Cf(a,b,c,d,e){return Bf(a,b,c,d,!1,e)}function Bf(a,b,c,d,e,f){u(c)||(c&&(Af[0]=c.toString()),c=Af);for(var h=0;h<c.length;h++){var k=ef(b,c[h],d||a.handleEvent,e||!1,f||a.a||a);if(!k)break;a.b[k.key]=k}return a}function Df(a,b,c,d){Ef(a,b,c,d,!1)}
function Ef(a,b,c,d,e,f){if(u(c))for(var h=0;h<c.length;h++)Ef(a,b,c[h],d,e,f);else(b=mf(b,c,d||a.handleEvent,e,f||a.a||a))&&(a.b[b.key]=b)}g.O=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.O(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.a||this,c=ff(c),d=!!d,b=Ue(a)?af(a.yb,String(b),c,d,e):a?(a=hf(a))?af(a,b,c,d,e):null:null,b&&(of(b),delete this.b[b.key]);return this};g.removeAll=function(){xb(this.b,of);this.b={}};g.l=function(){zf.f.l.call(this);this.removeAll()};
g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Ff(a){if("function"==typeof a.ua)return a.ua();if(v(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return yb(a)}
function Gf(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ga(a)||v(a))C(a,b,void 0);else{var c;if("function"==typeof a.ya)c=a.ya();else if("function"!=typeof a.ua)if(ga(a)||v(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=zb(a);else c=void 0;for(var d=Ff(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}};var Hf="StopIteration"in p?p.StopIteration:Error("StopIteration");function If(){}If.prototype.next=function(){throw Hf;};If.prototype.Cc=function(){return this};function Jf(a){if(a instanceof If)return a;if("function"==typeof a.Cc)return a.Cc(!1);if(ga(a)){var b=0,c=new If;c.next=function(){for(;;){if(b>=a.length)throw Hf;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Kf(a,b,c){if(ga(a))try{C(a,b,c)}catch(d){if(d!==Hf)throw d;}else{a=Jf(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(e){if(e!==Hf)throw e;}}}function Lf(a){try{return Jf(a).next()}catch(b){if(b!=Hf)throw b;return null}};function Mf(a,b){this.b={};this.a=[];this.d=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Mf?(c=a.ya(),d=a.ua()):(c=zb(a),d=yb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=Mf.prototype;g.ga=function(){return this.c};g.ua=function(){Nf(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};g.ya=function(){Nf(this);return this.a.concat()};
g.Ga=function(){return 0==this.c};g.clear=function(){this.b={};this.d=this.c=this.a.length=0};g.remove=function(a){return Of(this.b,a)?(delete this.b[a],this.c--,this.d++,this.a.length>2*this.c&&Nf(this),!0):!1};function Nf(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Of(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Of(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}g.get=function(a,b){return Of(this.b,a)?this.b[a]:b};
g.set=function(a,b){Of(this.b,a)||(this.c++,this.a.push(a),this.d++);this.b[a]=b};g.forEach=function(a,b){for(var c=this.ya(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new Mf(this)};g.Cc=function(a){Nf(this);var b=0,c=this.a,d=this.b,e=this.d,f=this,h=new If;h.next=function(){for(;;){if(e!=f.d)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Hf;var h=c[b++];return a?h:d[h]}};return h};
function Of(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Pf(a){this.a=new Mf;if(a){a=Ff(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function Qf(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}g=Pf.prototype;g.ga=function(){return this.a.ga()};g.add=function(a){this.a.set(Qf(a),a)};g.removeAll=function(a){a=Ff(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};g.remove=function(a){return this.a.remove(Qf(a))};g.clear=function(){this.a.clear()};g.Ga=function(){return this.a.Ga()};
g.contains=function(a){a=Qf(a);return Of(this.a.b,a)};g.ua=function(){return this.a.ua()};g.clone=function(){return new Pf(this)};g.Cc=function(){return this.a.Cc(!1)};function Rf(a){var b;b||(b=Sf(a||arguments.callee.caller,[]));return b}
function Sf(a,b){var c=[];if(hb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Tf(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Tf(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Sf(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Tf(a){if(Uf[a])return Uf[a];a=String(a);if(!Uf[a]){var b=/function ([^\(]+)/.exec(a);Uf[a]=b?b[1]:"[Anonymous]"}return Uf[a]}var Uf={};function Vf(a,b,c,d,e){this.i="number"==typeof e?e:Wf++;this.g=d||qa();this.d=a;this.h=b;this.b=c;delete this.c;delete this.a}Vf.prototype.i=0;Vf.prototype.c=null;Vf.prototype.a=null;var Wf=0;Vf.prototype.getMessage=function(){return this.h};function Xf(a){this.g=a;this.a=this.d=this.b=this.c=null}function Yf(a,b){this.name=a;this.value=b}Yf.prototype.toString=function(){return this.name};var Zf=new Yf("SHOUT",1200),$f=new Yf("SEVERE",1E3),ag=new Yf("WARNING",900),bg=new Yf("INFO",800),cg=new Yf("CONFIG",700),dg=new Yf("FINE",500),eg=new Yf("FINER",400),fg=new Yf("FINEST",300),gg=[new Yf("OFF",Infinity),Zf,$f,ag,bg,cg,dg,eg,fg,new Yf("ALL",0)],hg=null;g=Xf.prototype;g.getName=function(){return this.g};
function ig(a,b){a.a||(a.a=[]);a.a.push(b)}g.getParent=function(){return this.c};g.getChildren=function(){this.d||(this.d={});return this.d};function jg(a){if(a.b)return a.b;if(a.c)return jg(a.c);Wa("Root logger has no level set.");return null}
g.log=function(a,b,c){if(a.value>=jg(this).value)for(ja(b)&&(b=b()),a=this.hh(a,b,c,Xf.prototype.log),b="log:"+a.getMessage(),p.console&&(p.console.timeStamp?p.console.timeStamp(b):p.console.markTimeline&&p.console.markTimeline(b)),p.msWriteProfilerMark&&p.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.getParent()}};
g.hh=function(a,b,c,d){a=new Vf(a,String(b),this.g);if(c){a.c=c;var e;d=d||Xf.prototype.hh;try{var f;var h=ca("window.location.href");if(v(c))f={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var k,l;b=!1;try{k=c.lineNumber||c.xk||"Not available"}catch(m){k="Not available",b=!0}try{l=c.fileName||c.filename||c.sourceURL||p.$googDebugFname||h}catch(n){l="Not available",b=!0}f=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:k,fileName:l,stack:c.stack||"Not available"}}e="Message: "+Aa(f.message)+'\nUrl: <a href="view-source:'+f.fileName+'" target="_new">'+f.fileName+"</a>\nLine: "+f.lineNumber+"\n\nBrowser stack:\n"+Aa(f.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Aa(Rf(d)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}a.a=e}return a};function kg(a,b){a.log($f,b,void 0)}function lg(a,b,c){a.log(bg,b,c)}
g.config=function(a,b){this.log(cg,a,b)};var mg={},ng=null;function og(){ng||(ng=new Xf(""),mg[""]=ng,ng.b=cg)}function pg(){og();return ng}function O(a){og();var b;if(!(b=mg[a])){b=new Xf(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=O(a.substr(0,c));c.getChildren()[d]=b;b.c=c;mg[a]=b}return b};function qg(a,b,c){a&&a.log(b,c,void 0)}function P(a,b){a&&a.log(ag,b,void 0)}function rg(a,b){a&&a.log(dg,b,void 0)};var sg,tg;tg=sg=!1;var ug=ub;ug&&(-1!=ug.indexOf("Firefox")||-1!=ug.indexOf("Camino")||(-1!=ug.indexOf("iPhone")||-1!=ug.indexOf("iPod")?sg=!0:-1!=ug.indexOf("iPad")?tg=!0:-1!=ug.indexOf("Chrome")||-1!=ug.indexOf("Android")||ug.indexOf("Safari")));var vg=sg,wg=tg;var xg=Kb||wg||vg;function yg(){}ea(yg);yg.prototype.a=0;function zg(a){return"y:"+(a.a++).toString(36)};function Q(a){J.call(this);this.b=a||ec();this.cf=Ag;this.ia=null;this.J=!1;this.s=null;this.Qb=void 0;this.o=this.g=this.i=this.a=null}B(Q,J);Q.prototype.pi=yg.t();var Ag=null;function Bg(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}g=Q.prototype;
g.r=function(){return this.ia||(this.ia=zg(this.pi))};g.e=function(){return this.s};function R(a){a.Qb||(a.Qb=new zf(a));return a.Qb}function Cg(a,b){if(a==b)throw Error("Unable to set parent component");if(b&&a.i&&a.ia&&Dg(a.i,a.ia)&&a.i!=b)throw Error("Unable to set parent component");a.i=b;Q.f.Ne.call(a,b)}g.getParent=function(){return this.i};g.Ne=function(a){if(this.i&&this.i!=a)throw Error("Method not supported");Q.f.Ne.call(this,a)};g.A=function(){this.s=this.b.createElement("div")};
g.render=function(a){Eg(this,a)};function Eg(a,b,c){if(a.J)throw Error("Component already rendered");a.s||a.A();b?b.insertBefore(a.s,c||null):a.b.a.body.appendChild(a.s);a.i&&!a.i.J||a.n()}g.n=function(){this.J=!0;Fg(this,function(a){!a.J&&a.e()&&a.n()})};g.W=function(){Fg(this,function(a){a.J&&a.W()});this.Qb&&this.Qb.removeAll();this.J=!1};
g.l=function(){this.J&&this.W();this.Qb&&(this.Qb.u(),delete this.Qb);Fg(this,function(a){a.u()});this.s&&xc(this.s);this.i=this.a=this.s=this.o=this.g=null;Q.f.l.call(this)};g.D=function(a,b){this.Ld(a,Gg(this),b)};
g.Ld=function(a,b,c){if(a.J&&(c||!this.J))throw Error("Component already rendered");if(0>b||b>Gg(this))throw Error("Child component index out of bounds");this.o&&this.g||(this.o={},this.g=[]);if(a.getParent()==this){var d=a.r();this.o[d]=a;jb(this.g,a)}else Db(this.o,a.r(),a);Cg(a,this);nb(this.g,b,0,a);a.J&&this.J&&a.getParent()==this?(c=this.B(),c.insertBefore(a.e(),c.childNodes[b]||null)):c?(this.s||this.A(),b=S(this,b+1),Eg(a,this.B(),b?b.s:null)):this.J&&!a.J&&a.s&&a.s.parentNode&&1==a.s.parentNode.nodeType&&
a.n()};g.B=function(){return this.s};function Hg(a){null==a.cf&&(a.cf=ed(a.J?a.s:a.b.a.body));return a.cf}function Gg(a){return a.g?a.g.length:0}function Dg(a,b){return a.o&&b?Eb(a.o,b)||null:null}function S(a,b){return a.g?a.g[b]||null:null}function Fg(a,b,c){a.g&&C(a.g,b,c)}function Ig(a,b){return a.g&&b?Ya(a.g,b):-1}
g.removeChild=function(a,b){if(a){var c=v(a)?a:a.r();a=Dg(this,c);if(c&&a){var d=this.o;c in d&&delete d[c];jb(this.g,a);b&&(a.W(),a.s&&xc(a.s));Cg(a,null)}}if(!a)throw Error("Child is not in parent component");return a};g.tg=function(a){for(var b=[];this.g&&0!=this.g.length;)b.push(this.removeChild(S(this,0),a));return b};function Jg(){Q.call(this);this.L=new zf(this);this.c=null}B(Jg,Q);g=Jg.prototype;g.A=function(){Jg.f.A.call(this);var a=this.e();a.classList.add("crm-template");a.classList.add("inj");a.classList.add("ydn-crm")};function Kg(a){a=a.e();return Jc(a,"FORM")}function Lg(a){for(a=Kg(a).nextElementSibling;a&&"TABLE"!=a.tagName;)a=a.nextElementSibling;return a}
function Mg(a){a=(a=Kg(a).querySelector("textarea[name=to]"))?a.parentElement:null;if(!a)return[];a=a.querySelectorAll("span[email]");for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c].getAttribute("email");e&&b.push(e)}return b}function Ng(a){a=Lg(a);var b=a.querySelector('div[aria-label="Message Body"]');b||(b=a.querySelector("div[g_editable=true]"));return b}
g.n=function(){Jg.f.n.call(this);var a;a:{a=Lg(this).querySelectorAll('div[role="button"]');for(var b=a.length-1;0<=b;b--){var c=a[b],d=c.getAttribute("aria-label");if(d&&(0<d.indexOf("Enter)")||0<d.indexOf("Send)"))){a=c;break a}}a=null}a?this.L.listen(a,"mousedown",this.Mj):window.console.warn("Send button not found");(a=Ng(this))?(this.c=new Og(a),this.L.listen(this.c,Pg,this.Ij)):window.console.warn("message body not found");(a=(a=Qg(this.e()))?a.querySelector("img ~ img ~ img"):null)?this.L.listen(a,
"mousedown",this.og):window.console.warn("Close button not found")};g.Mj=function(){K(this,new Rg(this));this.og()};g.og=function(){K(this,new Sg(this))};g.Ij=function(a){a.a==Tg&&(xg&&a.metaKey||!xg&&a.ctrlKey)&&(K(this,new Rg(this)),this.og())};function Qg(a){return a?"dialog"==a.getAttribute("role")?a:Qg(a.parentElement):null}g.l=function(){this.c.u();this.c=null;Jg.f.l.call(this)};
function Ug(){for(var a=document.querySelectorAll('input[name="subjectbox"]'),b=0;b<a.length;b++){var c=a[b],d=c.getAttribute("data-ydn-subjectbox");if(!d)return d="tag"+qa(),c.setAttribute("data-ydn-subjectbox",d),c}return null}function Rg(a){H.call(this,"es",a)}B(Rg,H);function Sg(a){H.call(this,"cc",a)}B(Sg,H);Jg.prototype.toString=function(){var a;a:{if(a=this.e())if(a=a.querySelector('input[name="subjectbox"]')){a=a.getAttribute("data-ydn-subjectbox");break a}a=""}return"AnchorContainer-"+a};function Vg(a){J.call(this);this.L=new zf(this);this.a=[];this.L.listen(a,Wg,this.c)}B(Vg,J);Vg.prototype.logger=O("ydn.crm.gmail.ComposeObserver");Vg.prototype.c=function(a){a.c==Xg&&Yg(this)};Vg.prototype.b=function(a){a=a.target;jb(this.a,a)||window.console.warn("Cannot remove "+a);a.u()};function Yg(a){var b=Ug();b?wf(function(){var a=new Jg;Eg(a,b.parentNode,b);this.L.listen(a,"cc",this.b);this.a.push(a);K(this,new Zg(a,this))},200,a):P(a.logger,"compose toolbar not found.")}
function Zg(a,b){H.call(this,"nc",b);this.c=a}B(Zg,H);var $g;function ah(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function bh(a,b,c){u(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?($g||($g={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=$g,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function ch(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};var Tg=13;function dh(a,b,c,d,e){if(!(D||Pb&&Wb("525")))return!0;if(Kb&&e)return eh(a);if(e&&!d)return!1;w(b)&&(b=fh(b));if(!c&&(17==b||18==b||Kb&&91==b))return!1;if(Pb&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(D&&d&&b==a)return!1;switch(a){case Tg:return!0;case 27:return!Pb}return eh(a)}
function eh(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||Pb&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function fh(a){if(Ob)a=gh(a);else if(Kb&&Pb)a:switch(a){case 93:a=91;break a}return a}
function gh(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Og(a,b){J.call(this);a&&hh(this,a,b)}B(Og,J);g=Og.prototype;g.s=null;g.ye=null;g.cg=null;g.ze=null;g.Na=-1;g.Tb=-1;g.mf=!1;
var Pg="key",ih={3:Tg,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},jh={Up:38,Down:40,Left:37,Right:39,Enter:Tg,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},kh=D||Pb&&Wb("525"),lh=Kb&&Ob;g=Og.prototype;
g.hj=function(a){Pb&&(17==this.Na&&!a.ctrlKey||18==this.Na&&!a.altKey||Kb&&91==this.Na&&!a.metaKey)&&(this.Tb=this.Na=-1);-1==this.Na&&(a.ctrlKey&&17!=a.a?this.Na=17:a.altKey&&18!=a.a?this.Na=18:a.metaKey&&91!=a.a&&(this.Na=91));kh&&!dh(a.a,this.Na,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Tb=fh(a.a),lh&&(this.mf=a.altKey))};g.jj=function(a){this.Tb=this.Na=-1;this.mf=a.altKey};
g.handleEvent=function(a){var b=a.c,c,d,e=b.altKey;D&&"keypress"==a.type?c=this.Tb:Pb&&"keypress"==a.type?c=this.Tb:Nb?c=this.Tb:(c=b.keyCode||this.Tb,d=b.charCode||0,lh&&(e=this.mf),Kb&&63==d&&224==c&&(c=191));d=c=fh(c);var f=b.keyIdentifier;c?63232<=c&&c in ih?d=ih[c]:25==c&&a.shiftKey&&(d=9):f&&f in jh&&(d=jh[f]);this.Na=d;a=new mh(d,0,0,b);a.altKey=e;K(this,a)};g.e=function(){return this.s};
function hh(a,b,c){a.ze&&nh(a);a.s=b;a.ye=ef(a.s,"keypress",a,c);a.cg=ef(a.s,"keydown",a.hj,c,a);a.ze=ef(a.s,"keyup",a.jj,c,a)}function nh(a){a.ye&&(of(a.ye),of(a.cg),of(a.ze),a.ye=null,a.cg=null,a.ze=null);a.s=null;a.Na=-1;a.Tb=-1}g.l=function(){Og.f.l.call(this);nh(this)};function mh(a,b,c,d){Qe.call(this,d);this.type=Pg;this.a=a}B(mh,Qe);function oh(a){if(a.classList)return a.classList;a=a.className;return v(a)&&a.match(/\S+/g)||[]}function ph(a,b){return a.classList?a.classList.contains(b):hb(oh(a),b)}function T(a,b){a.classList?a.classList.add(b):ph(a,b)||(a.className+=0<a.className.length?" "+b:b)}function qh(a,b){if(a.classList)C(b,function(b){T(a,b)});else{var c={};C(oh(a),function(a){c[a]=!0});C(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function rh(a,b){a.classList?a.classList.remove(b):ph(a,b)&&(a.className=$a(oh(a),function(a){return a!=b}).join(" "))}function sh(a,b){a.classList?C(b,function(b){rh(a,b)}):a.className=$a(oh(a),function(a){return!hb(b,a)}).join(" ")};function th(a,b){if(!a)throw Error("Invalid class name "+a);if(!ja(b))throw Error("Invalid decorator function "+b);}var uh={};function vh(a){this.a=a}ea(vh);function wh(a,b){a&&(a.tabIndex=b?0:-1)}vh.prototype.c=function(a){a=a.e();nd(a,!0,Ob);D&&(a.hideFocus=!0);var b=this.a;b&&ah(a,b)};vh.prototype.m=function(){return"goog-container"};vh.prototype.b=function(a){var b=this.m(),c=[b,a.Vb==xh?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};vh.prototype.g=function(){return yh};function zh(){}var Ah;ea(zh);var Bh={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};g=zh.prototype;g.lc=function(){};g.Aa=function(a){var b=a.b.j("div",Ch(this,a).join(" "),a.N());Dh(this,a,b);return b};g.ha=function(a){return a};function Eh(a,b,c){if(a=a.e?a.e():a){var d=[b];D&&!Wb("7")&&(d=Fh(oh(a),b),d.push(b));(c?qh:sh)(a,d)}}
g.Ic=function(a){Hg(a)&&this.Sf(a.e(),!0);a.isEnabled()&&this.Jc(a,a.Q())};function Gh(a,b,c){if(a=c||a.lc())c=b.getAttribute("role")||null,a!=c&&ah(b,a)}function Dh(a,b,c){b.Q()||bh(c,"hidden",!b.Q());b.isEnabled()||a.kb(c,1,!b.isEnabled());Hh(b,8)&&a.kb(c,8,Ih(b,8));Hh(b,16)&&a.kb(c,16,Ih(b,16));Hh(b,64)&&a.kb(c,64,Ih(b,64))}g.Rf=function(a,b){nd(a,!b,!D&&!Nb)};g.Sf=function(a,b){Eh(a,this.m()+"-rtl",b)};g.Qf=function(a){var b;return Hh(a,32)&&(b=Jh(a))?Ec(b)&&Fc(b):!1};
g.Jc=function(a,b){var c;if(Hh(a,32)&&(c=Jh(a))){if(!b&&Ih(a,32)){try{c.blur()}catch(d){}Ih(a,32)&&a.qe(null)}(Ec(c)&&Fc(c))!=b&&Dc(c,b)}};g.T=function(a,b){E(a,b);a&&bh(a,"hidden",!b)};g.md=function(a,b,c){var d=a.e();if(d){var e=this.je(b);e&&Eh(a,e,c);this.kb(d,b,c)}};g.kb=function(a,b,c){Ah||(Ah={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=Ah[b];var d=a.getAttribute("role")||null;d&&(d=Bh[d]||b,b="checked"==b||"selected"==b?d:b);b&&bh(a,b,c)};
g.Sb=function(a,b){var c=this.ha(a);if(c&&(vc(c),b))if(v(b))Ac(c,b);else{var d=function(a){if(a){var b=gc(c);c.appendChild(v(a)?b.createTextNode(a):a)}};u(b)?C(b,d):!ga(b)||"nodeType"in b?d(b):C(lb(b),d)}};g.oh=function(a){return a.e()};g.m=function(){return"goog-control"};function Ch(a,b){var c=a.m(),d=[c],e=a.m();e!=c&&d.push(e);c=b.getState();for(e=[];c;){var f=c&-c;e.push(a.je(f));c&=~f}d.push.apply(d,e);(c=b.eb)&&d.push.apply(d,c);D&&!Wb("7")&&d.push.apply(d,Fh(d));return d}
function Fh(a,b){var c=[];b&&(a=a.concat([b]));C([],function(d){!cb(d,pa(hb,a))||b&&!hb(d,b)||c.push(d.join("_"))});return c}g.je=function(a){if(!this.b){var b=this.m();Pa(b.replace(/\xa0|\s/g," ")," ");this.b={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}}return this.b[a]};function Kh(a,b,c){Q.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ka(b);if(d=uh[d])break;b=b.f?b.f.constructor:null}b=d?ja(d.t)?d.t():new d:null}this.d=b;this.wd(t(a)?a:null)}B(Kh,Q);g=Kh.prototype;g.Tf=null;g.nc=0;g.yd=39;g.ac=255;g.Hb=0;g.Vf=!0;g.eb=null;g.Xf=!0;g.lf=!1;g.Uf=null;function Lh(a,b){a.J&&b!=a.Xf&&Mh(a,b);a.Xf=b}function Jh(a){return a.d.oh(a)}
function Nh(a,b,c){c?b&&(a.eb?hb(a.eb,b)||a.eb.push(b):a.eb=[b],Eh(a,b,!0)):b&&a.eb&&jb(a.eb,b)&&(0==a.eb.length&&(a.eb=null),Eh(a,b,!1))}g.A=function(){var a=this.d.Aa(this);this.s=a;Gh(this.d,a,this.pe());this.lf||this.d.Rf(a,!1);this.Q()||this.d.T(a,!1)};g.pe=function(){return this.Uf};g.B=function(){return this.d.ha(this.e())};
g.n=function(){Kh.f.n.call(this);this.d.Ic(this);if(this.yd&-2&&(this.Xf&&Mh(this,!0),Hh(this,32))){var a=Jh(this);if(a){var b=this.ea||(this.ea=new Og);hh(b,a);R(this).listen(b,Pg,this.va).listen(a,"focus",this.Ii).listen(a,"blur",this.qe)}}};
function Mh(a,b){var c=R(a),d=a.e();b?(c.listen(d,"mouseover",a.oc).listen(d,"mousedown",a.mc).listen(d,"mouseup",a.pc).listen(d,"mouseout",a.Yf),a.pd!=da&&c.listen(d,"contextmenu",a.pd),D&&c.listen(d,"dblclick",a.rh)):(c.O(d,"mouseover",a.oc).O(d,"mousedown",a.mc).O(d,"mouseup",a.pc).O(d,"mouseout",a.Yf),a.pd!=da&&c.O(d,"contextmenu",a.pd),D&&c.O(d,"dblclick",a.rh))}g.W=function(){Kh.f.W.call(this);this.ea&&nh(this.ea);this.Q()&&this.isEnabled()&&this.d.Jc(this,!1)};
g.l=function(){Kh.f.l.call(this);this.ea&&(this.ea.u(),delete this.ea);delete this.d;this.eb=this.Tf=null};g.N=function(){return this.Tf};function Oh(a,b){a.d.Sb(a.e(),b);a.wd(b)}g.wd=function(a){this.Tf=a};g.Ob=function(){var a=this.N();if(!a)return"";a=v(a)?a:u(a)?ab(a,Ic).join(""):Gc(a);return xa(a)};g.Me=function(a){Oh(this,a)};g.Q=function(){return this.Vf};
g.T=function(a,b){if(b||this.Vf!=a&&K(this,a?"show":"hide")){var c=this.e();c&&this.d.T(c,a);this.isEnabled()&&this.d.Jc(this,a);this.Vf=a;return!0}return!1};g.isEnabled=function(){return!Ih(this,1)};g.setEnabled=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Ph(this,1,!a)||(a||(Qh(this,!1),this.Ba(!1)),this.Q()&&this.d.Jc(this,a),Rh(this,1,!a,!0))};g.Ba=function(a){Ph(this,2,a)&&Rh(this,2,a)};function Qh(a,b){Ph(a,4,b)&&Rh(a,4,b)}
g.Yb=function(a){Ph(this,8,a)&&Rh(this,8,a)};function Sh(a,b){Ph(a,16,b)&&Rh(a,16,b)}g.$=function(a){Ph(this,64,a)&&Rh(this,64,a)};g.getState=function(){return this.nc};function Ih(a,b){return!!(a.nc&b)}function Rh(a,b,c,d){d||1!=b?Hh(a,b)&&c!=Ih(a,b)&&(a.d.md(a,b,c),a.nc=c?a.nc|b:a.nc&~b):a.setEnabled(!c)}function Hh(a,b){return!!(a.yd&b)}g.la=function(a,b){if(this.J&&Ih(this,a)&&!b)throw Error("Component already rendered");!b&&Ih(this,a)&&Rh(this,a,!1);this.yd=b?this.yd|a:this.yd&~a};
function Th(a,b){return!!(a.ac&b)&&Hh(a,b)}function Ph(a,b,c){return Hh(a,b)&&Ih(a,b)!=c&&(!(a.Hb&b)||K(a,Bg(b,c)))&&!a.P}g.oc=function(a){!Uh(a,this.e())&&K(this,"enter")&&this.isEnabled()&&Th(this,2)&&this.Ba(!0)};g.Yf=function(a){!Uh(a,this.e())&&K(this,"leave")&&(Th(this,4)&&Qh(this,!1),Th(this,2)&&this.Ba(!1))};g.pd=da;function Uh(a,b){return!!a.i&&zc(b,a.i)}
g.mc=function(a){this.isEnabled()&&(Th(this,2)&&this.Ba(!0),Se(a)&&(Th(this,4)&&Qh(this,!0),this.d.Qf(this)&&Jh(this).focus()));!this.lf&&Se(a)&&a.preventDefault()};g.pc=function(a){this.isEnabled()&&(Th(this,2)&&this.Ba(!0),Ih(this,4)&&this.Ha(a)&&Th(this,4)&&Qh(this,!1))};g.rh=function(a){this.isEnabled()&&this.Ha(a)};
g.Ha=function(a){Th(this,16)&&Sh(this,!Ih(this,16));Th(this,8)&&this.Yb(!0);Th(this,64)&&this.$(!Ih(this,64));var b=new H("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.h=a.h);return K(this,b)};g.Ii=function(){Th(this,32)&&Ph(this,32,!0)&&Rh(this,32,!0)};g.qe=function(){Th(this,4)&&Qh(this,!1);Th(this,32)&&Ph(this,32,!1)&&Rh(this,32,!1)};
g.va=function(a){return this.Q()&&this.isEnabled()&&this.Kc(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};g.Kc=function(a){return a.a==Tg&&this.Ha(a)};if(!ja(Kh))throw Error("Invalid component class "+Kh);if(!ja(zh))throw Error("Invalid renderer class "+zh);var Vh=ka(Kh);uh[Vh]=zh;th("goog-control",function(){return new Kh(null)});function Wh(a,b,c){Q.call(this,c);this.kc=b||vh.t();this.Vb=a||this.kc.g()}B(Wh,Q);var xh="horizontal",yh="vertical";g=Wh.prototype;g.dg=null;g.ea=null;g.kc=null;g.Vb=null;g.Rb=!0;g.jc=!0;g.Ec=!0;g.ja=-1;g.ka=null;g.Va=!1;g.tb=null;function Xh(a){return a.dg||a.e()}g.A=function(){this.s=this.b.j("div",this.kc.b(this).join(" "))};g.B=function(){return this.e()};
g.n=function(){Wh.f.n.call(this);Fg(this,function(a){a.J&&Yh(this,a)},this);var a=this.e();this.kc.c(this);this.T(this.Rb,!0);R(this).listen(this,"enter",this.Wf).listen(this,"highlight",this.Fi).listen(this,"unhighlight",this.Hi).listen(this,"open",this.oj).listen(this,"close",this.Ei).listen(a,"mousedown",this.Gi).listen(gc(a),"mouseup",this.Vi).listen(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.Si);this.Ec&&Zh(this,!0)};
function Zh(a,b){var c=R(a),d=Xh(a);b?c.listen(d,"focus",a.ld).listen(d,"blur",a.nh).listen(a.ea||(a.ea=new Og(Xh(a))),Pg,a.va):c.O(d,"focus",a.ld).O(d,"blur",a.nh).O(a.ea||(a.ea=new Og(Xh(a))),Pg,a.va)}g.W=function(){this.Ta(-1);this.ka&&this.ka.$(!1);this.Va=!1;Wh.f.W.call(this)};g.l=function(){Wh.f.l.call(this);this.ea&&(this.ea.u(),this.ea=null);this.kc=this.ka=this.tb=this.dg=null};g.Wf=function(){return!0};
g.Fi=function(a){var b=Ig(this,a.target);if(-1<b&&b!=this.ja){var c=$h(this);c&&c.Ba(!1);this.ja=b;c=$h(this);this.Va&&Qh(c,!0);this.ka&&c!=this.ka&&(Hh(c,64)?c.$(!0):this.ka.$(!1))}b=this.e();null!=a.target.e()&&bh(b,"activedescendant",a.target.e().id)};g.Hi=function(a){a.target==$h(this)&&(this.ja=-1);this.e().removeAttribute("aria-activedescendant")};g.oj=function(a){(a=a.target)&&a!=this.ka&&a.getParent()==this&&(this.ka&&this.ka.$(!1),this.ka=a)};
g.Ei=function(a){a.target==this.ka&&(this.ka=null)};g.Gi=function(a){this.jc&&(this.Va=!0);var b=Xh(this);b&&Ec(b)&&Fc(b)?b.focus():a.preventDefault()};g.Vi=function(){this.Va=!1};g.Si=function(a){var b;a:{b=a.target;if(this.tb)for(var c=this.e();b&&b!==c;){var d=b.id;if(d in this.tb){b=this.tb[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.mc(a);break;case "mouseup":b.pc(a);break;case "mouseover":b.oc(a);break;case "mouseout":b.Yf(a);break;case "contextmenu":b.pd(a)}};
g.ld=function(){};g.nh=function(){this.Ta(-1);this.Va=!1;this.ka&&this.ka.$(!1)};g.va=function(a){return this.isEnabled()&&this.Q()&&(0!=Gg(this)||this.dg)&&this.Of(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
g.Of=function(a){var b=$h(this);if(b&&"function"==typeof b.va&&b.va(a)||this.ka&&this.ka!=b&&"function"==typeof this.ka.va&&this.ka.va(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.a){case 27:if(this.Ec)Xh(this).blur();else return!1;break;case 36:ai(this);break;case 35:bi(this);break;case 38:if(this.Vb==yh)ci(this);else return!1;break;case 37:if(this.Vb==xh)Hg(this)?di(this):ci(this);else return!1;break;case 40:if(this.Vb==yh)di(this);else return!1;break;case 39:if(this.Vb==
xh)Hg(this)?ci(this):di(this);else return!1;break;default:return!1}return!0};function Yh(a,b){var c=b.e(),c=c.id||(c.id=b.r());a.tb||(a.tb={});a.tb[c]=b}g.D=function(a,b){Wh.f.D.call(this,a,b)};g.Ld=function(a,b,c){a.Hb|=2;a.Hb|=64;a.la(32,!1);Lh(a,!1);var d=a.getParent()==this?Ig(this,a):-1;Wh.f.Ld.call(this,a,b,c);a.J&&this.J&&Yh(this,a);a=d;-1==a&&(a=Gg(this));a==this.ja?this.ja=Math.min(Gg(this)-1,b):a>this.ja&&b<=this.ja?this.ja++:a<this.ja&&b>this.ja&&this.ja--};
g.removeChild=function(a,b){if(a=v(a)?Dg(this,a):a){var c=Ig(this,a);-1!=c&&(c==this.ja?(a.Ba(!1),this.ja=-1):c<this.ja&&this.ja--);var d=a.e();d&&d.id&&this.tb&&(c=this.tb,d=d.id,d in c&&delete c[d])}a=Wh.f.removeChild.call(this,a,b);Lh(a,!0);return a};g.Q=function(){return this.Rb};g.T=function(a,b){if(b||this.Rb!=a&&K(this,a?"show":"hide")){this.Rb=a;var c=this.e();c&&(E(c,a),this.Ec&&wh(Xh(this),this.jc&&this.Rb),b||K(this,this.Rb?"aftershow":"afterhide"));return!0}return!1};g.isEnabled=function(){return this.jc};
g.setEnabled=function(a){this.jc!=a&&K(this,a?"enable":"disable")&&(a?(this.jc=!0,Fg(this,function(a){a.Yh?delete a.Yh:a.setEnabled(!0)})):(Fg(this,function(a){a.isEnabled()?a.setEnabled(!1):a.Yh=!0}),this.Va=this.jc=!1),this.Ec&&wh(Xh(this),a&&this.Rb))};function ei(a,b){b!=a.Ec&&a.J&&Zh(a,b);a.Ec=b;a.jc&&a.Rb&&wh(Xh(a),b)}g.Ta=function(a){(a=S(this,a))?a.Ba(!0):-1<this.ja&&$h(this).Ba(!1)};function $h(a){return S(a,a.ja)}function ai(a){fi(a,function(a,c){return(a+1)%c},Gg(a)-1)}
function bi(a){fi(a,function(a,c){a--;return 0>a?c-1:a},0)}function di(a){fi(a,function(a,c){return(a+1)%c},a.ja)}function ci(a){fi(a,function(a,c){a--;return 0>a?c-1:a},a.ja)}function fi(a,b,c){c=0>c?Ig(a,a.ka):c;var d=Gg(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=S(a,c);if(f&&a.Ug(f)){a.Pf(c);break}e++;c=b.call(a,c,d)}}g.Ug=function(a){return a.Q()&&a.isEnabled()&&Hh(a,2)};g.Pf=function(a){this.Ta(a)};function gi(){}B(gi,zh);ea(gi);gi.prototype.m=function(){return"goog-menuheader"};function hi(a,b,c){Kh.call(this,a,c||gi.t(),b);this.la(1,!1);this.la(2,!1);this.la(4,!1);this.la(32,!1);this.nc=1}B(hi,Kh);th("goog-menuheader",function(){return new hi(null)});function ii(){this.a=[]}B(ii,zh);ea(ii);function ji(a,b){var c=a.a[b];if(!c){switch(b){case 0:c=a.m()+"-highlight";break;case 1:c=a.m()+"-checkbox";break;case 2:c=a.m()+"-content"}a.a[b]=c}return c}g=ii.prototype;g.lc=function(){return"menuitem"};g.Aa=function(a){var b=a.b.j("div",Ch(this,a).join(" "),ki(this,a.N(),a.b));li(this,a,b,Hh(a,8)||Hh(a,16));return b};g.ha=function(a){return a&&a.firstChild};
g.Sb=function(a,b){var c=this.ha(a),d=mi(this,a)?c.firstChild:null;ii.f.Sb.call(this,a,b);d&&!mi(this,a)&&c.insertBefore(d,c.firstChild||null)};function ki(a,b,c){a=ji(a,2);return c.j("div",a,b)}function mi(a,b){var c=a.ha(b);if(c){var c=c.firstChild,d=ji(a,1);return!!c&&yc(c)&&ph(c,d)}return!1}function li(a,b,c,d){Gh(a,c,b.pe());Dh(a,b,c);d!=mi(a,c)&&(d?T(c,"goog-option"):rh(c,"goog-option"),c=a.ha(c),d?(a=ji(a,1),c.insertBefore(b.b.j("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}
g.je=function(a){switch(a){case 2:return ji(this,0);case 16:case 8:return"goog-option-selected";default:return ii.f.je.call(this,a)}};g.m=function(){return"goog-menuitem"};function ni(a,b,c,d){Kh.call(this,a,d||ii.t(),c);this.a=b}B(ni,Kh);g=ni.prototype;g.R=function(){var a=this.a;return null!=a?a:this.Ob()};g.la=function(a,b){ni.f.la.call(this,a,b);switch(a){case 8:Ih(this,16)&&!b&&Sh(this,!1);var c=this.e();c&&this&&c&&li(this.d,this,c,b);break;case 16:(c=this.e())&&this&&c&&li(this.d,this,c,b)}};
g.Ob=function(){var a=this.N();return u(a)?(a=ab(a,function(a){return yc(a)&&(ph(a,"goog-menuitem-accel")||ph(a,"goog-menuitem-mnemonic-separator"))?"":Ic(a)}).join(""),xa(a)):ni.f.Ob.call(this)};g.pc=function(a){var b=this.getParent();if(b){var c=b.c;b.c=null;if(b=c&&w(a.clientX))b=new bc(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}ni.f.pc.call(this,a)};g.Kc=function(a){return a.a==this.kg&&this.Ha(a)?!0:ni.f.Kc.call(this,a)};g.Di=function(){return this.kg};
th("goog-menuitem",function(){return new ni(null)});ni.prototype.pe=function(){return Hh(this,16)?"menuitemcheckbox":Hh(this,8)?"menuitemradio":ni.f.pe.call(this)};ni.prototype.getParent=function(){return Kh.prototype.getParent.call(this)};ni.prototype.Gc=function(){return Kh.prototype.Gc.call(this)};function oi(){}B(oi,zh);ea(oi);oi.prototype.Aa=function(a){return a.b.j("div",this.m())};oi.prototype.Sb=function(){};oi.prototype.m=function(){return"goog-menuseparator"};function pi(a,b){Kh.call(this,null,a||oi.t(),b);this.la(1,!1);this.la(2,!1);this.la(4,!1);this.la(32,!1);this.nc=1}B(pi,Kh);pi.prototype.n=function(){pi.f.n.call(this);var a=this.e();ah(a,"separator")};th("goog-menuseparator",function(){return new pi});function qi(a){this.a=a||"menu"}B(qi,vh);ea(qi);qi.prototype.ub=function(a,b){return zc(a.e(),b)};qi.prototype.m=function(){return"goog-menu"};qi.prototype.c=function(a){qi.f.c.call(this,a);a=a.e();bh(a,"haspopup","true")};function ri(a){pi.call(this,oi.t(),a)}B(ri,pi);th("goog-menuseparator",function(){return new pi});function si(a,b){Wh.call(this,yh,b||qi.t(),a);ei(this,!1)}B(si,Wh);g=si.prototype;g.Od=!0;g.m=function(){return this.kc.m()};g.ub=function(a){if(this.kc.ub(this,a))return!0;for(var b=0,c=Gg(this);b<c;b++){var d=S(this,b);if("function"==typeof d.ub&&d.ub(a))return!0}return!1};g.sb=function(a){this.D(a,!0)};g.gc=function(){var a=[];Fg(this,function(b){a.push(b)});return a};
g.T=function(a,b,c){(b=si.f.T.call(this,a,b))&&a&&this.J&&this.Od&&Xh(this).focus();a&&c&&w(c.clientX)?this.c=new bc(c.clientX,c.clientY):this.c=null;return b};g.Wf=function(a){this.Od&&Xh(this).focus();return si.f.Wf.call(this,a)};g.Ug=function(a){return a.isEnabled()&&a.Q()&&Hh(a,2)};g.Of=function(a){var b=si.f.Of.call(this,a);b||Fg(this,function(c){!b&&c.Di&&c.kg==a.a&&(this.isEnabled()&&this.Ta(Ig(this,c)),b=c.va(a))},this);return b};
g.Ta=function(a){si.f.Ta.call(this,a);if(a=S(this,a)){var b=a.e();a=this.e();var c=dd(b),d=dd(a),e=sd(a),f=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,h=a.scrollTop,e=e+Math.min(f,Math.max(f-(a.clientWidth-b.offsetWidth),0)),h=h+Math.min(c,Math.max(c-d,0)),b=new bc(e,h);a.scrollLeft=b.x;a.scrollTop=b.y}};function ti(a,b,c,d,e,f,h,k,l){var m,n;if(m=c.offsetParent){var q="HTML"==m.tagName||"BODY"==m.tagName;q&&"static"==Wc(m)||(n=dd(m),q||(q=(q=ed(m))&&Ob?-m.scrollLeft:!q||D&&Wb("8")||"visible"==Vc(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,n=cc(n,new bc(q,m.scrollTop))))}m=n||new bc;n=kd(a);if(q=cd(a)){var r=new Rc(q.left,q.top,q.right-q.left,q.bottom-q.top),q=Math.max(n.left,r.left),s=Math.min(n.left+n.width,r.left+r.width);if(q<=s){var y=Math.max(n.top,r.top),r=Math.min(n.top+
n.height,r.top+r.height);y<=r&&(n.left=q,n.top=y,n.width=s-q,n.height=r-y)}}q=ec(a);y=ec(c);if(q.a!=y.a){var s=q.a.body,y=oc(y.a),r=new bc(0,0),A=nc(gc(s)),I=s;do{var M;if(A==y)M=dd(I);else{var N=I;M=void 0;if(N.getBoundingClientRect)M=ad(N),M=new bc(M.left,M.top);else{M=Oc(ec(N));var ia=dd(N);M=new bc(ia.x-M.x,ia.y-M.y)}if(Ob&&!Wb(12)){b:{var ia=N,db=Ta("transform");if(void 0===ia.style[db]&&(db=Pc()+Ua(db),void 0!==ia.style[db])){ia=(Pb?"-webkit":Ob?"-moz":D?"-ms":Nb?"-o":null)+"-transform";break b}ia=
"transform"}N=(N=Vc(N,ia)||Vc(N,"transform"))?(N=N.match(wd))?new bc(parseFloat(N[1]),parseFloat(N[2])):new bc(0,0):new bc(0,0);M=new bc(M.x+N.x,M.y+N.y)}}r.x+=M.x;r.y+=M.y}while(A&&A!=y&&(I=A.frameElement)&&(A=A.parent));s=cc(r,dd(s));!D||D&&9<=Yb||Nc(q)||(s=cc(s,Oc(q)));n.left+=s.x;n.top+=s.y}a=ui(a,b);b=new bc(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);b=cc(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var L;if(h)if(l)L=l;else if(L=cd(c))L.top-=m.y,L.right-=m.x,L.bottom-=m.y,L.left-=
m.x;e=L;l=b.clone();L=ui(c,d);d=id(c);a=k?k.clone():d.clone();k=l;l=a;k=k.clone();l=l.clone();a=0;if(f||0!=L)L&2?k.x-=l.width+(f?f.right:0):f&&(k.x+=f.left),L&1?k.y-=l.height+(f?f.bottom:0):f&&(k.y+=f.top);h&&(e?(f=k,L=l,a=0,65==(h&65)&&(f.x<e.left||f.x>=e.right)&&(h&=-2),132==(h&132)&&(f.y<e.top||f.y>=e.bottom)&&(h&=-5),f.x<e.left&&h&1&&(f.x=e.left,a|=1),f.x<e.left&&f.x+L.width>e.right&&h&16&&(L.width=Math.max(L.width-(f.x+L.width-e.right),0),a|=4),f.x+L.width>e.right&&h&1&&(f.x=Math.max(e.right-
L.width,e.left),a|=1),h&2&&(a=a|(f.x<e.left?16:0)|(f.x+L.width>e.right?32:0)),f.y<e.top&&h&4&&(f.y=e.top,a|=2),f.y<=e.top&&f.y+L.height<e.bottom&&h&32&&(L.height=Math.max(L.height-(e.top-f.y),0),f.y=e.top,a|=8),f.y>=e.top&&f.y+L.height>e.bottom&&h&32&&(L.height=Math.max(L.height-(f.y+L.height-e.bottom),0),a|=8),f.y+L.height>e.bottom&&h&4&&(f.y=Math.max(e.bottom-L.height,e.top),a|=2),h&8&&(a=a|(f.y<e.top?64:0)|(f.y+L.height>e.bottom?128:0)),h=a):h=256,a=h);f=new Rc(0,0,0,0);f.left=k.x;f.top=k.y;f.width=
l.width;f.height=l.height;h=a;h&496||(Xc(c,new bc(f.left,f.top)),a=new dc(f.width,f.height),d==a||d&&a&&d.width==a.width&&d.height==a.height||(f=a,d=Nc(ec(gc(c))),!D||Wb("10")||d&&Wb("8")?(c=c.style,Ob?c.MozBoxSizing="border-box":Pb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(f.width,0)+"px",c.height=Math.max(f.height,0)+"px"):(k=c.style,d?(d=rd(c,"padding"),c=sd(c),k.pixelWidth=f.width-c.left-d.left-d.right-c.right,k.pixelHeight=f.height-c.top-d.top-d.bottom-c.bottom):
(k.pixelWidth=f.width,k.pixelHeight=f.height))));return h}function ui(a,b){return(b&4&&ed(a)?b^2:b)&-5};function vi(){}vi.prototype.c=function(){};function wi(a,b,c){this.a=a;this.b=b;this.h=c}B(wi,vi);wi.prototype.c=function(a,b,c){ti(this.a,this.b,a,b,void 0,c,this.h)};function xi(a,b,c,d){wi.call(this,a,b);this.d=c?5:0;this.g=d||void 0}B(xi,wi);xi.prototype.i=function(){return this.d};xi.prototype.o=function(a){this.d=a};xi.prototype.c=function(a,b,c,d){var e=ti(this.a,this.b,a,b,null,c,10,d,this.g);if(e&496){var f=zi(e,this.b);b=zi(e,b);e=ti(this.a,f,a,b,null,c,10,d,this.g);e&496&&(f=zi(e,f),b=zi(e,b),ti(this.a,f,a,b,null,c,this.d,d,this.g))}};function zi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Ai(a,b,c,d){xi.call(this,a,b,c||d);(c||d)&&this.o(65|(d?32:132))}B(Ai,xi);function Bi(){}B(Bi,zh);ea(Bi);g=Bi.prototype;g.lc=function(){return"button"};g.kb=function(a,b,c){switch(b){case 8:case 16:bh(a,"pressed",c);break;default:case 64:case 1:Bi.f.kb.call(this,a,b,c)}};g.Aa=function(a){var b=Bi.f.Aa.call(this,a);this.qa(b,a.Pb());var c=a.R();c&&this.kd(b,c);Hh(a,16)&&this.kb(b,16,Ih(a,16));return b};g.R=da;g.kd=da;g.Pb=function(a){return a.title};g.qa=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};g.m=function(){return"goog-button"};function Ci(){}B(Ci,Bi);ea(Ci);g=Ci.prototype;g.lc=function(){};g.Aa=function(a){Lh(a,!1);a.ac&=-256;a.la(32,!1);return a.b.j("button",{"class":Ch(this,a).join(" "),disabled:!a.isEnabled(),title:a.Pb()||"",value:a.R()||""},a.Ob()||"")};g.Ic=function(a){R(a).listen(a.e(),"click",a.Ha)};g.Rf=da;g.Sf=da;g.Qf=function(a){return a.isEnabled()};g.Jc=da;g.md=function(a,b,c){Ci.f.md.call(this,a,b,c);(a=a.e())&&1==b&&(a.disabled=c)};g.R=function(a){return a.value};g.kd=function(a,b){a&&(a.value=b)};g.kb=da;function Di(a,b,c){Kh.call(this,a,b||Ci.t(),c)}B(Di,Kh);g=Di.prototype;g.R=function(){return this.K};g.hb=function(a){this.K=a;this.d.kd(this.e(),a)};g.Pb=function(){return this.p};g.qa=function(a){this.p=a;this.d.qa(this.e(),a)};g.Oh=function(a){this.p=a};g.oe=function(a){var b=this.d,c=Hg(this),d=b.m()+"-collapse-left",b=b.m()+"-collapse-right";Nh(this,c?b:d,!!(a&1));Nh(this,c?d:b,!!(a&2))};g.l=function(){Di.f.l.call(this);delete this.K;delete this.p};
g.n=function(){Di.f.n.call(this);if(Hh(this,32)){var a=Jh(this);a&&R(this).listen(a,"keyup",this.Kc)}};g.Kc=function(a){return a.a==Tg&&a.type==Pg||32==a.a&&"keyup"==a.type?this.Ha(a):32==a.a};th("goog-button",function(){return new Di(null)});function Ei(){}B(Ei,Bi);ea(Ei);g=Ei.prototype;g.Aa=function(a){var b=Ch(this,a),b=a.b.j("div",{"class":"goog-inline-block "+b.join(" ")},this.wf(a.N(),a.b));this.qa(b,a.Pb());Dh(this,a,b);return b};g.lc=function(){return"button"};g.ha=function(a){return a&&a.firstChild&&a.firstChild.firstChild};g.wf=function(a,b){return b.j("div","goog-inline-block "+(this.m()+"-outer-box"),b.j("div","goog-inline-block "+(this.m()+"-inner-box"),a))};g.m=function(){return"goog-custom-button"};function Fi(){}B(Fi,Ei);ea(Fi);Fi.prototype.ha=function(a){return Fi.f.ha.call(this,a&&a.firstChild)};Fi.prototype.wf=function(a,b){return Fi.f.wf.call(this,[this.a(a,b),b.j("div","goog-inline-block "+(this.m()+"-dropdown"),"\u00a0")],b)};Fi.prototype.a=function(a,b){return b.j("div","goog-inline-block "+(this.m()+"-caption"),a)};Fi.prototype.m=function(){return"goog-menu-button"};function Gi(a,b,c,d,e){Di.call(this,a,c||Fi.t(),d);this.la(64,!0);this.h=new Ai(null,5);b&&this.od(b);this.Y=new tf(500);!vg&&!wg||Wb("533.17.9")||(this.xe=!0);this.S=e||qi.t()}B(Gi,Di);g=Gi.prototype;g.xe=!1;g.n=function(){Gi.f.n.call(this);Hi(this,!0);this.c&&Ii(this,this.c,!0);bh(this.s,"haspopup",!!this.c)};g.W=function(){Gi.f.W.call(this);Hi(this,!1);if(this.c){this.$(!1);this.c.W();Ii(this,this.c,!1);var a=this.c.e();a&&xc(a)}};
g.l=function(){Gi.f.l.call(this);this.c&&(this.c.u(),delete this.c);delete this.ca;this.Y.u()};g.mc=function(a){Gi.f.mc.call(this,a);Ih(this,4)&&(this.$(!Ih(this,64),a),this.c&&(this.c.Va=Ih(this,64)))};g.pc=function(a){Gi.f.pc.call(this,a);this.c&&!Ih(this,4)&&(this.c.Va=!1)};g.Ha=function(){Qh(this,!1);return!0};g.Ui=function(a){this.c&&this.c.Q()&&!this.ub(a.target)&&this.$(!1)};g.ub=function(a){return a&&zc(this.e(),a)||this.c&&this.c.ub(a)||!1};
g.Kc=function(a){if(32==a.a){if(a.preventDefault(),"keyup"!=a.type)return!0}else if(a.type!=Pg)return!1;if(this.c&&this.c.Q()){var b=a.a==Tg||32==a.a,c=this.c.va(a);return 27==a.a||b?(this.$(!1),!0):c}return 40==a.a||38==a.a||32==a.a||a.a==Tg?(this.$(!0,a),!0):!1};g.nd=function(){this.$(!1)};g.kj=function(){Ih(this,4)||this.$(!1)};g.qe=function(a){this.xe||this.$(!1);Gi.f.qe.call(this,a)};function Ji(a){a.c||a.od(new si(a.b,a.S));return a.c||null}
g.od=function(a){var b=this.c;if(a!=b&&(b&&(this.$(!1),this.J&&Ii(this,b,!1),delete this.c),this.J&&bh(this.s,"haspopup",!!a),a)){this.c=a;Cg(a,this);a.T(!1);var c=this.xe;(a.Od=c)&&ei(a,!0);this.J&&Ii(this,a,!0)}return b};g.sb=function(a){Ji(this).D(a,!0)};g.T=function(a,b){var c=Gi.f.T.call(this,a,b);c&&!this.Q()&&this.$(!1);return c};g.setEnabled=function(a){Gi.f.setEnabled.call(this,a);this.isEnabled()||this.$(!1)};
g.$=function(a,b){Gi.f.$.call(this,a);if(this.c&&Ih(this,64)==a){if(a)this.c.J||this.c.render(),this.M=cd(this.e()),this.w=kd(this.e()),Ki(this),this.c.Ta(!b||40!=b.a&&38!=b.a?-1:0);else{Qh(this,!1);this.c.Va=!1;var c=this.e();c&&(bh(c,"activedescendant",""),bh(c,"owns",""));null!=this.k&&(this.k=void 0,(c=this.c.e())&&fd(c,"",""))}this.c.T(a,!1,b);if(!this.P){var c=R(this),d=a?c.listen:c.O;d.call(c,this.b.a,"mousedown",this.Ui,!0);this.xe&&d.call(c,this.c,"blur",this.kj);d.call(c,this.Y,vf,this.Nj);
a?uf(this.Y):this.Y.stop()}}this.c&&this.c.e()&&this.c.s.removeAttribute("aria-hidden")};function Ki(a){if(a.c.J){var b=a.ca||a.e(),c=a.h;a.h.a=b;b=a.c.e();a.c.Q()||(b.style.visibility="hidden",E(b,!0));!a.k&&a.h.i&&a.h.d&32&&(a.k=id(b));c.c(b,c.b^1,null,a.k);a.c.Q()||(E(b,!1),b.style.visibility="visible")}}
g.Nj=function(){var a=kd(this.e()),b=cd(this.e()),c=this.w;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.M,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.w=a,this.M=b,Ki(this))};function Ii(a,b,c){var d=R(a);c=c?d.listen:d.O;c.call(d,b,"action",a.nd);c.call(d,b,"close",a.Ji);c.call(d,b,"highlight",a.Ki);c.call(d,b,"unhighlight",a.Li)}
function Hi(a,b){var c=R(a);(b?c.listen:c.O).call(c,a.e(),"keydown",a.gj)}g.Ki=function(a){(a=a.target.e())&&Li(this,a)};g.gj=function(a){Hh(this,32)&&Jh(this)&&this.c&&this.c.Q()&&a.stopPropagation()};g.Li=function(){if(!$h(this.c)){var a=this.e();bh(a,"activedescendant","");bh(a,"owns","")}};g.Ji=function(a){if(Ih(this,64)&&a.target instanceof ni){a=a.target;var b=a.e();a.Q()&&Ih(a,2)&&null!=b&&Li(this,b)}};
function Li(a,b){var c=a.e(),d=ch(b,"activedescendant"),d=gc(b).getElementById(d)||b;if(!d.id){var e=yg.t();d.id=zg(e)}e="";d&&(e=d.id);bh(c,"activedescendant",e);bh(c,"owns",d.id)}th("goog-menu-button",function(){return new Gi(null)});function Mi(a,b,c){J.call(this);this.target=a;this.d=b||a;this.c=c||new Rc(NaN,NaN,NaN,NaN);this.b=gc(a);this.a=new zf(this);a=pa(Le,this.a);this.pa||(this.pa=[]);this.pa.push(t(void 0)?z(a,void 0):a);ef(this.d,["touchstart","mousedown"],this.Qh,!1,this)}B(Mi,J);var Ni=D||Ob&&Wb("1.9.3");g=Mi.prototype;g.clientX=0;g.clientY=0;g.Rh=0;g.Sh=0;g.Ab=0;g.Bb=0;g.Kf=!0;g.ec=!1;g.setEnabled=function(a){this.Kf=a};
g.l=function(){Mi.f.l.call(this);nf(this.d,["touchstart","mousedown"],this.Qh,!1,this);this.a.removeAll();Ni&&this.b.releaseCapture();this.d=this.target=null};
g.Qh=function(a){var b="mousedown"==a.type;if(!this.Kf||this.ec||b&&!Se(a))K(this,"earlycancel");else if(Oi(a),K(this,new Pi("start",this,a.clientX,a.clientY))){this.ec=!0;a.preventDefault();var b=this.b,c=b.documentElement,d=!Ni;this.a.listen(b,["touchmove","mousemove"],this.nj,d);this.a.listen(b,["touchend","mouseup"],this.be,d);Ni?(c.setCapture(!1),this.a.listen(c,"losecapture",this.be)):this.a.listen(nc(b),"blur",this.be);this.i&&this.a.listen(this.i,"scroll",this.Lj,d);this.clientX=this.Rh=a.clientX;
this.clientY=this.Sh=a.clientY;this.Ab=this.target.offsetLeft;this.Bb=this.target.offsetTop;this.g=Oc(ec(this.b));qa()}};g.be=function(a){this.a.removeAll();Ni&&this.b.releaseCapture();if(this.ec){Oi(a);this.ec=!1;var b=Qi(this,this.Ab),c=Ri(this,this.Bb);K(this,new Pi("end",this,a.clientX,a.clientY,0,b,c))}else K(this,"earlycancel")};function Oi(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.c.targetTouches[0],a.b):"touchend"!=b&&"touchcancel"!=b||a.init(a.c.changedTouches[0],a.b)}
g.nj=function(a){if(this.Kf){Oi(a);var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;if(!this.ec){var d=this.Rh-this.clientX,e=this.Sh-this.clientY;if(0<d*d+e*e)if(K(this,new Pi("start",this,a.clientX,a.clientY)))this.ec=!0;else{this.P||this.be(a);return}}c=Si(this,b,c);b=c.x;c=c.y;this.ec&&K(this,new Pi("beforedrag",this,a.clientX,a.clientY,0,b,c))&&(Ti(this,a,b,c),a.preventDefault())}};
function Si(a,b,c){var d=Oc(ec(a.b));b+=d.x-a.g.x;c+=d.y-a.g.y;a.g=d;a.Ab+=b;a.Bb+=c;b=Qi(a,a.Ab);a=Ri(a,a.Bb);return new bc(b,a)}g.Lj=function(a){var b=Si(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Ti(this,a,b.x,b.y)};function Ti(a,b,c,d){a.dh(c,d);K(a,new Pi("drag",a,b.clientX,b.clientY,0,c,d))}function Qi(a,b){var c=a.c,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}
function Ri(a,b){var c=a.c,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}g.dh=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};function Pi(a,b,c,d,e,f,h){H.call(this,a);this.clientX=c;this.clientY=d;this.left=t(f)?f:b.Ab;this.top=t(h)?h:b.Bb}B(Pi,H);function Ui(a){J.call(this);this.s=a;a=D?"focusout":"blur";this.a=ef(this.s,D?"focusin":"focus",this,!D);this.b=ef(this.s,a,this,!D)}B(Ui,J);Ui.prototype.handleEvent=function(a){var b=new Qe(a.c);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";K(this,b)};Ui.prototype.l=function(){Ui.f.l.call(this);of(this.a);of(this.b);delete this.s};function Vi(a,b){Q.call(this,b);this.M=!!a;this.k=null}B(Vi,Q);g=Vi.prototype;g.Nb=null;g.re=!1;g.Da=null;g.ta=null;g.Ya=null;g.qf=!1;g.m=function(){return"goog-modalpopup"};g.he=function(){return this.Da};
g.A=function(){Vi.f.A.call(this);var a=this.e(),b=ya(this.m()).split(" ");qh(a,b);Dc(a,!0);E(a,!1);this.M&&!this.ta&&(this.ta=this.b.j("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'}),this.ta.className=this.m()+"-bg",E(this.ta,!1),ld(this.ta,0));this.Da||(this.Da=this.b.j("div",this.m()+"-bg"),E(this.Da,!1));this.Ya||(this.Ya=this.b.createElement("span"),E(this.Ya,!1),Dc(this.Ya,!0),this.Ya.style.position="absolute")};g.Mh=function(){this.qf=!1};
g.n=function(){this.ta&&wc(this.ta,this.e());wc(this.Da,this.e());Vi.f.n.call(this);var a=this.e();a.parentNode&&a.parentNode.insertBefore(this.Ya,a.nextSibling);this.Nb=new Ui(this.b.a);R(this).listen(this.Nb,"focusin",this.onFocus);Wi(this,!1)};g.W=function(){this.Q()&&this.T(!1);Le(this.Nb);Vi.f.W.call(this);xc(this.ta);xc(this.Da);xc(this.Ya)};
g.T=function(a){if(a!=this.re)if(this.v&&this.v.stop(),this.K&&this.K.stop(),this.p&&this.p.stop(),this.F&&this.F.stop(),this.J&&Wi(this,a),a){if(K(this,"beforeshow")){try{this.k=this.b.a.activeElement}catch(b){}this.ug();var c=nc(this.b.a)||window;if("fixed"==Wc(this.e()))var d=a=0;else d=Oc(this.b),a=d.x,d=d.y;var e=hd(this.e()),c=lc(c);a=Math.max(a+c.width/2-e.width/2,0);d=Math.max(d+c.height/2-e.height/2,0);Xc(this.e(),a,d);Xc(this.Ya,a,d);R(this).listen(oc(this.b.a),"resize",this.ug);Xi(this,
!0);this.focus();this.re=!0;this.v&&this.K?(mf(this.v,"end",this.Ee,!1,this),Yi(this.K),Yi(this.v)):this.Ee()}}else if(K(this,"beforehide")){R(this).O(oc(this.b.a),"resize",this.ug);this.re=!1;this.p&&this.F?(mf(this.p,"end",this.Ce,!1,this),Yi(this.F),Yi(this.p)):this.Ce();a:{try{d=this.b;e=d.a.body;c=d.a.activeElement||e;if(!this.k||this.k==e){this.k=null;break a}(c==e||d.contains(this.e(),c))&&this.k.focus()}catch(f){}this.k=null}}};
function Wi(a,b){if(b){a.h||(a.h=[]);for(var c=a.b,c=c.getChildren(c.a.body),d=0;d<c.length;d++){var e=c[d];e==a.s||ch(e,"hidden")||(bh(e,"hidden",!0),a.h.push(e))}}else if(a.h){for(d=0;d<a.h.length;d++)a.h[d].removeAttribute("aria-hidden");a.h=null}}function Xi(a,b){a.ta&&E(a.ta,b);a.Da&&E(a.Da,b);E(a.e(),b);E(a.Ya,b)}g.Ee=function(){K(this,"show")};g.Ce=function(){Xi(this,!1);K(this,"hide")};g.Q=function(){return this.re};g.focus=function(){this.fh()};
g.ug=function(){this.ta&&E(this.ta,!1);this.Da&&E(this.Da,!1);var a=this.b.a,b=lc(nc(a)||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.ta&&(E(this.ta,!0),fd(this.ta,c,a));this.Da&&(E(this.Da,!0),fd(this.Da,c,a))};g.onFocus=function(a){this.qf?this.Mh():a.target==this.Ya&&wf(this.fh,0,this)};g.fh=function(){try{D&&this.b.a.body.focus(),this.e().focus()}catch(a){}};
g.l=function(){Le(this.v);this.v=null;Le(this.p);this.p=null;Le(this.K);this.K=null;Le(this.F);this.F=null;Vi.f.l.call(this)};function Zi(a,b,c){Vi.call(this,b,c);this.d=a||"modal-dialog";this.c=$i()}B(Zi,Vi);g=Zi.prototype;g.ce=!0;g.ue=!0;g.lg=!0;g.pf=.5;g.ph="";g.Lc=null;g.Mb=null;g.$d=!1;g.Rc=null;g.xc=null;g.Wh=null;g.Za=null;g.cc=null;g.bb=null;g.m=function(){return this.d};g.setTitle=function(a){this.ph=a;this.xc&&Ac(this.xc,a)};g.N=function(){return null!=this.Lc?zd(this.Lc):""};g.B=function(){this.e()||this.render();return this.cc};g.he=function(){this.e()||this.render();return Zi.f.he.call(this)};
function aj(a){1!=a.lg&&bj(a,!0)}function bj(a,b){a.lg=b;if(a.J){var c=a.b,d=a.he(),e=a.ta;b?(e&&c.wh(e,a.e()),c.wh(d,a.e())):(c.mh(e),c.mh(d))}a.Q()&&Wi(a,b)}function cj(a,b){var c=ya(a.d+"-title-draggable").split(" ");a.e()&&(b?qh(a.Rc,c):sh(a.Rc,c));if(b&&!a.Mb){var d;d=new Mi(a.e(),a.Rc);a.Mb=d;qh(a.Rc,c);ef(a.Mb,"start",a.Wj,!1,a)}else!b&&a.Mb&&(a.Mb.u(),a.Mb=null)}
g.A=function(){Zi.f.A.call(this);var a=this.e(),b=this.b;this.Rc=b.j("div",this.d+"-title",this.xc=b.j("span",{className:this.d+"-title-text",id:this.r()},this.ph),this.Za=b.j("span",this.d+"-title-close"));uc(a,this.Rc,this.cc=b.j("div",this.d+"-content"),this.bb=b.j("div",this.d+"-buttons"));ah(this.xc,"heading");ah(this.Za,"button");Dc(this.Za,!0);bh(this.Za,"label",dj);this.Wh=this.xc.id;ah(a,"dialog");bh(a,"labelledby",this.Wh||"");this.Lc&&(this.cc.innerHTML=zd(this.Lc));E(this.Za,this.ue);
this.c&&(a=this.c,a.s=this.bb,a.render());E(this.bb,!!this.c);this.pf=this.pf;this.e()&&(a=this.he())&&ld(a,this.pf)};g.n=function(){Zi.f.n.call(this);R(this).listen(this.e(),"keydown",this.Fh).listen(this.e(),"keypress",this.Fh);R(this).listen(this.bb,"click",this.Cj);cj(this,!0);R(this).listen(this.Za,"click",this.Pj);var a=this.e();ah(a,"dialog");""!==this.xc.id&&bh(a,"labelledby",this.xc.id);this.lg||bj(this,!1)};g.W=function(){this.Q()&&this.T(!1);cj(this,!1);Zi.f.W.call(this)};
g.T=function(a){a!=this.Q()&&(this.J||this.render(),Zi.f.T.call(this,a))};g.Ee=function(){Zi.f.Ee.call(this);K(this,ej)};g.Ce=function(){Zi.f.Ce.call(this);K(this,fj);this.$d&&this.u()};
g.Wj=function(){var a=this.b.a,b=lc(nc(a)||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=hd(this.e());"fixed"==Wc(this.e())?(b=new Rc(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height)),this.Mb.c=b||new Rc(NaN,NaN,NaN,NaN)):this.Mb.c=new Rc(0,0,c-d.width,a-d.height)||new Rc(NaN,NaN,NaN,NaN)};g.Pj=function(){gj(this)};function gj(a){if(a.ue){var b=a.c,c=b&&b.rf;c?(b=b.get(c),K(a,new hj(c,b))&&a.T(!1)):a.T(!1)}}
function ij(a,b){a.ue=b;a.Za&&E(a.Za,a.ue)}g.l=function(){this.bb=this.Za=null;Zi.f.l.call(this)};function jj(a,b){a.c=b;if(a.bb){if(a.c){var c=a.c;c.s=a.bb;c.render()}else a.bb.innerHTML=zd(Bd);E(a.bb,!!a.c)}}g.Cj=function(a){a:{for(a=a.target;null!=a&&a!=this.bb;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.c.get(a);K(this,new hj(a,b))&&this.T(!1)}};
g.Fh=function(a){var b=!1,c=!1,d=this.c,e=a.target;if("keydown"==a.type)if(this.ce&&27==a.a){var f=d&&d.rf,e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=K(this,new hj(f,b))):e||(b=!0)}else{if(9==a.a&&a.shiftKey&&e==this.e()){this.qf=!0;try{this.Ya.focus()}catch(h){}wf(this.Mh,0,this)}}else if(a.a==Tg){if("BUTTON"==e.tagName&&!e.disabled)f=e.name;else if(e==this.Za)gj(this);else if(d){var k=d.Af,l;if(l=k)a:{l=d.s.getElementsByTagName("BUTTON");for(var m=0,n;n=l[m];m++)if(n.name==k||n.id==
k){l=n;break a}l=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!l||l.disabled||e||(f=k)}f&&d&&(c=!0,b=K(this,new hj(f,String(d.get(f)))))}else e==this.Za&&32==a.a&&gj(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.T(!1)};function hj(a,b){this.type=kj;this.key=a;this.caption=b}B(hj,H);var kj="dialogselect",fj="afterhide",ej="aftershow";function lj(a){a||ec();Mf.call(this)}B(lj,Mf);g=lj.prototype;g.Af=null;g.s=null;g.rf=null;
g.set=function(a,b,c,d){Mf.prototype.set.call(this,a,b);c&&(this.Af=a);d&&(this.rf=a);return this};function mj(a,b,c,d){return a.set(b.key,b.caption,c,d)}g.render=function(){if(this.s){this.s.innerHTML=zd(Bd);var a=ec(this.s);this.forEach(function(b,c){var d=a.j("button",{name:c},b);c==this.Af&&(d.className="goog-buttonset-default");this.s.appendChild(d)},this)}};g.e=function(){return this.s};
var dj="Close",nj={key:"ok",caption:"OK"},oj={key:"cancel",caption:"Cancel"},pj={key:"yes",caption:"Yes"},qj={key:"no",caption:"No"},rj={key:"save",caption:"Save"},sj={key:"continue",caption:"Continue"};function $i(){return mj(mj(new lj,nj,!0),oj,!1,!0)}"undefined"!=typeof document&&(mj(new lj,nj,!0,!0),$i(),mj(mj(new lj,pj,!0),qj,!1,!0),mj(mj(mj(new lj,pj),qj,!0),oj,!1,!0),mj(mj(mj(new lj,sj),rj),oj,!0,!0));function tj(){this.a=[]}B(tj,ii);ea(tj);tj.prototype.Aa=function(a){var b=tj.f.Aa.call(this,a);T(b,"goog-submenu");var c=a.b.j("span");c.className="goog-submenu-arrow";uj(a,c);this.ha(b).appendChild(c);return b};tj.prototype.Sb=function(a,b){var c=this.ha(a),d=c&&c.lastChild;tj.f.Sb.call(this,a,b);d&&c.lastChild!=d&&ph(d,"goog-submenu-arrow")&&c.appendChild(d)};
tj.prototype.Ic=function(a){tj.f.Ic.call(this,a);var b=a.B(),c=ic(a.b.a,"span","goog-submenu-arrow",b)[0];uj(a,c);c!=b.lastChild&&b.appendChild(c);a=a.e();bh(a,"haspopup","true")};function uj(a,b){Hg(a)?(T(b,"goog-submenu-arrow-rtl"),Ac(b,"\u25c4")):(rh(b,"goog-submenu-arrow-rtl"),Ac(b,"\u25ba"))};function vj(a,b,c,d){ni.call(this,a,b,c,d||tj.t())}B(vj,ni);g=vj.prototype;g.ed=null;g.zg=null;g.ig=!1;g.ma=null;g.de=!1;g.n=function(){vj.f.n.call(this);R(this).listen(this.getParent(),"hide",this.Gh);this.ma&&wj(this,this.ma,!0)};g.W=function(){R(this).O(this.getParent(),"hide",this.Gh);this.ma&&(wj(this,this.ma,!1),this.de||(this.ma.W(),xc(this.ma.e())));vj.f.W.call(this)};g.l=function(){this.ma&&!this.de&&this.ma.u();this.ma=null;vj.f.l.call(this)};
g.Ba=function(a,b){vj.f.Ba.call(this,a);b&&(xj(this).Va=!0);a||(this.ed&&p.clearTimeout(this.ed),this.ed=wf(this.wb,218,this))};g.yg=function(){var a=this.getParent();a&&$h(a)==this&&(yj(this,!0),zj(this))};g.wb=function(){var a=this.ma;a&&a.getParent()==this&&(yj(this,!1),Fg(a,function(a){"function"==typeof a.wb&&a.wb()}))};function Aj(a){a.ed&&p.clearTimeout(a.ed);a.zg&&p.clearTimeout(a.zg)}g.T=function(a,b){var c=vj.f.T.call(this,a,b);c&&!this.Q()&&this.wb();return c};
function zj(a){Fg(a.getParent(),function(a){a!=this&&"function"==typeof a.wb&&(a.wb(),Aj(a))},a)}g.va=function(a){var b=a.a,c=Hg(this)?37:39,d=Hg(this)?39:37;if(!this.ig){if(!this.isEnabled()||b!=c&&b!=this.kg)return!1;this.yg();ai(xj(this));Aj(this)}else if(!xj(this).va(a))if(b==d)this.wb();else return!1;a.preventDefault();return!0};g.Dj=function(){if(this.ma.getParent()==this){Aj(this);var a=this.Gc();a.Ta(Ig(a,this));zj(this)}};g.Gh=function(a){a.target==this.Gc()&&(this.wb(),Aj(this))};
g.oc=function(a){this.isEnabled()&&(Aj(this),this.zg=wf(this.yg,218,this));vj.f.oc.call(this,a)};g.Ha=function(a){Aj(this);if(Hh(this,8))return vj.f.Ha.call(this,a);this.yg();return!0};
function yj(a,b){K(a,Bg(64,b));var c=xj(a);if(b!=a.ig){var d=a.e();b?T(d,"goog-submenu-open"):rh(d,"goog-submenu-open")}if(b!=c.Q()&&(b&&(c.J||c.render(),c.Ta(-1)),c.T(b),b)){var c=new xi(a.e(),6,!1),d=xj(a),e=d.e();d.Q()||(e.style.visibility="hidden",E(e,!0));c.c(e,4);d.Q()||(E(e,!1),e.style.visibility="visible")}a.ig=b}function wj(a,b,c){var d=R(a);(c?d.listen:d.O).call(d,b,"enter",a.Dj)}g.sb=function(a){xj(this).D(a,!0)};g.gc=function(){return xj(this).gc()};
function xj(a){if(a.ma)a.de&&a.ma.getParent()!=a&&Cg(a.ma,a);else{var b=new si(a.b),c=a.ma;b!=c&&(c&&(a.wb(),a.J&&wj(a,c,!1)),a.ma=b,a.de=!1,b&&(Cg(b,a),b.T(!1,!0),b.Od=!1,ei(b,!1),a.J&&wj(a,b,!0)))}a.ma.e()||a.ma.A();return a.ma}g.ub=function(a){return xj(this).ub(a)};th("goog-submenu",function(){return new vj(null)});function Bj(){}Bj.prototype.a=null;function Cj(a){var b;(b=a.a)||(b={},Dj(a)&&(b[0]=!0,b[1]=!0),b=a.a=b);return b};var Ej;function Fj(){}B(Fj,Bj);function Gj(a){return(a=Dj(a))?new ActiveXObject(a):new XMLHttpRequest}function Dj(a){if(!a.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.b=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.b}Ej=new Fj;var Hj=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Ij(a){if(Jj){Jj=!1;var b=p.location;if(b){var c=b.href;if(c&&(c=(c=Ij(c)[3]||null)?decodeURI(c):c)&&c!=b.hostname)throw Jj=!0,Error();}}return a.match(Hj)}var Jj=Pb;function Kj(a){J.call(this);this.headers=new Mf;this.K=a||null;this.c=!1;this.F=this.a=null;this.ia=this.k="";this.h=0;this.o="";this.d=this.S=this.p=this.M=!1;this.i=0;this.v=null;this.g=Lj;this.w=this.Se=!1}B(Kj,J);var Lj="";Kj.prototype.b=O("goog.net.XhrIo");var Mj=/^https?$/i,Nj=["POST","PUT"];g=Kj.prototype;g.kh=function(){return this.g};
g.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.k+"; newUri="+a);b=b?b.toUpperCase():"GET";this.k=a;this.o="";this.h=0;this.ia=b;this.M=!1;this.c=!0;this.a=this.K?Gj(this.K):Gj(Ej);this.F=this.K?Cj(this.K):Cj(Ej);this.a.onreadystatechange=z(this.Hh,this);try{rg(this.b,Oj(this,"Opening Xhr")),this.S=!0,this.a.open(b,String(a),!0),this.S=!1}catch(e){rg(this.b,Oj(this,"Error opening Xhr: "+e.message));Pj(this,e);return}a=c||"";var f=this.headers.clone();
d&&Gf(d,function(a,b){f.set(b,a)});d=fb(f.ya(),Qj);c=p.FormData&&a instanceof p.FormData;!hb(Nj,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(a,b){this.a.setRequestHeader(b,a)},this);this.g&&(this.a.responseType=this.g);"withCredentials"in this.a&&(this.a.withCredentials=this.Se);try{Rj(this),0<this.i&&(this.w=Sj(this.a),rg(this.b,Oj(this,"Will abort after "+this.i+"ms if incomplete, xhr2 "+this.w)),this.w?(this.a.timeout=this.i,this.a.ontimeout=
z(this.Vh,this)):this.v=wf(this.Vh,this.i,this)),rg(this.b,Oj(this,"Sending request")),this.p=!0,this.a.send(a),this.p=!1}catch(h){rg(this.b,Oj(this,"Send error: "+h.message)),Pj(this,h)}};function Sj(a){return D&&Wb(9)&&w(a.timeout)&&t(a.ontimeout)}function Qj(a){return"content-type"==a.toLowerCase()}g.Vh=function(){"undefined"!=typeof aa&&this.a&&(this.o="Timed out after "+this.i+"ms, aborting",this.h=8,rg(this.b,Oj(this,this.o)),K(this,"timeout"),this.abort(8))};
function Pj(a,b){a.c=!1;a.a&&(a.d=!0,a.a.abort(),a.d=!1);a.o=b;a.h=5;Tj(a);Uj(a)}function Tj(a){a.M||(a.M=!0,K(a,"complete"),K(a,"error"))}g.abort=function(a){this.a&&this.c&&(rg(this.b,Oj(this,"Aborting")),this.c=!1,this.d=!0,this.a.abort(),this.d=!1,this.h=a||7,K(this,"complete"),K(this,"abort"),Uj(this))};g.l=function(){this.a&&(this.c&&(this.c=!1,this.d=!0,this.a.abort(),this.d=!1),Uj(this,!0));Kj.f.l.call(this)};g.Hh=function(){this.P||(this.S||this.p||this.d?Vj(this):this.Jj())};g.Jj=function(){Vj(this)};
function Vj(a){if(a.c&&"undefined"!=typeof aa)if(a.F[1]&&4==Wj(a)&&2==Xj(a))rg(a.b,Oj(a,"Local request error detected and ignored"));else if(a.p&&4==Wj(a))wf(a.Hh,0,a);else if(K(a,"readystatechange"),4==Wj(a)){rg(a.b,Oj(a,"Request complete"));a.c=!1;try{Yj(a)?(K(a,"complete"),K(a,"success")):(a.h=6,a.o=Zj(a)+" ["+Xj(a)+"]",Tj(a))}finally{Uj(a)}}}
function Uj(a,b){if(a.a){Rj(a);var c=a.a,d=a.F[0]?da:null;a.a=null;a.F=null;b||K(a,"ready");try{c.onreadystatechange=d}catch(e){(c=a.b)&&kg(c,"Problem encountered resetting onreadystatechange: "+e.message)}}}function Rj(a){a.a&&a.w&&(a.a.ontimeout=null);w(a.v)&&(p.clearTimeout(a.v),a.v=null)}
function Yj(a){var b=Xj(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=Ij(String(a.k))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Mj.test(a?a.toLowerCase():"");c=b}return c}function Wj(a){return a.a?a.a.readyState:0}function Xj(a){try{return 2<Wj(a)?a.a.status:-1}catch(b){return-1}}
function Zj(a){try{return 2<Wj(a)?a.a.statusText:""}catch(b){return rg(a.b,"Can not get status: "+b.message),""}}function ak(a){try{if(!a.a)return null;if("response"in a.a)return a.a.response;switch(a.g){case Lj:case "text":return a.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.a)return a.a.mozResponseArrayBuffer}var b=a.b;b&&kg(b,"Response type "+a.g+" is not supported on this browser");return null}catch(c){return rg(a.b,"Can not get response: "+c.message),null}}
function Oj(a,b){return b+" ["+a.ia+" "+a.k+" "+Xj(a)+"]"};function bk(){this.a=[];this.b=[]}function ck(a){0==a.a.length&&(a.a=a.b,a.a.reverse(),a.b=[]);return a.a.pop()}g=bk.prototype;g.ga=function(){return this.a.length+this.b.length};g.Ga=function(){return 0==this.a.length&&0==this.b.length};g.clear=function(){this.a=[];this.b=[]};g.contains=function(a){return hb(this.a,a)||hb(this.b,a)};g.remove=function(a){var b=Za(this.a,a);if(0>b)return jb(this.b,a);Xa.splice.call(this.a,b,1);return!0};
g.ua=function(){for(var a=[],b=this.a.length-1;0<=b;--b)a.push(this.a[b]);for(var c=this.b.length,b=0;b<c;++b)a.push(this.b[b]);return a};function dk(a,b){Ie.call(this);this.i=a||0;this.c=b||10;if(this.i>this.c)throw Error(ek);this.a=new bk;this.b=new Pf;this.g=null;this.Md()}B(dk,Ie);var ek="[goog.structs.Pool] Min can not be greater than max";g=dk.prototype;g.ne=function(){var a=qa();if(!(null!=this.g&&0>a-this.g)){for(var b;0<this.a.ga()&&(b=ck(this.a),!this.mg(b));)this.Md();!b&&this.ga()<this.c&&(b=this.Nf());b&&(this.g=a,this.b.add(b));return b}};
g.$c=function(a){this.b.remove(a);this.mg(a)&&this.ga()<this.c?this.a.b.push(a):fk(a)};g.Md=function(){for(var a=this.a;this.ga()<this.i;){var b=this.Nf();a.b.push(b)}for(;this.ga()>this.c&&0<this.a.ga();)fk(ck(a))};g.Nf=function(){return{}};function fk(a){if("function"==typeof a.u)a.u();else for(var b in a)a[b]=null}g.mg=function(a){return"function"==typeof a.Ai?a.Ai():!0};g.contains=function(a){return this.a.contains(a)||this.b.contains(a)};g.ga=function(){return this.a.ga()+this.b.ga()};
g.Ga=function(){return this.a.Ga()&&this.b.Ga()};g.l=function(){dk.f.l.call(this);if(0<this.b.ga())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var a=this.a;!a.Ga();)fk(ck(a));delete this.a};function gk(a,b){this.a=a;this.b=b}gk.prototype.R=function(){return this.b};gk.prototype.clone=function(){return new gk(this.a,this.b)};function hk(a){this.a=[];if(a)a:{var b,c;if(a instanceof hk){if(b=a.ya(),c=a.ua(),0>=a.ga()){a=this.a;for(var d=0;d<b.length;d++)a.push(new gk(b[d],c[d]));break a}}else b=zb(a),c=yb(a);for(d=0;d<b.length;d++)ik(this,b[d],c[d])}}function ik(a,b,c){var d=a.a;d.push(new gk(b,c));b=d.length-1;a=a.a;for(c=a[b];0<b;)if(d=b-1>>1,a[d].a>c.a)a[b]=a[d],b=d;else break;a[b]=c}g=hk.prototype;
g.remove=function(){var a=this.a,b=a.length,c=a[0];if(!(0>=b)){if(1==b)ib(a);else{a[0]=a.pop();for(var a=0,b=this.a,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,h=2*a+2,f=h<d&&b[h].a<b[f].a?h:f;if(b[f].a>e.a)break;b[a]=b[f];a=f}b[a]=e}return c.R()}};g.ua=function(){for(var a=this.a,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].R());return b};g.ya=function(){for(var a=this.a,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].a);return b};g.clone=function(){return new hk(this)};g.ga=function(){return this.a.length};
g.Ga=function(){return 0==this.a.length};g.clear=function(){ib(this.a)};function jk(){hk.call(this)}B(jk,hk);function lk(a,b){this.d=new jk;dk.call(this,a,b)}B(lk,dk);g=lk.prototype;g.ne=function(a,b){if(!a)return lk.f.ne.call(this);ik(this.d,t(b)?b:100,a);this.Zf()};g.Zf=function(){for(var a=this.d;0<a.ga();){var b=this.ne();if(b)a.remove().apply(this,[b]);else break}};g.$c=function(a){lk.f.$c.call(this,a);this.Zf()};g.Md=function(){lk.f.Md.call(this);this.Zf()};g.l=function(){lk.f.l.call(this);p.clearTimeout(void 0);this.d.clear();this.d=null};function mk(a,b,c){lk.call(this,b,c);this.h=a}B(mk,lk);mk.prototype.Nf=function(){var a=new Kj,b=this.h;b&&b.forEach(function(b,d){a.headers.set(d,b)});return a};mk.prototype.mg=function(a){return!a.P&&!a.a};function nk(a,b,c,d,e){J.call(this);this.d=t(a)?a:1;this.g=t(e)?Math.max(0,e):0;this.c=new mk(b,c,d);this.b=new Mf;this.a=new zf(this)}B(nk,J);var ok="ready complete success error abort timeout".split(" ");g=nk.prototype;g.send=function(a,b,c,d,e,f,h,k,l,m){if(this.b.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new pk(b,z(this.$i,this,a),c,d,e,h,t(k)?k:this.d,l,m);this.b.set(a,b);a=z(this.Qi,this,a);this.c.ne(a,f);return b};
g.abort=function(a,b){var c=this.b.get(a);if(c){var d=c.Ad;c.Sg=!0;b&&(d&&(this.a.O(d,ok,c.Eg),mf(d,"ready",function(){var a=this.c;a.b.remove(d)&&a.$c(d)},!1,this)),this.b.remove(a));d&&d.abort()}};g.Qi=function(a,b){var c=this.b.get(a);c&&!c.Ad?(this.a.listen(b,ok,c.Eg),b.i=Math.max(0,this.g),b.g=c.kh(),c.Ad=b,c.Ad.Se=c.Se,K(this,new qk("ready",this,a,b)),rk(this,a,b),c.Sg&&b.abort()):(c=this.c,c.b.remove(b)&&c.$c(b))};
g.$i=function(a,b){var c=b.target;switch(b.type){case "ready":rk(this,a,c);break;case "complete":a:{var d=this.b.get(a);if(7==c.h||Yj(c)||d.Qd>d.Mf)if(K(this,new qk("complete",this,a,c)),d&&(d.Yg=!0,d.Xg)){c=d.Xg.call(c,b);break a}c=null}return c;case "success":K(this,new qk("success",this,a,c));break;case "timeout":case "error":d=this.b.get(a);d.Qd>d.Mf&&K(this,new qk("error",this,a,c));break;case "abort":K(this,new qk("abort",this,a,c))}return null};
function rk(a,b,c){var d=a.b.get(b);!d||d.Yg||d.Qd>d.Mf?(d&&(a.a.O(c,ok,d.Eg),a.b.remove(b)),a=a.c,a.b.remove(c)&&a.$c(c)):(d.Qd++,c.send(d.$j,d.ih(),d.N(),d.Hf()))}g.l=function(){nk.f.l.call(this);this.c.u();this.c=null;this.a.u();this.a=null;this.b.clear();this.b=null};function qk(a,b,c,d){H.call(this,a,b);this.id=c;this.Ad=d}B(qk,H);
function pk(a,b,c,d,e,f,h,k,l){this.Se=!!l;this.$j=a;this.c=c||"GET";this.a=d;this.b=e||null;this.Mf=t(h)?h:1;this.Qd=0;this.Sg=this.Yg=!1;this.Eg=b;this.Xg=f;this.d=k||Lj;this.Ad=null}pk.prototype.ih=function(){return this.c};pk.prototype.N=function(){return this.a};pk.prototype.Hf=function(){return this.b};pk.prototype.kh=function(){return this.d};function sk(){this.a=qa()}var tk=new sk;sk.prototype.set=function(a){this.a=a};sk.prototype.get=function(){return this.a};function uk(a){this.g=a||"";this.i=tk}uk.prototype.c=!0;uk.prototype.a=!0;uk.prototype.b=!1;function vk(a){a=new Date(a.g);return wk(a.getFullYear()-2E3)+wk(a.getMonth()+1)+wk(a.getDate())+" "+wk(a.getHours())+":"+wk(a.getMinutes())+":"+wk(a.getSeconds())+"."+wk(Math.floor(a.getMilliseconds()/10))}function wk(a){return 10>a?"0"+a:String(a)}function xk(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function yk(a){uk.call(this,a)}B(yk,uk);
yk.prototype.b=!0;yk.prototype.d=function(a){var b;switch(a.d.value){case Zf.value:b="dbg-sh";break;case $f.value:b="dbg-sev";break;case ag.value:b="dbg-w";break;case bg.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.g," ");this.a&&c.push("[",vk(a),"] ");c.push("[",Ka(xk(a,this.i.get())),"s] ");c.push("[",Aa(a.b),"] ");c.push('<span class="',b,'">',za(Ka(Aa(a.getMessage()))));this.b&&a.c&&c.push("<br>",za(Ka(a.a||"")));c.push("</span>");this.c&&c.push("<br>");return c.join("")};
function zk(a){uk.call(this,a)}B(zk,uk);zk.prototype.d=function(a){var b=[];b.push(this.g," ");this.a&&b.push("[",vk(a),"] ");b.push("[",xk(a,this.i.get()),"s] ");b.push("[",a.b,"] ");b.push(a.getMessage());this.b&&a.c&&b.push("\n",a.a);this.c&&b.push("\n");return b.join("")};function Ak(){this.d=z(this.i,this);this.a=new zk;this.a.a=!1;this.a.b=!1;this.b=this.a.c=!1;this.c="";this.g={}}function Bk(a){var b=Ck;if(a!=b.b){var c=pg();a?ig(c,b.d):(c=c.a)&&jb(c,b.d);b.b=a}}Ak.prototype.i=function(a){if(!this.g[a.b]){var b=this.a.d(a),c=Dk;if(c)switch(a.d){case Zf:Ek(c,"info",b);break;case $f:Ek(c,"error",b);break;case ag:Ek(c,"warn",b);break;default:Ek(c,"debug",b)}else this.c+=b}};var Dk=p.console;function Ek(a,b,c){if(a[b])a[b](c);else a.log(c)};function Fk(a){this.d=z(this.g,this);this.a=new yk;this.b=this.a.a=!1;this.s=a;this.c=this.s.ownerDocument||this.s.document;a=ec(this.s);var b=null,c=a.a;if(D&&c.createStyleSheet)a=b=c.createStyleSheet(),D&&t(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{c=ic(a.a,"head",void 0,void 0)[0];c||(b=ic(a.a,"body",void 0,void 0)[0],c=a.j("head"),b.parentNode.insertBefore(c,b));var d=b=a.j("style");D&&t(d.cssText)?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.s.className+=" logdiv"}
Fk.prototype.g=function(a){var b=100>=this.s.scrollHeight-this.s.scrollTop-this.s.clientHeight,c=this.c.createElement("div");c.className="logmsg";c.innerHTML=this.a.d(a);this.s.appendChild(c);b&&(this.s.scrollTop=this.s.scrollHeight)};Fk.prototype.clear=function(){this.s.innerHTML=""};var Ck=null,Gk=null;O("ydn.debug");function Hk(a){var b;if(w("fine"))b=new Yf("log","fine");else if(v("fine")){if(!hg){hg={};b=0;for(var c;c=gg[b];b++)hg[c.value]=c,hg[c.name]=c}b=hg.FINE||null}else b=dg;O(a||"ydn").b=b;t(void 0)?Gk||(a=Gk=new Fk(void 0),1!=a.b&&(b=pg(),ig(b,a.d),a.b=!0),pg().b=ag):Ck||Gk||(Ck=new Ak,Bk(!0),pg().b=ag)}var Ik=null;function Jk(a){Ik&&setTimeout(function(){Ik.log(a)},10)};function Kk(a,b){var c;a instanceof Kk?(this.ic=t(b)?b:a.ic,Lk(this,a.Pc),this.Qe=a.Qe,this.fd=a.fd,Mk(this,a.le),this.td=a.td,Nk(this,a.a.clone()),this.ge=a.ge):a&&(c=Ij(String(a)))?(this.ic=!!b,Lk(this,c[1]||"",!0),this.Qe=Ok(c[2]||""),this.fd=Ok(c[3]||"",!0),Mk(this,c[4]),this.td=Ok(c[5]||"",!0),Nk(this,c[6]||"",!0),this.ge=Ok(c[7]||"")):(this.ic=!!b,this.a=new Pk(null,0,this.ic))}g=Kk.prototype;g.Pc="";g.Qe="";g.fd="";g.le=null;g.td="";g.ge="";g.ic=!1;
g.toString=function(){var a=[],b=this.Pc;b&&a.push(Qk(b,Rk,!0),":");if(b=this.fd){a.push("//");var c=this.Qe;c&&a.push(Qk(c,Rk,!0),"@");a.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.le;null!=b&&a.push(":",String(b))}if(b=this.td)this.fd&&"/"!=b.charAt(0)&&a.push("/"),a.push(Qk(b,"/"==b.charAt(0)?Sk:Tk,!0));(b=this.a.toString())&&a.push("?",b);(b=this.ge)&&a.push("#",Qk(b,Uk));return a.join("")};g.clone=function(){return new Kk(this)};
function Lk(a,b,c){a.Pc=c?Ok(b,!0):b;a.Pc&&(a.Pc=a.Pc.replace(/:$/,""))}function Mk(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.le=b}else a.le=null}function Vk(a){return a.td}function Nk(a,b,c){b instanceof Pk?(a.a=b,Wk(a.a,a.ic)):(c||(b=Qk(b,Xk)),a.a=new Pk(b,0,a.ic))}function Ok(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Qk(a,b,c){return v(a)?(a=encodeURI(a).replace(b,Yk),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}
function Yk(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rk=/[#\/\?@]/g,Tk=/[\#\?:]/g,Sk=/[\#\?]/g,Xk=/[\#\?@]/g,Uk=/#/g;function Pk(a,b,c){this.a=a||null;this.b=!!c}function Zk(a){if(!a.ba&&(a.ba=new Mf,a.za=0,a.a))for(var b=a.a.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=$k(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}
g=Pk.prototype;g.ba=null;g.za=null;g.ga=function(){Zk(this);return this.za};g.add=function(a,b){Zk(this);this.a=null;a=$k(this,a);var c=this.ba.get(a);c||this.ba.set(a,c=[]);c.push(b);this.za++;return this};g.remove=function(a){Zk(this);a=$k(this,a);return Of(this.ba.b,a)?(this.a=null,this.za-=this.ba.get(a).length,this.ba.remove(a)):!1};g.clear=function(){this.ba=this.a=null;this.za=0};g.Ga=function(){Zk(this);return 0==this.za};function al(a,b){Zk(a);b=$k(a,b);return Of(a.ba.b,b)}
g.ya=function(){Zk(this);for(var a=this.ba.ua(),b=this.ba.ya(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.ua=function(a){Zk(this);var b=[];if(v(a))al(this,a)&&(b=kb(b,this.ba.get($k(this,a))));else{a=this.ba.ua();for(var c=0;c<a.length;c++)b=kb(b,a[c])}return b};g.set=function(a,b){Zk(this);this.a=null;a=$k(this,a);al(this,a)&&(this.za-=this.ba.get(a).length);this.ba.set(a,[b]);this.za++;return this};
g.get=function(a,b){var c=a?this.ua(a):[];return 0<c.length?String(c[0]):b};g.toString=function(){if(this.a)return this.a;if(!this.ba)return"";for(var a=[],b=this.ba.ya(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ua(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.a=a.join("&")};g.clone=function(){var a=new Pk;a.a=this.a;this.ba&&(a.ba=this.ba.clone(),a.za=this.za);return a};
function $k(a,b){var c=String(b);a.b&&(c=c.toLowerCase());return c}function Wk(a,b){b&&!a.b&&(Zk(a),a.a=null,a.ba.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.a=null,this.ba.set($k(this,e),lb(a)),this.za+=a.length))},a));a.b=b};O("ydn");function bl(a){return!v(a)||wa(a)?{}:JSON.parse(a)}function cl(a){var b;try{b=dl(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function dl(a){return JSON.stringify(a,void 0,void 0)};O("ydn.http");var el,fl={},gl=[];function hl(){var a=il;fl["default"]=a}function jl(){if(!t("default"))return fl["default"];for(var a="default",b=0;b<gl.length;b++){var c=(0,gl[b])("default");if(c){a=c;break}}return fl[a]||null}function kl(){el||(el=new nk);return el}function ll(a,b,c,d){v(a)?this.raw=a:(this.raw=null,this.status=a,this.body=b,this.headers=c||{},this.a=d)}
function ml(a){if(a.raw){var b=bl(a.raw);b.gapiRequest&&(b=b.gapiRequest.data);a.status=b.status;a.a=b.statusText;a.headers=b.headers;a.body=b.body;a.raw=null}}function nl(a){ml(a);return a.status}function ol(a){ml(a);return 200<=a.status&&400>a.status}function pl(a){ml(a);return a.a||""}function ql(a){ml(a);return a.body}ll.prototype.Hf=function(){ml(this);return this.headers};
function rl(){this.path="https://mail.google.com/mail/feed/atom/bazinga";this.method="GET";this.params={zx:"124"};this.headers={};this.body=void 0}var sl=null;function tl(a,b,c,d){this.b=t(b)?b:kl();this.a="sr"+ul++;this.d=c||0;this.g=!!d;this.c=a}var ul=0;tl.prototype.r=function(){return this.a};
tl.prototype.execute=function(a,b){var c=this.c,d=new Kk(c.path),e;for(e in c.params)d.a.set(e,c.params[e]);this.b.send(this.a,d.toString(),c.method,c.body,c.headers,void 0,function(d){d=d.target;for(var e=(d.a&&4==Wj(d)?d.a.getAllResponseHeaders():"").split("\n"),k={},l=0;l<e.length;l++){var m=e[l].indexOf(":");0<m&&(k[e[l].substr(0,m).toLowerCase()]=e[l].substr(m+1).trim())}e=l=ak(d);if(k["content-type"]&&/json/.test(k["content-type"]))if(x(l))e=l;else if(v(l))try{e=bl(l)}catch(n){e=l}k=new ll(Xj(d),
l,k,Zj(d));sl&&!ol(k)&&sl.log({"class":"ydn.gdata.Entry",method:"commit",context:"HTTP request",HttpRequestData:{path:c.path,uri:String(d.k),method:c.method,params:c.params,headers:c.headers,body:c.body},HttpRespondData:{status:nl(k),statusText:pl(k),body:ql(k),headers:k.Hf()}});a&&(a.call(b,e,k),a=null)},this.d,void 0,this.g);this.b=null};tl.prototype.toString=function(){return"HTTPRequest:"+this.a};function vl(a,b,c){this.b=t(a)?a:kl();this.F=b;this.a=c}vl.prototype.request=function(a){if(this.F){a.headers||(a.headers={});for(var b in this.F)a.headers[b]=this.F[b]}this.a&&(a.path=this.a+a.path);return new tl(a,this.b)};function wl(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ja(Object.freeze)&&Object.freeze(this)}wl.prototype.lower=void 0;wl.prototype.upper=void 0;wl.prototype.toJSON=function(){return xl(this)};function yl(a){return zl(a)}wl.only=function(a){return new wl(a,a,!1,!1)};wl.bound=function(a,b,c,d){return new wl(a,b,c,d)};wl.upperBound=function(a,b){return new wl(void 0,a,void 0,!!b)};wl.lowerBound=function(a,b){return new wl(a,void 0,!!b,void 0)};
function Al(a){var b;if(u(a))b=lb(a),b.push("\uffff");else if(v(a))b=a+"\uffff";else if(w(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return wl.only(a);return wl.bound(a,b,!1,!0)}function xl(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}
function zl(a){return null!=a?null!=a.upper&&null!=a.lower?Bl.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Bl.upperBound(a.upper,a.upperOpen):null!=a.lower?Bl.lowerBound(a.lower,a.lowerOpen):null:null}function Cl(a){if(a instanceof wl)return"";if(null!=a){if(x(a)){for(var b in a)if(a.hasOwnProperty(b)&&!hb(["lower","upper","lowerOpen","upperOpen"],b))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
wl.prototype.nf=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return wl.bound(b,c,d,e)};function Dl(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function El(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==Fl(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Gl(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Gl(c.upper,b)))}else d.push(a+" = ?"),e.push(Gl(c.lower,b))}var Bl=p.IDBKeyRange||p.webkitIDBKeyRange||wl;function Hl(a,b){var c,d;2==arguments.length&&v(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=ga(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}var Il={};
function Jl(a){a=[a];for(var b=new Kl,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(Il);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),Ll(b,e);else if(e instanceof Date)c+=2,b.write(c),Ll(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===Il)b.write(0);else return"";c=0}return b.trim().toString()}function Ml(a){for(var b=[],c=b,d=[],e,f,h=new Nl(a);null!=h.read();)if(0===h.current)c=d.pop();else{if(null===h.current)break;do{e=h.current/4|0;a=h.current%4;for(var k=0;k<e;k++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<h.current+4)h.read();else break}while(1);1===a?c.push(Ol(h)):2===a?c.push(new Date(Ol(h))):3===a?c.push(Pl(h)):0===a&&(c=d.pop())}return b[0]}
function Ll(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Ol(a){var b=a.read()|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=a.read()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.read()|0):a.read()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Pl(a){for(var b=[],c=0,d=0,e=0,f,h;;){f=a.read();if(0===f||null==f)break;0===c?(h=f>>6,2>h&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=h,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Nl(a){this.current=null;this.a=a;this.b=this.a.length-1;this.index=-1}
Nl.prototype.read=function(){return this.current=this.index<this.b?parseInt(this.a[++this.index]+this.a[++this.index],16):null};function Kl(){this.a=[];this.b=void 0}Kl.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};Kl.prototype.trim=function(){for(var a=this.a.length;"00"===this.a[--a];);this.a.length=++a;return this};Kl.prototype.toString=function(){return this.a.length?this.a.join(""):""};
function Ql(a,b){var c=Jl(a),d=Jl(b);return c>d?1:c==d?0:-1};function U(a){ra.call(this,a);this.name="ydn.error.ArgumentException"}B(U,ra);function Rl(a){ra.call(this,a);this.name="ydn.error.NotSupportedException"}B(Rl,ra);function Sl(a){ra.call(this,a);this.name="ydn.error.NotImplementedException"}B(Sl,ra);function Tl(a){ra.call(this,a);this.name="ydn.error.InvalidOperationException"}B(Tl,ra);
function Ul(a){Error.captureStackTrace?Error.captureStackTrace(this,Ul):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}B(Ul,Error);Ul.prototype.name="ydn.error.InternalError";function Vl(a,b,c,d,e){if(!(b instanceof wl))if(v(b)&&t(c)){var f,h,k,l;if("starts"==b||"^"==b)b=Al(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)h=c,l=">"==b;else if("="==b||"=="==b)f=h=c;else throw new U("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)h=e,l=">"==d;else if(t(d))throw new U("invalid op2: "+d);b=wl.bound(h,f,l,k)}}else if(null!=b){if(!(b instanceof wl))if(x(b))b=new wl(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new U("Invalid key range: "+
b+" of type "+typeof b);}else b=null;this.a=b;this.b=a}Vl.prototype.b="";Vl.prototype.gd=function(){return this.b};Vl.prototype.nf=function(a){if(this.b!=a.b)return null;a=null!=this.a&&null!=a.a?this.a.nf(a.a):this.a||a.a;return new Vl(this.b,a)};function V(a,b){a&&a.log(fg,b,void 0)}function W(a,b){a&&a.log(eg,b,void 0)};function Wl(a,b){te.call(this,a,b);this.h=[]}B(Wl,te);function Xl(a,b){for(var c=0;c<a.h.length;c++)a.h[c][0].call(a.h[c][1],b)}Wl.prototype.callback=function(a){this.h.length=0;Wl.f.callback.call(this,a)};Wl.prototype.H=function(a){this.h.length=0;Wl.f.H.call(this,a)};var Yl={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Zl=p.IDBRequest&&"LOADING"in p.IDBRequest?p.IDBTransaction:p.webkitIDBRequest&&"LOADING"in p.webkitIDBRequest&&1===p.webkitIDBTransaction.READ_WRITE?p.webkitIDBTransaction:Yl,$l=Zl.READ_ONLY,am=Zl.READ_WRITE,bm=Zl.VERSION_CHANGE,cm=p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.moz_indexedDB||p.msIndexedDB;function dm(a,b,c,d){Ie.call(this);this.b=c;this.U=c.getName();this.Ua=void 0;this.d=!1;this.V=null;this.i=a;this.ca=b;this.S=0;this.F=this.p=!1;this.w=d||4;this.o=this.c=this.a=void 0;this.v=function(){throw new Ul;};this.M=function(){throw new Ul;};this.ia=function(){}}B(dm,Ie);g=dm.prototype;
g.init=function(a,b,c,d,e){if(t(b)){a=this.b;var f,h=b;if(u(b)){a:{for(f=0;f<a.indexes.length;f++)if(!em(a.indexes[f].keyPath,b)){f=a.indexes[f];break a}f=null}h=b.join(", ")}else f=fm(a,b);if(!f)throw new U('require index "'+h+'" not found in store "'+a.getName()+'"');this.Ua=f.getName()}this.d=v(this.Ua);this.V=c||null;this.S=0;this.F=this.p=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.ob=d;this.qd=e;this.o=this.c=this.a=void 0};g.ob="";g.V=null;
g.unique=!1;g.reverse=!1;g.qd=!0;g.logger=O("ydn.db.core.req.AbstractCursor");function gm(a,b){a.M(b);hm(a);a.p=!0}g.ib=function(a,b,c){null==a&&(W(this.logger,this+" finished."),this.p=!0);this.a=a;this.c=b;this.o=c;this.S++;this.p?(V(this.logger,this+" DONE."),this.v(),hm(this)):(V(this.logger,this+" new cursor position {"+(this.d?this.a+", "+this.c:this.a)+"}"),this.v(this.a))};g.l=function(){this.i=null};
g.toString=function(){return"Cursor:"+this.U+(t(this.Ua)?":"+this.Ua:"")+"["+(this.i?"":"~")+this.ca+"]"};function hm(a){null!=a.c?a.c=im(a.c):a.c=void 0;null!=a.a?a.a=im(a.a):a.a=void 0;a.ia(a.F,a.a,a.c)}g.open=function(a,b,c,d){this.i=a;this.ca=b;this.p=this.F=!1;this.a=c;this.c=d;this.openCursor(this.a,this.c)};function jm(a){a.F=!0;V(a.logger,a+": exit");hm(a)}g.ga=function(){return this.S};g.pb=function(){return this.d?this.c:this.a};g.R=function(){return this.qd?this.pb():this.o};g.Wd=function(){};
g.Dc=function(){};g.restart=function(a,b){V(this.logger,this+" restarting");this.F=this.p=!1;this.openCursor(b,a)};function km(){};function lm(a,b,c,d,e,f,h){if(!v(a))throw new TypeError("store name must be a string, but "+a+" found.");this.a=a;this.c=b;this.i=h;this.o=!!this.c;if(t(d)&&!ha(d))throw new U("reverse value must be a boolean, but "+typeof d+" found");if(t(e)&&!ha(e))throw new U("unique value must be a boolean, but "+typeof e+" found");if(t(f)&&!ha(f))throw new U("key_only value must be a boolean, but "+typeof f+" found");this.b=t(f)?f:!!v(this.c);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.g=
a;if(d=Cl(c))throw new U("Invalid key range: "+d);this.d=zl(c);this.h=mm;this.P=NaN}B(lm,km);lm.prototype.b=!0;function nm(a,b,c){if(3<arguments.length)throw new U("too many argument");lm.call(this,a,void 0,b,c,void 0,!1)}B(nm,lm);function om(a,b,c,d,e){if(!v(b))throw new U("index name must be string");lm.call(this,a,b,c,d,e,!1)}B(om,lm);var mm="init";g=lm.prototype;g.logger=O("ydn.db.Iterator");g.clone=function(){var a=new lm(this.a,this.c,this.d,pm(this),qm(this),this.b,this.i);a.P=this.P;return a};
g.unique=function(a){return new lm(this.a,this.c,this.d,pm(this),a,this.b,this.i)};g.toJSON=function(){return{store:this.a,index:this.c,keyRange:this.d?xl(this.d):null,direction:this.g}};g.toString=function(){var a=t(this.i)?":"+this.i.join(","):t(this.c)?":"+this.c:"",a=a+Dl(this.d);this.h!=mm&&(a+=this.h+"{"+this.k,this.o&&(a+=", "+this.p),a+="}");var b=this.o?"Index":"",b=b+(this.b?"Key":"Value");return b+"Iterator:"+this.a+a};
g.reverse=function(){return new lm(this.a,this.c,this.d,!pm(this),qm(this),this.b,this.i)};function pm(a){return"prev"===a.g||"prevunique"===a.g}function qm(a){return"nextunique"===a.g||"prevunique"===a.g}g.getState=function(){return this.h};g.load=function(a){a=a[0];a.init(this.a,this.i||this.c,this.d,this.g,this.b);this.h="busy";var b=this;a.ia=function(a,d,e){b.k=d;b.p=e;b.h=a?"rest":"done"};a.openCursor(this.k,this.p);return a};g.stores=function(){return[this.a]};function rm(a,b,c){Wl.call(this,b,c);this.P=a;this.h=[];this.p=[];this.ia=[];this.a=null;this.Sc="";this.M=0}B(rm,Wl);g=rm.prototype;g.Sc="";g.logger=O("ydn.db.Request");function sm(a,b,c){a.a=b;a.Sc=c;W(a.logger,a+" BEGIN");if(b){for(c=0;c<a.p.length;c++)a.p[c][0].call(a.p[c][1],b);a.p.length=0}}function tm(a){var b=new rm(a.P);a.M++;sm(b,a.a,a.Sc+"C"+a.M);return b}function um(a){W(a.logger,a+" END");a.a=null}g.ih=function(){return this.P};
g.abort=function(){W(this.logger,this+" aborting "+this.a);if(this.a)if(ja(this.a.abort))this.a.abort();else if(ja(this.a.executeSql))this.a.executeSql("ABORT",[],function(){},function(){return!0});else throw new Rl;else throw new vm(this+" No active transaction");};function X(a,b,c){var d=a.ia.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){X(a,b,c)}):c?a.H(b):a.callback(b)}function wm(a,b,c){a.ia.push([b,c])}function xm(a,b,c){a.a?b.call(c,a.a):a.p.push([b,c])}
g.callback=function(a){W(this.logger,this+" SUCCESS");rm.f.callback.call(this,a)};g.H=function(a){W(this.logger,this+" ERROR");rm.f.H.call(this,a)};g.state=function(){return this.b?this.g?"rejected":"resolved":"pending"};function Y(a){var b="";a.Sc&&(b=a.a?"*":"",b="["+a.Sc+b+"]");return a.P+b}function ym(a,b){var c=new rm(a);X(c,b);return c}g.toString=function(){return"Request:"+Y(this)};
g.Df=function(){this.i&&this.b&&Ce(this)&&(De(this.i),this.i=0);this.c&&(this.c.v--,delete this.c);for(var a=this.d,b=!1;this.o.length&&!this.k;){var c=this.o.shift(),d=c[0],e=c[1],c=c[2];if(d=this.g?e:d)d=d.call(c||this.F,a),t(d)&&(this.g=this.g&&(d==a||d instanceof Error),this.d=a=d),Ud(a)&&(this.k=b=!0)}this.d=a;b&&(b=z(this.w,this,!0),d=z(this.w,this,!1),a instanceof te?(G(a,b,d),a.K=!0):a.then(b,d))};
g.toJSON=function(){var a=(this.Sc||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.P?this.P.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var Fl=cm&&cm.cmp?z(cm.cmp,cm):Ql,zm=[];(function(a){if(null!=a&&!("push"in a))throw new Am('output receiver object must have "push" method.');}).prototype.logger=O("ydn.db.algo.AbstractSolver");function Bm(a){Error.captureStackTrace?Error.captureStackTrace(this,Bm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}B(Bm,Error);Bm.prototype.name="ConstraintError";Bm.prototype.toString=function(){return this.name+": "+this.message};function Cm(a){Error.captureStackTrace?Error.captureStackTrace(this,Cm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}B(Cm,Error);
Cm.prototype.toString=function(){return this.name+": "+this.message};function Dm(a){Error.captureStackTrace?Error.captureStackTrace(this,Dm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}B(Dm,Error);Dm.prototype.name="ydn.db.VersionError";Dm.prototype.toString=function(){return this.name+": "+this.message};function Em(a){Error.captureStackTrace?Error.captureStackTrace(this,Em):this.stack=Error().stack||"";a&&(this.message=String(a))}B(Em,Error);
Em.prototype.name="ydn.db.InternalError";function vm(a){Error.captureStackTrace?Error.captureStackTrace(this,vm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}B(vm,Error);function Fm(a){Error.captureStackTrace?Error.captureStackTrace(this,Fm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}B(Fm,Error);
function Gm(a){Error.captureStackTrace?Error.captureStackTrace(this,Gm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}B(Gm,Error);Gm.prototype.name="NotFoundError";Gm.prototype.toString=function(){return this.name+": "+this.message};function Hm(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Hm):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}B(Hm,Error);
Hm.prototype.toString=function(){return this.name+": "+this.message};function Im(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Im):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}B(Im,Error);Im.prototype.toString=function(){return this.name+": "+this.message};function Jm(a){Error.captureStackTrace?Error.captureStackTrace(this,Jm):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}
B(Jm,Error);function Km(a){Error.captureStackTrace?Error.captureStackTrace(this,Km):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}B(Km,Error);function Lm(a,b,c){var d;if(x(a))d=a.store,b=a.id,null!=a.parent&&(c=new Lm(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new Lm(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.U=d;this.id=b;this.parent=c||null}g=Lm.prototype;g.toJSON=function(){var a={store:this.U,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
g.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.U+"^:"+this.id};g.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};g.r=function(){return this.id};function Mm(a){return u(a.id)?a.id.join("^|"):a.id instanceof Date?+a.id:a.id}g.getParent=function(){return this.parent};function im(a){if(ga(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function Nm(a,b){this.a=b}Nm.prototype.logger=O("ydn.db.crud.req.RequestExecuto");Nm.prototype.toString=function(){return"RequestExecutor"};function Om(a){this.c=a;this.a=null;this.b=0}g=Om.prototype;g.logger=O("ydn.db.tr.Mutex");g.Xa=null;g.isAvailable=function(){return!this.d};function Pm(a){return!!a.a&&a.isAvailable()}g.Oa=null;g.toString=function(){return"Mutex:"+("B"+this.c+"T"+this.b)+(this.a?"*":"")};function Qm(a,b,c,d,e,f){this.w=a;this.F=b;this.a=this.h=0;this.v=d;this.P=e;this.d=c||Rm;this.o=f||0}Qm.prototype.logger=O("ydn.db.tr.Thread");Qm.prototype.type=function(){return Sm(this.w)};Qm.prototype.I=function(){return this.w};Qm.prototype.Ia=function(){return"B"+this.F+"T"+this.h};var Rm="single";function Tm(a){if(a)if(ja(a.abort))a.abort();else if(ja(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Rl;else throw new vm("No active transaction");};function Um(a,b,c,d,e,f){Qm.call(this,a,b,c,d,e,f);this.c=[];this.g=[];this.i=null;this.b=new Om(b);this.k=f||0;this.p=!1}B(Um,Qm);g=Um.prototype;g.logger=O("ydn.db.tr.Serial");
function Vm(a,b,c){if("multi"==a.d)a:if(a=a.b,!a.Xa||!a.mode||c!=a.mode&&(a.mode!=am||c!=$l)||b.length>a.Xa.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.Xa.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.d)a:if(a=a.b,a.Xa&&a.mode&&c==a.mode&&a.Xa.length==b.length){for(c=0;c<b.length;c++)if(-1==a.Xa.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.d?!0:!1;return b}
function Wm(a){var b=0<a.c.length?a.c[0].Xa:null,c=0<a.c.length?a.c[0].mode:null;return null!=b&&null!=c?Vm(a,b,c):!1}function Xm(a,b,c,d,e){V(a.logger,"push tx queue["+a.c.length+"]");a.c.push({fe:b,Xa:c,mode:d,Oa:e})}g.abort=function(){W(this.logger,this+": aborting");Tm(this.i)};
g.Nc=function(a,b,c,d){var e=v(b)?[b]:b;if(ga(e)){if(0==e.length)throw new U("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!v(e[f]))throw new U("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.pa&&!hb(this.pa,e[f]))throw new U('store name "'+f+e[f]+'" in scope of '+this);}}else throw new U("store names must be an array");var h=t(c)?c:$l,k=this;if(this.b.a||!Ym(this.I())&&this.p)Xm(this,a,b,h,d);else{var l=this.Ia();d&&this.g.push(d);
if(this.k&&this.h>=this.k)throw new Tl("Exceed maximum number of transactions of "+this.k);this.p=!0;this.I().transaction(function(c){var d=k.b;d.a=c;d.d=!1;d.Xa=b;d.mode=h;d.b++;d.Oa=null;l=k.Ia();rg(k.logger,l+" BEGIN "+dl(b)+" "+h);a(k);for(a=null;Wm(k);)c=k.c.shift(),c.Oa&&k.g.push(c.Oa),V(k.logger,"pop tx queue"+(k.c.length+1)+" reusing T"+k.h),c.fe()},e,h,function(a,b){rg(k.logger,l+" "+a);var c=k.b;c.a?(c.a=null,c.Xa=null,c.mode=null,ja(c.Oa)&&c.Oa(a,b),c.Oa=null):P(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.g.length;c++)(0,k.g[c])(a,b);k.g.length=0;(c=k.c.shift())&&k.Nc(c.fe,c.Xa,c.mode,c.Oa);k.a=0})}};g.Ia=function(){var a=this.b;return"B"+a.c+"T"+a.b};g.request=function(a,b,c,d){function e(a,b){um(f);d&&d(a,b)}var f=new rm(a);a=c||$l;var h=this;Pm(this.b)&&Vm(this,b,a)?(b=this.b.a,this.a++,sm(f,b,this.Ia()+"R"+this.a),this.g.push(e)):h.Nc(function(){var a=h.b.a;h.a++;sm(f,a,h.Ia()+"R"+h.a)},b,a,e);return f};
g.Bc=function(a,b,c,d,e){d=d||$l;var f=this,h;if(Pm(f.b)&&Vm(this,c,d)){var k=f.b.a;f.a++;h=f.Ia()+"R"+f.a;W(f.logger,h+" BEGIN");b(k,h,function(b,c){f.i=k;c?(W(f.logger,h+" ERROR"),a.H(b)):(W(f.logger,h+" SUCCESS"),a.callback(b));f.i=null});W(f.logger,h+" END");b=null}else f.Nc(function(){var c=f.b.a;f.a++;h=f.Ia()+"R"+f.a;W(f.logger,h+" BEGIN");b(c,h,function(b,d){f.i=c;d?(W(f.logger,h+" ERROR"),a.H(b)):(W(f.logger,h+" SUCCESS"),a.callback(b));f.i=null});W(f.logger,h+" END");b=null},c,d,e)};
g.getName=function(){return this.I().getName()};g.toString=function(){return"Serial:"+this.Ia()+(this.i?"*":"")};function Zm(a,b){Um.call(this,a,b)}B(Zm,Um);Zm.prototype.logger=O("ydn.db.tr.AtomicSerial");Zm.prototype.request=function(a,b,c){var d,e,f,h=Zm.f.request.call(this,a,b,c,function(a,b){um(h);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Km;X(h,c,!0)}});wm(h,function(a,b,c){f=b;e=a;d=c});return h};
Zm.prototype.Bc=function(a,b,c,d,e){var f,h,k=new te;G(k,function(a){h=!1;f=a},function(a){h=!0;f=a});Zm.f.Bc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.H(c);else if(!0===h)a.H(f);else if(!1===h)a.callback(f);else{var d=new Km;a.H(d)}e&&(e(b,c),e=void 0)})};Zm.prototype.toString=function(){return"Atomic"+Zm.f.toString.call(this)};function $m(a,b,c){this.d=a;this.b=b;this.a=c;this.c=null}$m.prototype.logger=O("ydn.db.tr.DbOperator");$m.prototype.abort=function(){this.a.abort()};function an(a){a.c||(a.c=a.d.p());return a.c}$m.prototype.I=function(){return this.d};
function bn(a,b){var c=a.I(),d=b instanceof cn?b:dn(b),e=b.name,f=Z(c.b,e);if(0==en(d,f).length)Ge(!1);else if(f=f?"update":"add",c.b instanceof fn)gn(c.b,d),c.a?(c.a.close(),c.a=null,hn(c)):Ge(!1);else throw new jn("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}$m.prototype.toString=function(){return"TxStorage:"+this.I().getName()};function kn(a,b,c){$m.call(this,a,b,c)}B(kn,$m);g=kn.prototype;g.logger=O("ydn.db.crud.DbOperator");
g.count=function(a,b,c,d){var e,f,h,k;if(null!=a)if(u(a)){if(t(c)||t(b))throw new U("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!ln(this.b,f[l]))throw new U('store name "'+f[l]+'" at '+l+" not found.");W(this.logger,"countStores: "+dl(f));e=this.a.request("count",f);xm(e,function(){an(this).Xd(e,f)},this)}else if(v(a)){l=Z(this.b,a);if(!l)throw new U('store name "'+a+'" not found.');if(t(d)&&!ha(d))throw new U('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(v(b))if(h=
b,x(c)){var m=Cl(c);if(m)throw new U("invalid key range: "+cl(c)+" "+m);k=zl(c)}else{if(null!=c)throw new U("invalid key range: "+cl(c)+" of type "+typeof c);k=null}else if(x(b)||null==b)if(x(b)){if(m=Cl(b))throw new U("invalid key range: "+cl(b)+" "+m);k=zl(b)}else{if(null!=b)throw new U("key range must be  an object but found "+cl(b)+" of type "+typeof b);k=null}else throw new U('invalid second argument for count "'+cl(c)+'" of type '+typeof b);W(this.logger,"countKeyRange: "+a+" "+(h?h:"")+dl(k));
e=this.a.request("count",f);mn(l,e,arguments);xm(e,function(){an(this).dd(e,f[0],k,h,!!d)},this)}else throw new U("Invalid store name or store names.");else P(this.logger,"count method requires store name(s)"),l=nn(this.b),e=this.a.request("count",l),wm(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),xm(e,function(){an(this).Xd(e,f)},this);return e};
g.get=function(a,b){var c=this,d;if(a instanceof Lm){var e=a,f=e.U,h=Z(this.b,f);if(!h){if(this.b.a()){if(Ym(this.I()))return ym("get",void 0);d=new rm("get");on(this.I(),function(){G(c.get(a,b),function(a){d.callback(a)},function(a){d.H(a)})});return d}throw new U("Store: "+f+" not found.");}var k=e.r();W(this.logger,"getByKey: "+f+":"+k);d=this.a.request("get:key",[f]);mn(h,d,arguments,void 0,this);xm(d,function(){an(this).ie(d,f,k)},this)}else if(v(a)&&t(b)){var l=a,h=Z(this.b,l);if(!h){if(this.b.a()){if(Ym(this.I()))return ym("get",
void 0);d=new rm("get");on(this.I(),function(){G(c.get(a,b),function(a){d.callback(a)},function(a){d.H(a)})});return d}throw new U('Store name "'+l+'" not found.');}var m=b;W(this.logger,"getById: "+l+":"+m);d=this.a.request("get",[l]);mn(h,d,arguments,void 0,this);xm(d,function(){an(this).ie(d,l,m)},this)}else throw new U("get require valid input arguments.");return d};
g.keys=function(a,b,c,d,e,f,h){var k,l,m=null,n=!1,q=!1,r=a,s=Z(this.b,r);if(!v(r))throw new U("store name must be a string, but "+r+" of type "+typeof r+" is not.");if(!this.b.a()){if(!s)throw new U('store name "'+r+'" not found.');if(v(b)&&!fm(s,b))throw new U('index "'+b+'" not found in store "'+r+'".');}if(this.b.a()&&!s)return ym("keys",[]);var y;if(v(b)){var A=b,I=Cl(c);if(I)throw new U("invalid key range: "+c+" "+I);m=zl(c);if(w(d))k=d;else{if(t(d))throw new U("limit must be a number");k=100}if(w(e))l=
e;else{if(t(e))throw new U("offset must be a number");l=0}if(t(f))if(ha(f))n=f;else throw new U("reverse must be a boolean");if(t(h))if(ha(h))q=h;else throw new U("unique must be a boolean");W(this.logger,"keysByIndexKeyRange: "+r);y=this.a.request("keys:iter:index",[r]);mn(s,y,arguments);xm(y,function(){an(this).Kb(y,2,r,A,m,k,l,n,q)},this)}else{if(x(b)){if(I=Cl(b))throw new U("invalid key range: "+cl(b)+" "+I);m=zl(b)}else{if(null!=b)throw new U("invalid key range: "+cl(b)+" of type "+typeof b);
m=null}if(w(c))k=c;else{if(t(c))throw new U("limit must be a number");k=100}if(w(d))l=d;else{if(t(d))throw new U("offset must be a number");l=0}if(t(e))if(ha(e))n=e;else throw new U("reverse must be a boolean");W(this.logger,"keysByKeyRange: "+r);y=this.a.request("keys",[r]);mn(s,y,arguments);xm(y,function(){an(this).Kb(y,2,r,null,m,k,l,n,!1)},this)}return y};
g.Ra=function(a,b,c,d,e,f,h){var k=this,l;if(v(a)){var m=a,n=Z(this.b,m);if(!n){if(this.b.a()){if(Ym(this.I()))return ym("values",[]);l=new rm("values");on(this.I(),function(){G(k.Ra(a,b,c,d,e,f),function(a){l.callback(a)},function(a){l.H(a)})});return l}throw new Gm(m);}if(u(b)){if(t(c)||t(d))throw new U("too many input arguments");var q=b;W(this.logger,"listByIds: "+m+" "+q.length+" ids");l=this.a.request("values:array",[m]);mn(n,l,arguments,void 0,this);xm(l,function(){an(this).fg(l,m,q)},this)}else l=
v(b)?this.ak(m,b,c,d,e,f,h):this.bk(m,b,c,d,e)}else if(u(a))if(a[0]instanceof Lm){for(var n=[],r=a,s=0;s<r.length;s++){var y=r[s].U;if(!ln(this.b,y)){if(this.b.a())return n=[],n[r.length-1]=void 0,ym("get",n);throw new U("Store: "+y+" not found.");}hb(n,y)||n.push(y)}W(this.logger,"listByKeys: "+dl(n)+" "+r.length+" keys");l=this.a.request("values:keys",n);xm(l,function(){an(this).gg(l,r)},this)}else throw new U("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");
else throw new U("first argument "+a+" is invalid.");return l};
g.bk=function(a,b,c,d,e){var f=Z(this.b,a),h,k,l,m=null;if(x(b)){var n=Cl(b);if(n)throw new U("invalid key range: "+b+" "+n);m=zl(b)}else if(null!=b)throw new U('expect key range object, but found "'+cl(b)+'" of type '+typeof b);if(t(c))if(w(c))h=c;else throw new U("limit must be a number, but "+c+" is "+typeof c);else h=100;if(t(d))if(w(d))k=d;else throw new U("offset must be a number, but "+d+" is "+typeof d);else k=0;if(t(e))if(ha(e))l=e;else throw new U("reverse must be a boolean, but "+e+" is "+
typeof e);W(this.logger,(m?"listByKeyRange: ":"listByStore: ")+a);var q=this.a.request("values",[a]);mn(f,q,arguments);xm(q,function(){an(this).Kb(q,4,a,null,m,h,k,l,!1)},this);return q};
g.ak=function(a,b,c,d,e,f,h){var k=Z(this.b,a),l,m,n,q;if(!pn(k,b))throw new U('index "'+b+'" not found in store "'+a+'"');var r=Cl(c);if(r)throw new U("invalid key range: "+c+" "+r);var s=zl(c);if(t(d))if(w(d))l=d;else throw new U("limit must be a number.");else l=100;if(t(e))if(w(e))m=e;else throw new U("offset must be a number.");else m=0;if(ha(f))n=f;else if(t(f))throw new U("reverse must be a boolean, but "+f);if(t(h))if(ha(h))q=h;else throw new U("unique must be a boolean");W(this.logger,"listByIndexKeyRange: "+
a+":"+b);var y=this.a.request("values:iter:index",[a]);mn(k,y,arguments);xm(y,function(){an(this).Kb(y,4,a,b,s,l,m,n,q)},this);return y};
g.add=function(a,b,c){var d=v(a)?a:x(a)?a.name:void 0;if(!v(d))throw new U("store name "+d+" must be a string, but "+typeof d);var e=Z(this.b,d);if(!e){if(!this.b.a())throw new U('store name "'+d+'" not found.');e=dn(x(a)?a:{name:d});W(this.logger,"Adding object store: "+d);bn(this,e)}else if(this.b.a()&&x(a)&&(a=dn(a),a=en(e,a)))throw new Rl(a);var f;if(!e)throw new U('store name "'+d+'" not found.');if(v(e.keyPath)&&t(c))throw new U("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.autoIncrement&&!t(c))throw new U("out-of-line key must be provided.");if(u(b)){W(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)qn(e,b[a]);f=this.a.request("add:array",[d],am);xm(f,function(){an(this).Db(f,!1,!1,d,b,c)},this);e.dc&&F(f,function(a){a=new rn(sn,this.I(),e.getName(),a,b);this.I().Sa(a)},this)}else if(x(b))a="store: "+d+" key: "+tn(e,b,c),W(this.logger,"addObject: "+a),qn(e,b),f=this.a.request("add",[d],am),xm(f,function(){an(this).Db(f,
!1,!0,d,[b],[c])},this),e.dc&&F(f,function(a){a=new un(sn,this.I(),e.getName(),a,b);this.I().Sa(a)},this);else throw new U("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function vn(a,b){var c=v(b)?b:x(b)?b.name:void 0;if(!v(c))throw new U("store name must be a string");var d=Z(a.b,c);if(!d){if(!a.b.a())throw new Gm(c);d=dn(x(b)?b:{name:c});W(a.logger,"Adding object store: "+c);bn(a,d)}else if(a.b.a()&&x(b)){var e=dn(b);if(e=en(d,e))throw new Rl(e);}if(!d)throw new Gm(c);return d}g.load=function(a,b,c){var d=c||",",e=vn(this,a).getName();a=this.a.request("load",[e]);var f=this;this.a.Bc(a,function(a,c,l){an(f).qg(a,c,l,e,b,d)},[e],am);return a};
g.search=function(a){var b=a.a();V(this.logger,"query "+a);a=this.a.request("search",b,$l);xm(a,function(){an(this)},this);return a};
g.put=function(a,b,c){var d,e=this;if(a instanceof Lm){var f=a,h=f.U,k=Z(this.b,h);if(!k)throw new U('store "'+h+'" not found.');if(k.keyPath){var l=tn(k,b);if(null!=l){if(0!=Fl(l,f.r()))throw new U("Inline key must be "+f+" but "+l+" found.");}else wn(k,b,f.r());return this.put(h,b)}return this.put(h,b,f.r())}if(u(a)){if(t(c))throw new U("too many arguments");var m=a;if(!t(b))throw new U("record values required");for(var n=b,f=[],h=0,k=m.length;h<k;h++){l=m[h].U;-1==Ya(f,l)&&f.push(l);var q=Z(this.b,
l);if(!q)throw new U('store "'+l+'" not found.');q.keyPath&&wn(q,n[h],m[h].r())}W(this.logger,"putByKeys: to "+dl(f)+" "+n.length+" objects");for(h=0;h<n.length;h++)qn(q,n[h]);d=this.a.request("put:keys",f,am);mn(q,d,arguments);xm(d,function(){an(e).pg(d,n,m)},this)}else if(v(a)||x(a)){var q=vn(this,a),r=q.getName();if(q.keyPath&&t(c))throw new U("key must not be provided while the store uses in-line key.");if(!q.keyPath&&!q.autoIncrement&&!t(c))throw new U("out-of-line key must be provided.");if(u(b)){var s=
b,y=c;W(this.logger,"putObjects: "+r+" "+s.length+" objects");for(h=0;h<s.length;h++)qn(q,s[h]);d=this.a.request("put:array",[r],am);mn(q,d,arguments);xm(d,function(){an(this).Db(d,!0,!1,r,s,y)},this);q.dc&&F(d,function(a){a=new rn(xn,this.I(),r,a,s);this.I().Sa(a)},this)}else if(x(b)){var A=b,I=c;W(this.logger,"putObject: "+r+" "+(t(I)?I:"(without-key)"));if(t(p.Blob)&&A instanceof Blob&&q.Ac&&!q.keyPath&&0==q.indexes.length&&Pb)d=new rm("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,
c=e.a.request("put",[r],am);mn(q,c,[r,A,I]);xm(c,function(){an(e).Db(c,!0,!0,r,[b],[I])},this);G(c,function(a){d.callback(a)},function(a){d.H(a)})},f.onerror=function(a){d.H(a)},f.onabort=function(a){d.H(a)},f.readAsDataURL(A);else{qn(q,A);d=this.a.request("put",[r],am);var M=[r,A,I];mn(q,d,M);xm(d,function(){var a=t(I)?[M[2]]:void 0;an(e).Db(d,!0,!0,r,[M[1]],a)},this)}q.dc&&F(d,function(a){a=new un(xn,this.I(),r,a,A);this.I().Sa(a)},this)}else throw new U("put record value must be Object or array of Objects");
}else throw new U("the first argument of put must be store name, store schema or array of keys.");return d};
g.clear=function(a,b,c){if(t(c))throw new U("too many input arguments");var d;if(v(a)){c=Z(this.b,a);if(!c)throw new U('store name "'+a+'" not found.');if(x(b)){var e=zl(b);if(null===e)throw new U("clear method requires a valid non-null KeyRange object.");W(this.logger,"clearByKeyRange: "+a+":"+dl(e));d=this.a.request("clear",[a],am);mn(c,d,[a,e]);xm(d,function(){an(this).tf(d,a,e)},this)}else{if(t(b))throw new U("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);W(this.logger,"clearByStore: "+a);d=this.a.request("clear",[a],am);xm(d,function(){an(this).Ud(d,[a])},this)}}else if(!t(a)||u(a)&&v(a[0])){var f=a||nn(this.b);W(this.logger,"clearByStores: "+dl(f));d=this.a.request("clear",f,am);xm(d,function(){an(this).Ud(d,f)},this)}else throw new U('first argument "'+a+'" is invalid.');return d};
g.remove=function(a,b,c){var d;if(v(a)){var e=Z(this.b,a);if(!e)throw new U('store name "'+a+'" not found.');if(t(c))if(v(b)){var f=fm(e,b);if(!f)throw new U("index: "+b+" not found in "+a);if(x(c)||null===c){var h=zl(c);W(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.request("rm:iter:index",[a],am);xm(d,function(){an(this).rg(d,a,f.getName(),h)},this)}else throw new U("key range "+c+' is invalid type "'+typeof c+'".');}else throw new U('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(v(b)||w(b)||ga(b)||b instanceof Date){W(this.logger,"removeById: "+a+":"+b);d=this.a.request("rm",[a],am);var k=[a,b];mn(e,d,k);xm(d,function(){an(this).Je(d,a,k[1])},this);e.dc&&F(d,function(c){c=1==c?b:void 0;c=new un(yn,this.I(),a,c,void 0);this.I().Sa(c)},this)}else if(x(b))h=zl(b),W(this.logger,"removeByKeyRange: "+a+":"+dl(h)),d=this.a.request("rm:iter",[a],am),mn(e,d,[a,h]),xm(d,function(){an(this).Ke(d,a,h)},this),e.dc&&F(d,function(b){var c=[];c.length=b;b=new rn(yn,
this.I(),a,c,void 0);this.I().Sa(b)},this);else throw new U('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof Lm){var l=a.U,e=Z(this.b,l);d=this.a.request("rm",[l],am);var m=[l,a.r()];mn(e,d,m);xm(d,function(){an(this).Je(d,l,m[1])},this)}else if(u(a)){c=[];for(var e=0,n=a.length;e<n;e++){if(!(a[e]instanceof Lm))throw new U("key list element at "+e+" of "+n+' must be yn.db.Key, but "'+cl(a[e])+'" ('+fa(a[e])+") is not ydn.db.Key.");var q=a[e].U;-1==Ya(c,q)&&c.push(q)}if(1>
c.length)throw new U('at least one valid key required in key list "'+cl(a)+'"');d=this.a.request("rm:keys",c,am);xm(d,function(){an(this).sg(d,a)},this)}else throw new U('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+cl(a)+'" ('+fa(a)+") found.");return d};g.toString=function(){return"DbOperator:"+this.I().getName()};function zn(a,b,c){$m.call(this,a,b,c)}B(zn,kn);g=zn.prototype;g.logger=O("ydn.db.core.DbOperator");g.get=function(a,b){if(a instanceof lm){var c=a.a,d=Z(this.b,c);if(!d)throw new U('store "'+c+'" not found.');var e=a.c;if(t(e)&&!pn(d,e))throw new U('index "'+e+'" not found in store "'+c+'".');W(this.logger,"getByIterator:"+a);var f=this.a.request("get:iter",[c]);xm(f,function(){An(this,5,f,a,1)},this);return f}return zn.f.get.call(this,a,b)};
g.keys=function(a,b,c,d,e,f,h){if(a instanceof lm){var k=100;if(w(b)){if(k=b,1>k)throw new U("limit must be a positive value, but "+b);}else if(t(b))throw new U("limit must be a number,  but "+b);if(t(c))throw new U("offset must not be specified");W(this.logger,"keysByIterator:"+a);var l=this.a.request("keys:iter",[a.a]);xm(l,function(){a.o?An(this,1,l,a,k):An(this,2,l,a,k)},this);return l}return zn.f.keys.call(this,a,b,c,d,e,f,h)};
g.count=function(a,b,c,d){if(a instanceof lm){if(t(b)||t(c))throw new U("too many arguments.");W(this.logger,"countIterator:"+a);var e=this.a.request("count",[a.a]);xm(e,function(){An(this,6,e,a)},this);return e}return zn.f.count.call(this,a,b,c,d)};
g.Ra=function(a,b,c,d,e,f){if(a instanceof lm){var h;if(w(b)){if(h=b,1>h)throw new U("limit must be a positive value, but "+h);}else if(t(b))throw new U("limit must be a number, but "+b);if(t(c))throw new U("offset must not be specified");W(this.logger,"listByIterator:"+a);var k=this.a.request("values:iter",[a.a]);xm(k,function(){a.b?An(this,2,k,a,h):An(this,4,k,a,h)},this);return k}return zn.f.Ra.call(this,a,b,c,d,e,f)};
g.open=function(a,b,c,d){if(!(b instanceof lm))throw new U("Second argument must be cursor range iterator.");for(var e=b.stores(),f=0;f<e.length;f++)if(!Z(this.b,e[f]))throw new U('Store "'+e[f]+'" not found.');c=c||$l;var h=this,k=this.a.request("open",b.stores(),c);W(this.logger,"open:"+c+" "+b);xm(k,function(c){var e=Y(k);W(h.logger,e+" iterating "+b);for(var f=b.stores(),q=[],r=0;r<f.length;r++)q[r]=an(h).b(c,e,f[r]);var s=b.load(q);s.M=function(a){X(k,a,!0)};s.v=function(b){null!=b?(b=a.call(d,
s),!0===b?s.restart():x(b)?!0===b.restart?s.restart(b["continue"],b.continuePrimary):null!=b["continue"]?s.Dc(b["continue"]):null!=b.continuePrimary?s.Wd(b.continuePrimary):(jm(s),X(k,void 0)):null===b?(jm(s),X(k,void 0)):null!=b?s.Dc(b):s.advance(1)):(jm(s),X(k,void 0))}},this);return k};
g.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new U('Store "'+e+'" not found.');e=this.a.request("map",d);V(this.logger,"map:"+a);this.a.Bc(e,function(d,e,f){V(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],q=0;q<m.length;q++)n[q]=an(c).b(d,e,m[q]);var r=a.load(n);r.M=function(a){f(a,!1)};r.v=function(c){if(null!=c){var d;a.o?a.b?d=c:d=r.pb():a.b?d=c:d=r.R();b(d);r.advance(1)}else f(void 0),b=null}},d,$l);return e};
function An(a,b,c,d,e){var f=[],h=c.a,k=Y(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);W(a.logger,l);for(var m=an(a),n=[],q=d.stores(),r=0;r<q.length;r++)n[r]=m.b(h,k,q[r]);var s=d.load(n);s.M=function(a){jm(s);X(c,a,!0)};var y=0,A=!1;s.v=function(d){A||(V(a.logger,l+" starting"),A=!0);null!=d?(s.pb(),y++,1==b?f.push(d):2==b?f.push(s.pb()):3==b?f.push([d,s.pb()]):6!=b&&f.push(s.R()),5==b?(jm(s),X(c,f[0])):6==b||!t(e)||y<e?s.Dc():(W(a.logger,"success:"+l+" yields "+f.length+" records"),jm(s),
X(c,f))):(W(a.logger,"success:"+l+" yields "+f.length+" records"),jm(s),X(c,5==b?f[0]:6==b?y:f))}};var sn="created",yn="deleted",xn="updated";function Bn(a,b){H.call(this,a,b)}B(Bn,H);function Cn(a,b,c){H.call(this,a,b);this.version=c}B(Cn,Bn);Cn.prototype.name="ReadyEvent";Cn.prototype.version=NaN;function Dn(a,b,c){H.call(this,c||"error",a);this.error=b}B(Dn,Bn);Dn.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};Dn.prototype.name="ErrorEvent";Dn.prototype.error=null;Dn.prototype.getError=function(){return this.error};function En(a,b){Dn.call(this,a,b,"fail")}
B(En,Dn);En.prototype.name="FailEvent";function un(a,b,c,d,e){H.call(this,a,b);this.U=c;this.key=d;this.value=e}B(un,Bn);un.prototype.name="RecordEvent";un.prototype.R=function(){return this.value};function rn(a,b,c,d,e){H.call(this,a,b);this.U=c;this.keys=d;this.Ra=e}B(rn,Bn);rn.prototype.name="StoreEvent";rn.prototype.ya=function(){return this.keys};rn.prototype.ua=function(){return this.Ra};function Fn(a,b,c,d,e,f){t(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!v(a)&&!ga(a))throw new U("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.i=ga(this.keyPath);this.b=e;this.type=Gn(b);if(t(b)){if(!t(this.type))throw new U("type invalid in index: "+this.b);if(u(this.keyPath))throw new U('composite key for store "'+this.b+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.h=
v(this.type)?this.type:Hn;this.d=v(e)?e:u(a)?this.keyPath.join(","):a;this.c=Oa(this.d);this.a=this.i?null:this.keyPath.split(".");this.g=f||null}function In(a,b){if(null!=b){if(ga(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=Hl(b,a.keyPath[d]);c[d]=f}return c}return Hl(b,a.keyPath)}}function Jn(a,b,c){for(var d=0;d<a.a.length;d++)d==a.a.length-1?b[a.a[d]]=c:x(b[a.a[d]])||(b[a.a[d]]={})}var Hn="TEXT";
function Gl(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:Jl(a)}function Kn(a,b){return"DATE"==b?new Date(a):t(b)?a:Ml(a)}var Ln=["BLOB","DATE","INTEGER","NUMERIC",Hn];function Gn(a){if(v(a))return a=Ya(Ln,a),Ln[a]}g=Fn.prototype;g.getName=function(){return this.b};g.toJSON=function(){return{name:this.b,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
g.clone=function(){var a=u(this.keyPath)?lb(this.keyPath):this.keyPath;return new Fn(a,this.type,this.unique,this.multiEntry,this.b,this.g)};function em(a,b){return null!=a||null!=b?null!=a?null!=b?ga(a)&&ga(b)?rb(a,b)?null:"expect: "+a+", but: "+b:Mn(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
g.hint=function(a){if(!a)return this;var b=u(this.keyPath)?lb(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new Fn(b,c,this.unique,this.multiEntry,a.b)};g.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.a&&1<this.a.length&&(a+="Compound");return a+"Index:"+this.b};function cn(a,b,c,d,e,f,h,k){if(!v(a))throw new U("store name must be a string");this.a=a;this.keyPath=t(b)?b:null;this.i=ga(this.keyPath);if(null!==this.keyPath&&!v(this.keyPath)&&!this.i)throw new U("keyPath must be a string or array");if(null!=c&&!ha(c))throw new U('invalid autoIncrement value in store "'+a+'"');this.autoIncrement=!!c;var l;if(null!=d){l=Gn(d);if(!t(l))throw new U('type "'+d+'" for primary key in store "'+this.a+'" is invalid.');if(this.i)throw new U('composite key for store "'+
this.a+'" must not specified type');}this.type=null!=l?l:this.autoIncrement?"INTEGER":void 0;this.g=v(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.dc=!!f;this.Ac=!!h;this.k=v(this.type)?this.type:Hn;this.c=u(this.keyPath)?this.keyPath.join(","):v(this.keyPath)?this.keyPath:"_ROWID_";this.b=Oa(this.c);if(this.o=!!k){if(this.keyPath)throw new U('encrypted store "'+this.a+'" must not use inline key');if(this.autoIncrement)throw new U('encrypted store "'+this.a+'" must not use key generator');
}this.h=[]}g=cn.prototype;g.dc=!1;g.Ac=!1;g.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.a,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function dn(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ya(b,c))throw new U('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),h=void 0;for(h in e)if(e.hasOwnProperty(h)&&-1==Ya(f,h))throw new U("Unknown field: "+h+" in "+dl(e));e=new Fn(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
t(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new cn(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function Nn(a,b,c,d,e,f,h){a=On(a,b,c,d,e,f,h);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Fc;a.Z&&(b+=" WHERE "+a.Z);a.group&&(b+=" GROUP BY "+a.group);a.Ub&&(b+=" ORDER BY "+a.Ub);return b}
function On(a,b,c,d,e,f,h){var k={select:"",Fc:"",Z:"",group:"",Ub:""},l=a.c,m=a.b,n=null;d!==l&&v(d)&&(n=fm(a,d));var q=!!n,r=d||l,s=Oa(r),y=q?n.type:a.type,A=q&&n.multiEntry;k.Fc=Pn(a);6===c?k.select="COUNT("+m+")":3===c||1===c||2===c?(k.select=m,null!=d&&d!=l&&(k.select+=", "+s)):k.select="*";d=h?"DISTINCT ":"";l=[];A?(A=Oa("ydn.db.me:"+a.getName()+":"+n.getName()),k.select=6===c?"COUNT("+d+A+"."+s+")":3===c||1===c||2===c?"DISTINCT "+Pn(a)+"."+m+", "+A+"."+s+" AS "+r:"DISTINCT "+Pn(a)+".*, "+A+
"."+s+" AS "+r,k.Fc=A+" INNER JOIN "+Pn(a)+" USING ("+m+")",null!=e&&(El(A+"."+s,y,e,l,b),0<l.length&&(k.Z=k.Z?k.Z+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(El(s,y,e,l,b),0<l.length&&(k.Z=k.Z?k.Z+(" AND "+l.join(" AND ")):l.join(" AND ")));q&&!n.unique&&h&&(k.group=s);a=f?"DESC":"ASC";k.Ub=s+" "+a;q&&(k.Ub+=", "+m+" "+a);return k}
function Qn(a,b,c,d,e,f,h,k,l){var m,n,q,r;null!=e?(m=e.lower,n=e.upper,q=e.lowerOpen,r=e.upperOpen,f?null!=n?(e=Fl(k,n),-1==e?(n=k,r=l):0==e&&(r=l||r)):(n=k,r=l):null!=m?(e=Fl(k,m),1==e?(m=k,q=l):0==e&&(q=l||q)):(m=k,q=l)):f?(n=k,r=l):(m=k,q=l);e=new wl(m,n,!!q,!!r);d=d?fm(a,d):null;b=On(a,c,b,d?d.d:a.c,e,f,h);b="SELECT "+b.select+" FROM "+b.Fc+(b.Z?" WHERE "+b.Z:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.Ub;d&&(b+=", "+a.b+(f?"DESC":"ASC"));return b}
function Rn(a,b,c,d,e,f,h,k,l,m){var n=fm(a,d),q=n.d;d=n.c;var r=a.b,s=l?" <":" >",s=h?s+" ":s+"= ";h=Gl(f,n.type);k=Gl(k,a.type);n="";e?(a=On(a,c,b,q,e,l,m),a.Z+=" AND ",n=d+s+"?",c.push(h)):(e=l?wl.upperBound(f,!0):wl.lowerBound(f,!0),a=On(a,c,b,q,e,l,m),n=a.Z,a.Z="");a.Z+="("+n+" OR ("+d+" = ? AND "+r+s+"?))";c.push(h);c.push(k);return"SELECT "+a.select+" FROM "+a.Fc+" WHERE "+a.Z+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.Ub}g.clone=function(){return dn(this.toJSON())};
g.index=function(a){return this.indexes[a]||null};function fm(a,b){return fb(a.indexes,function(a){return a.getName()==b})}function pn(a,b){return b===a.keyPath?!0:bb(a.indexes,function(a){return a.getName()==b})}function Pn(a){return Oa(a.a)}g.Fa=function(){if(this.d&&this.d.length!=this.indexes.length){this.d=[];for(var a=0;a<this.indexes.length;a++)this.d.push(this.indexes[a].getName())}return this.d};
function Sn(a,b){if(!b)return a;var c=a.autoIncrement,d=u(a.keyPath)?lb(a.keyPath):a.keyPath,e=a.type,f=ab(a.indexes,function(a){return a.clone()});t(b.type)||"TEXT"!=e||(e=void 0);u(b.keyPath)&&v(d)&&d==b.keyPath.join(",")&&(d=lb(b.keyPath));for(var h=0,k=b.indexes.length;h<k;h++)if(b.indexes[h].i)for(var l=b.indexes[h].getName(),m=f.length-1;0<=m;m--)if(0<=l.indexOf(f[m].getName())){f[m]=b.indexes[h].clone();break}for(h=0;h<f.length;h++)(k=fm(b,f[h].getName()))&&(f[h]=f[h].hint(k));return new cn(b.a,
d,c,e,f)}g.getName=function(){return this.a};function Tn(a){return!!a.keyPath}function tn(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.i){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(Hl(b,a.keyPath[d]));return c}if(a.keyPath)return Ab(b,a.g)}}function wn(a,b,c){for(var d=0;d<a.g.length;d++){var e=a.g[d];if(d==a.g.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Un(a,b,c){var d=[],e=[];c=t(c)?c:tn(a,b);t(c)&&(e.push(a.b),d.push(Gl(c,a.type)));for(var f=0;f<a.indexes.length;f++){var h=a.indexes[f];if(!h.multiEntry&&h.getName()!==a.keyPath&&"_default_"!=h.getName()){var k=In(h,b);null!=k&&(d.push(Gl(k,h.type)),e.push(h.c))}}a.Ac?a.Ac&&!a.keyPath&&0==a.indexes.length&&(v(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(dl(b)),e.push("_default_")):(d.push(dl(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Wg:e,Ph:a,Ra:d,key:c}}
function en(a,b){if(!b)return"missing store: "+a.a;if(a.a!=b.a)return"store name, expect: "+a.a+", but: "+b.a;var c=em(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.autoIncrement)&&t(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(t(a.type)&&t(b.type)&&(ga(a.type)?!rb(a.type,b.type):a.type!=b.type))return"data type, expect:  "+
a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=fm(b,a.indexes[c].getName()),e;e=a.indexes[c];if(d)if(e.b!=d.b)e="name, expect: "+e.b+", but: "+d.b;else{var f=em(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&t(d.type)&&(ga(e.type)?!rb(e.type,d.type):e.type!=d.type)?
"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.b;if(0<e.length)return'index "'+a.indexes[c].getName()+'" '+e}return""}function qn(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.g){var f=d.g(e),h=typeof f;if("string"==h||"number"==h||f instanceof Date||u(f)){for(h=0;h<d.a.length-1;h++)x(e[d.a[h]])||(e[d.a[h]]={});e[d.a[d.a.length-1]]=f}}}}function mn(a,b,c,d,e){for(var f=0;f<a.h.length;f++)d!==f&&a.h[f].call(e,b,c)}
g.toString=function(){return"Store:"+this.a+"["+this.indexes.length+"index]"};function Vn(a,b){if(!a||wa(a))throw new U("store_name must be provided for primary full text index");if(!b||wa(b))throw new U("index_name must be provided for primary full text index");this.U=a};function Wn(a,b,c){this.name=a;this.indexes=b;this.a=c||"";if(-1==["","en","fr"].indexOf(this.a))throw new U('Unsupported lang "'+c+" for full text search index "+a);}Wn.prototype.getName=function(){return this.name};Wn.prototype.count=function(){return this.indexes.length};Wn.prototype.index=function(a){return this.indexes[a]};
function Xn(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ya(b,c))throw new U("Unknown field: "+c+" in "+dl(a));if(!u(a.sources))throw new U("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ya(b,c))throw new U("Unknown field: "+c+" in "+cl(a));return new Vn(a.storeName,a.keyPath)});return new Wn(a.name,
b,a.lang)};function Yn(a,b){var c,d,e=b;if(x(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ya(c,f))throw new U("Unknown field: "+f+" in schema.");c=d.version;var e=[],h=d.stores||[];if(!u(h))throw new U("stores must be array");for(f=0;f<h.length;f++){var k=dn(h[f]);if(-1!=gb(e,function(a){return a.name==k.getName()}))throw new U('duplicate store name "'+k.getName()+'".');e.push(k)}}else v(a)?c=0==a.length?void 0:parseFloat(a):w(a)&&(c=a);if(t(c)){if(!w(c)||0>c)throw new U("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!u(b)||0<b.length&&!(b[0]instanceof cn)))throw new U("stores");this.version=c;this.b=!t(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Xn(d.fullTextCatalogs[f]),c[f]=e,Z(this,e.getName())||(h=[new Fn("k",Hn),new Fn("v",Hn)],e=new cn(e.getName(),"id",!1,void 0,h,!1,!1,!1),this.stores.push(e));this.c=c}
Yn.prototype.toJSON=function(){var a=ab(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};Yn.prototype.b=!1;Yn.prototype.a=function(){return!1};function nn(a){return ab(a.stores,function(a){return a.getName()})}Yn.prototype.count=function(){return this.stores.length};function Z(a,b){return fb(a.stores,function(a){return a.getName()==b})}function ln(a,b){return bb(a.stores,function(a){return a.getName()==b})}
function Zn(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=Z(b,a.stores[e].getName());if(f){c&&(f=Sn(f,a.stores[e]));if(d)for(var h=f,k=a.stores[e],l=0;l<k.indexes.length;l++){var m=k.indexes[l];pn(h,m.getName())||"BLOB"!=m.type||(m=new Fn(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),h.indexes.push(m))}f=en(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""};function fn(a,b){Yn.call(this,a,b)}B(fn,Yn);fn.prototype.a=function(){return!0};function gn(a,b){a.stores.push(b)};function Am(a){Error.captureStackTrace?Error.captureStackTrace(this,Am):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}B(Am,Error);function $n(a){Error.captureStackTrace?Error.captureStackTrace(this,$n):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}B(Am,Error);$n.prototype.name="ydn.error.NotSupportedException";
function bo(a){Error.captureStackTrace?Error.captureStackTrace(this,bo):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}B(bo,Error);function co(a){Error.captureStackTrace?Error.captureStackTrace(this,co):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}B(co,Error);co.prototype.name="ydn.InternalError";
function jn(a){Error.captureStackTrace?Error.captureStackTrace(this,jn):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}B(jn,Error);jn.prototype.name="ydn.error.ConstraintError";B(Am,Error);function eo(a){Error.captureStackTrace?Error.captureStackTrace(this,eo):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}B(eo,Error);function fo(a){return bl(dl(a))}function Mn(a,b){var c;c=c||{};if(null!=a&&null!=b){if(ga(a)&&ga(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==fb(b,function(b){return Mn(b,a[d])}))return!1;return!0}if(ga(a))return 1==a.length&&Mn(a[0],b);if(ga(b))return 1==b.length&&Mn(b[0],a);if(x(a)&&x(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Mn(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Mn(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function go(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function ho(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ya(d,e))throw new U('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new U("mechanisms attribute must be an array but "+fa(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!hb(jo,c.mechanisms[e]))throw new U('Invalid mechanism "'+c.mechanisms[e]+'"');}this.v=c.mechanisms||jo;this.k=c.size;this.w=
t(c.connectionTimeout)?c.connectionTimeout:3E3;this.a=null;this.d=[];this.we=!1;var f;if(b instanceof Yn)f=b;else if(x(b))for(c.autoSchema||!t(b.stores)?f=new fn(b):f=new Yn(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=Z(f,b.stores[e].name),b.stores[e].Sync&&P(this.logger,"Synchronization option for "+d.getName()+" ignored.");else f=new fn;this.b=f;for(e=0;e<this.b.count();e++)if((this.b.stores[e]||null).o)throw Error("encryption option must be defined");if(t(a)){if(this.a)throw new Tl("Already connected with "+
this.o);this.o=a;hn(this)}this.h=null;this.i=new te}ho.prototype.logger=O("ydn.db.con.Storage");function ko(a){var b;if(t(b)){var c=function(a){b(a.toJSON());b=void 0};a.a?a.a.$a(c):a.transaction(function(b){a.a.$a(c,b)},null,$l)}return a.b?a.b.toJSON():null}ho.prototype.getName=function(){return this.o};var jo="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");g=ho.prototype;g.xf=function(){return null};
function hn(a){function b(b,e){b?(V(a.logger,a+": ready."),a.zh=NaN,d.Ed=function(b){a.Sa(new Dn(a,b))},d.Ye=function(b){a.Sa(new En(a,b));a.a=null},d.Fe=function(b){a.Sa(b)},setTimeout(function(){lo(a,e);mo(a)},10),c.callback(e)):(P(a.logger,a+": database connection fail "+e.name),setTimeout(function(){lo(a,new En(a,e));if(a.d){var b=a.logger;for(b&&lg(b,"Purging "+a.d.length+" transactions request.",void 0);b=a.d.shift();)b.Oa&&b.Oa("error",e)}},10),c.H(e))}for(var c=new te,d=null,e=a.v,f=0;f<e.length;f++){var h=
e[f].toLowerCase();if(d=a.xf(h)){d=a.xf(h);break}}null===d?(e=new jn("No storage mechanism found."),b(!1,new En(a,e))):(a.init(),G(d.connect(a.o,a.b),function(){this.a=d;b(!0,new Cn("ready",this,parseFloat(d.We())))},function(a){P(this.logger,this+": opening fail");b(!1,a)},a))}function Sm(a){if(a.a)return a.a.Vc()}function on(a,b,c){Be(a.i,b,c)}function lo(a,b){setTimeout(function(){a.b.b&&a.i.b||(b instanceof Dn?a.i.H(b.error):a.i.callback(),a.Sa(b))},4)}function Ym(a){return!!a.a&&a.a.Xe()}
g.init=function(){};g.close=function(){this.a&&(this.a.close(),this.a=null,V(this.logger,this+" closed"))};g.zh=NaN;function mo(a){var b=a.d.shift();b&&(V(a.logger,"pop tx queue["+(a.d.length+1)+"]"),a.transaction(b.fe,b.scopes,b.mode,b.Oa));a.zh=qa()}
function no(a,b,c,d,e){V(a.logger,"push tx queue["+a.d.length+"]");a.d.push({fe:b,scopes:c,mode:d,Oa:e});100<a.d.length&&0==a.d.length%100&&P(a.logger,"Transaction queue stack size is "+a.d.length+". It is too large, possibility due to incorrect usage.")}g.we=!1;
g.transaction=function(a,b,c,d){var e=b;if(v(b))e=[b];else if(null!=b)if(ga(b)){if(0==b.length)throw new U("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!v(b[f]))throw new U("store name at "+f+" must be string but found "+typeof b[f]);}else throw new U("store names must be an array");else e=null;if(this.a&&this.a.Xe()&&!this.we){var h=this,k=t(c)?c:$l;k==bm&&(this.we=!0);this.a.ae(function(b){a(b);a=null},e,k,function(a,b){ja(d)&&(d(a,b),d=void 0);k==bm&&(h.we=!1);mo(h)})}else no(this,
a,e,c,d)};g.Sa=function(){};g.toString=function(){return"Storage:"+this.a};function oo(a,b,c,d){this.d=a;this.g=b;this.a=lb(c);this.b=d;this.c=[]}oo.prototype.d=null;oo.prototype.onCompleted=function(a,b){for(var c=0;c<this.c.length;c++)this.c[c](a,b);this.c.length=0;this.c=this.a=this.d=null};function po(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new Ul("tx committed on ParallelTxExecutor");}oo.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.g+" mode:"+this.b+" scopes:"+dl(this.a)};function qo(a,b,c,d,e,f){Qm.call(this,a,b,c,d,e,f);this.c=this.b=null}B(qo,Qm);g=qo.prototype;g.logger=O("ydn.db.tr.Parallel");g.abort=function(){W(this.logger,this+": aborting");Tm(this.c)};
g.di=function(a,b){var c;if("multi"==this.d)a:if(c=this.b,!c.a||!c.b||b!=c.b&&(c.b!=am||b!=$l)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.d)a:if(c=this.b,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.d?!0:!1;return c};
g.Nc=function(a,b,c,d){function e(c){l.h++;m=new oo(c,l.h,b,k);h=l.Ia();rg(l.logger,h+" BEGIN "+dl(b)+" "+k);l.b=m;po(l.b,a,d)}function f(a,b){rg(l.logger,h+" "+a);if(m)m.onCompleted(a,b);l.a=0}var h;this.v&&(b=this.v);this.P&&(c=this.P);var k=t(c)?c:$l,l=this,m;if(this.b&&this.b.d&&this.di(b,k))po(this.b,a,d);else{if(this.o&&this.h>=this.o)throw new Tl("Exceed maximum number of transactions of "+this.o);this.I().transaction(e,b,k,f)}};
g.request=function(a,b,c,d){var e=new rm(a),f=this;this.Nc(function(a){f.a++;sm(e,a,f.Ia()+"R"+f.a)},b,c||$l,function(a,b){um(e);d&&d(a,b)});return e};g.Bc=function(a,b,c,d,e){var f=this,h;this.Nc(function(c){f.a++;h=f.Ia()+"R"+f.a;W(f.logger,h+" BEGIN");b(c,h,function(b,d){f.c=c;h=f.Ia()+"R"+f.a;d?(W(f.logger,h+" ERROR"),a.H(b)):(W(f.logger,h+" SUCCESS"),a.callback(b));f.c=null});b=null;W(f.logger,h+" END")},c,d,e)};g.toString=function(){return"Parallel:"+this.d+":"+this.Ia()+(this.c?"*":"")};function ro(a,b){qo.call(this,a,b,Rm)}B(ro,qo);g=ro.prototype;g.logger=O("ydn.db.tr.AtomicParallel");g.di=function(){return!1};g.request=function(a,b,c){var d,e,f,h=this,k=ro.f.request.call(this,a,b,c,function(a,b){um(k);W(h.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Km;X(k,c,!0)}});wm(k,function(a,b,c){f=b;e=a;d=c});return k};
g.Bc=function(a,b,c,d,e){var f,h,k=new te;G(k,function(a){h=!1;f=a},function(a){h=!0;f=a});ro.f.Bc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.H(c);else if(!0===h)a.H(f);else if(!1===h)a.callback(f);else{var d=new Km;a.H(d)}e&&(e(b,c),e=void 0)})};g.toString=function(){return"Atomic"+ro.f.toString.call(this)};function so(a,b,c){ho.call(this,a,b,c);this.g=0;a=!0;b=Rm;c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=to(this,b,a);this.P=to(this,"atomic",!1);this.c=this.sd(c,this.P)}B(so,ho);so.prototype.g=0;so.prototype.sd=function(a){return new $m(this,this.b,a)};
function to(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==Rm)return new Um(a,a.g++,b,d,e,f);if("atomic"==b)return new Zm(a,a.g++);throw new U('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==Rm)return new qo(a,a.g++,b,d,e,f);if("atomic"==b)return new ro(a,a.g++);throw new U('Invalid requestType "'+b+'"');};function uo(a,b,c){so.call(this,a,b,c);a=this.b;for(b=0;b<a.c.length;b++){c=a.c[b];var d=Z(a,c.getName());if(d){if(!pn(d,"k"))throw new U('full text index store "'+d.getName()+'" must have "keyword" index');if(!pn(d,"v"))throw new U('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new U('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new U('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=Z(a,e.U);if(f)P(this.logger,"Full text indexer option for "+f.getName()+" ignored.");else throw new U('full text source store "'+e.U+'" does not exist for full text index "'+c.getName()+'"');}}}B(uo,so);g=uo.prototype;g.init=function(){uo.f.init.call(this)};g.sd=function(a){return new kn(this,this.b,a)};g.add=function(a,b,c){return this.c.add(a,b,c)};g.count=function(a,b,c,d){return this.c.count(a,b,c,d)};g.get=function(a,b){return this.c.get(a,b)};
g.keys=function(a,b,c,d,e,f,h){return this.c.keys(a,b,c,d,e,f,h)};g.Ra=function(a,b,c,d,e,f){return this.c.Ra(a,b,c,d,e,f)};g.load=function(a,b,c){return this.c.load(a,b,c)};g.put=function(a,b,c){return this.c.put(a,b,c)};g.clear=function(a,b,c){return this.c.clear(a,b,c)};g.remove=function(a,b,c){return this.c.remove(a,b,c)};g.toString=function(){var a="Storage:"+this.getName();Ym(this)&&(a+=" ["+Sm(this)+"]");return a};function vo(a,b,c){uo.call(this,a,b,c)}B(vo,uo);vo.prototype.sd=function(a){return new zn(this,this.b,a)};vo.prototype.open=function(a,b,c,d){return this.c.open(a,b,c,d)};vo.prototype.map=function(a,b){return this.c.map(a,b)};function wo(a,b,c,d){dm.call(this,a,b,c,d);this.g=null}B(wo,dm);g=wo.prototype;g.logger=O("ydn.db.core.req.IDBCursor");g.Zd=function(a){(a=a.target.result)?this.ib(a.key,a.primaryKey,a.value):this.ib()};
g.openCursor=function(a,b){function c(a,b,c){q.g=n;q.g.onsuccess=z(q.Zd,q);q.ib(a,q.d?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");V(this.logger,d);var e=this.V,d=this.i.objectStore(this.U),f=v(this.Ua)?d.index(this.Ua):null;if(t(a))var h=f?!t(b):!0,k=e?e.lower:void 0,l=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=yl(this.reverse?new wl(k,a,m,h):new wl(a,l,h,e));var n;this.qd?f?n=null!=this.ob?f.openKeyCursor(e,this.ob):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.ob?d.openCursor(e,this.ob):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.ob?f.openCursor(e,this.ob):null!=e?f.openCursor(e):f.openCursor():n=null!=this.ob?d.openCursor(e,this.ob):null!=e?d.openCursor(e):d.openCursor();var q=this;n.onerror=function(a){var b=n.error;a.preventDefault();gm(q,b)};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=cm.cmp(d.key,a),f=q.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=
b)if(cm.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(q.g=n,q.g.onsuccess=z(q.Zd,q))};g.te=function(){return!!this.g};g.update=function(a){var b=this.g.result;if(b){var c=new te;a=b.update(a);a.onsuccess=function(a){c.callback(a.target.result)};a.onerror=function(a){a.preventDefault();c.H(a)};return c}throw new Fm("cursor gone");};
g.clear=function(){var a=this.g.result;if(a){var b=new te,a=a["delete"]();a.onsuccess=function(){b.callback(1)};a.onerror=function(a){a.preventDefault();b.H(a)};return b}throw new Fm("cursor gone");};g.advance=function(a){var b=this.g.result;if(1==a)b["continue"]();else b.advance(a)};
g.Wd=function(a){var b=this.g.result,c=cm.cmp(a,b.primaryKey);if(c!=(this.reverse?-1:1))throw new Ul('continuing primary key "'+a+'" must '+(this.reverse?"lower":"higher")+' than current primary key "'+b.primaryKey+'"');var d=this;this.g.onsuccess=function(e){if(b=e.target.result)if(c=cm.cmp(b.primaryKey,a),0==c||1==c&&!d.reverse||-1==c&&d.reverse)d.g.onsuccess=z(d.Zd,d),d.ib(b.key,d.d?b.primaryKey:void 0,b.value);else b["continue"]();else d.g.onsuccess=z(d.Zd,d),d.ib()};b["continue"]()};
g.Dc=function(a){var b=this.g.result;if(null!=a)b["continue"](a);else b["continue"]()};g.l=function(){wo.f.l.call(this);this.g=null};g.toString=function(){return"IDB"+wo.f.toString.call(this)};function xo(a,b,c,d,e,f){te.call(this,e,f);this.h=a;this.a=[];this.p=!!b;this.ca=!!c;this.ia=!!d;for(b=this.M=0;b<a.length;b++)G(a[b],z(this.P,this,b,!0),z(this.P,this,b,!1));0!=a.length||this.p||this.callback(this.a)}B(xo,te);xo.prototype.P=function(a,b,c){this.M++;this.a[a]=[b,c];this.b||(this.p&&b?this.callback([a,c]):this.ca&&!b?this.H(c):this.M==this.h.length&&this.callback(this.a));this.ia&&!b&&(c=null);return c};xo.prototype.H=function(a){xo.f.H.call(this,a);for(a=0;a<this.h.length;a++)ue(this.h[a])};
function yo(a){return F(new xo(a,!1,!0),function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d][1];return c})};function zo(a,b){this.a=b}B(zo,Nm);g=zo.prototype;g.logger=O("ydn.db.crud.req.IndexedDb");g.Xd=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?X(a,d):c(e)};f.onerror=function(b){b.preventDefault();X(a,f.error,!0)}}var d=[];0==b.length?X(a,[]):c(0)};
g.Db=function(a,b,c,d,e,f){function h(s){if(null==e[s])if(V(n.logger,"empty object at "+s+" of "+e.length),l++,l==e.length)X(a,k,m);else{var A=s+10;A<e.length&&h(A)}var I,A=e[s];I=f&&null!=f[s]?b?r.put(A,f[s]):r.add(A,f[s]):b?r.put(A):r.add(A);I.onsuccess=function(b){l++;k[s]=b.target.result;l==e.length?X(a,c?k[0]:k,m):(b=s+10,b<e.length&&h(b))};I.onerror=function(b){l++;var f=I.error;V(n.logger,Y(a)+q+' request to "'+d+'" cause '+f.name+' for object "'+cl(e[s])+'" at index '+s+" of "+e.length+" objects.");
k[s]=f;m=!0;b.preventDefault();l==e.length?X(a,c?k[0]:k,m):(b=s+10,b<e.length&&h(b))}}var k=[],l=0,m=!1,n=this,q=b?"put":"add",r=a.a.objectStore(d);V(this.logger,Y(a)+" "+q+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var s=0;10>s&&s<e.length;s++)h(s);else X(a,[])};
g.pg=function(a,b,c){function d(l){var n=c[l],q=n.U,r=a.a.objectStore(q),s;s=null===r.keyPath?r.put(b[l],n.r()):r.put(b[l]);s.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?X(a,e,h):(c=l+10,c<b.length&&d(c))};s.onerror=function(c){f++;P(k.logger,"request result "+c.name+' error when put keys to "'+q+'" for object "'+cl(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=s.error;h=!0;c.preventDefault();f==b.length?X(a,e,h):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,h=!1,k=this;V(this.logger,
Y(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else X(a,e,h)};
g.qg=function(a,b,c,d,e,f){function h(){var a={},b=e.indexOf("\n",n),d=!1,s;-1==b?(d=!0,s=e.substring(n)):(s=e.substring(n,b),n=b+1);for(var b=s.split(f),N=0;N<q.length;N++){var ia=b[N];r[N]&&(r[N]==Hn?ia=La(ia,'"'):"INTEGER"==r[N]?ia=parseInt(ia,10):"NUMERIC"==r[N]&&(ia=parseFloat(ia)));a[q[N]]=ia}var db=l.put(a);db.onsuccess=function(a){m.push(a.target.result);d?c(m):h()};db.onerror=function(a){"DataError"==a.name&&(a=new Cm(k+": "+s.substring(0,70)));a.preventDefault();c(db.error,!0)}}var k=Z(this.a,
d),l=a.objectStore(d),m=[],n=e.indexOf("\n"),q=e.substr(0,n).split(f),r=[];for(a=0;a<q.length;a++){var s=fm(k,q[a]);s?r[a]=s.type:q[a]==k.keyPath&&(r[a]=k.type)}n++;V(this.logger,b+" Loading data  of "+q.length+"-fields record to "+d);h()};
g.Je=function(a,b,c){var d=a.a.objectStore(b);V(this.logger,Y(a)+" clearById: "+b+" "+c);var e=d.openCursor(Bl.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){X(a,1)};c.onerror=function(){X(a,c.error,!0)}}else X(a,0)};e.onerror=function(b){b.preventDefault();X(a,e.error,!0)}};
g.sg=function(a,b){function c(k){k++;if(k>=b.length)0<h.length?X(a,h,!0):X(a,d);else{b[k].U!=e&&(e=b[k].U,f=a.a.objectStore(e));var l=f["delete"](b[k].r());l.onsuccess=function(){d++;c(k)};l.onerror=function(a){a.preventDefault();h[k]=l.error;c(k)}}}var d=0,e,f;V(this.logger,Y(a)+" removeByKeys: "+b.length+" keys");var h=[];c(-1)};
g.Ke=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);V(this.logger,Y(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,k=d["delete"](c);k.onsuccess=function(){X(a,e)};k.onerror=function(){X(a,k.error,!0)}};e.onerror=function(b){b.preventDefault();X(a,e.error,!0)}};g.tf=function(a,b,c){var d=a.a.objectStore(b);V(this.logger,Y(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){X(a,void 0)};e.onerror=function(b){b.preventDefault();X(a,e.error,!0)}};
g.rg=function(a,b,c,d){var e=a.a.objectStore(b).index(c);V(this.logger,Y(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],h=e.openCursor(d),k=0;h.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){k++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?X(a,f,!0):X(a,k)};h.onerror=function(b){b.preventDefault();X(a,h.error,!0)}};
g.Ud=function(a,b){var c=b.length,d=0;V(this.logger,Y(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&X(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&X(a,f.error,!0)}}};
g.ie=function(a,b,c){var d=this;V(this.logger,Y(a)+b+":"+c);var e=a.a.objectStore(b),f=e.get(c);f.onsuccess=function(b){V(d.logger,Y(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&Pb&&v(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),l=f.length,m=new Uint8Array(l),n=0;n<l;++n)m[n]=f.charCodeAt(n);
X(a,new Blob([m.buffer],{type:b}))}else X(a,b.target.result)};f.onerror=function(b){b.preventDefault();X(a,f.error,!0)}};
g.fg=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==k)X(a,e);else{var m=b+10;m<k&&d(m)}var n;n=h.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==k?X(a,e):(c=b+10,c<k&&d(c))};n.onerror=function(b){f++;b.preventDefault();X(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,h=a.a.objectStore(b),k=c.length;V(this.logger,Y(a)+" "+b+":"+k+" ids");if(0<k)for(b=0;10>b&&b<k;b++)d(b);else X(a,[])};
g.gg=function(a,b){function c(f){var k=b[f],l=a.a.objectStore(k.U).get(k.r());l.onsuccess=function(k){e++;d[f]=k.target.result;e==b.length?X(a,d):(k=f+10,k<b.length&&c(k))};l.onerror=function(b){e++;b.preventDefault();X(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;V(this.logger,Y(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else X(a,[])};
g.dd=function(a,b,c,d,e){if(d&&e)throw new Tl("unique count not available in IndexedDB");e=a.a.objectStore(b);b=Y(a)+" "+b+(d?":"+d:"")+(c?":"+dl(c):"");V(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){X(a,b.target.result)};f.onerror=function(b){b.preventDefault();X(a,f.error,!0)}};
g.Kb=function(a,b,c,d,e,f,h,k,l,m){var n=[],q=a.a.objectStore(c),r=k?l?"prevunique":"prev":l?"nextunique":"next";c=Y(a)+" "+b+" "+c+(d?":"+d:"")+(e?dl(e):"");k&&(c+=" reverse");l&&(c+=" unique");if(m&&t(m[0])){l=d?!t(m[1]):!0;var s=m[0],y=e?e.lower:void 0,A=e?e.upper:void 0,I=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=yl(k?new wl(y,s,I,l):new wl(s,A,l,e));c+=" starting from "+dl(m[0]);t(m[1])&&(c+=", "+dl(m[1]))}V(this.logger,c);var M;M=1==b||2==b||3==b?d?q.index(d).openKeyCursor(e,r):q.openCursor(e,
r):d?q.index(d).openCursor(e,r):q.openCursor(e,r);var N=!1;M.onsuccess=function(c){if(c=c.target.result){if(!N){if(0<h){N=!0;c.advance(h);return}if(m&&d&&t(m[0]))if(t(m[1])){var e=cm.cmp(c.key,m[0]),l=k?-1:1;if(0==e){e=cm.cmp(c.primaryKey,m[1]);if(0==e){N=!0;c["continue"]();return}if(e==l)N=!0;else{c["continue"]();return}}else N=!0}else N=!0;else N=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),q.keyPath?l[q.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?
n.push(c.value):n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=im(c.key),m[1]=im(c.primaryKey)),X(a,n)}else m&&(m[0]=void 0,m[1]=void 0),X(a,n)};M.onerror=function(b){b.preventDefault();X(a,M.error,!0)}};function Ao(a,b){this.a=b}B(Ao,zo);Ao.prototype.logger=O("ydn.db.core.req.IndexedDb");Ao.prototype.b=function(a,b,c,d){c=Z(this.a,c);return new wo(a,b,c,d)};function Bo(){this.a=!1}Bo.prototype.a=!1;Bo.prototype.state=function(){return this.a};function Co(a,b,c,d){dm.call(this,a,b,c,d);this.o=this.c=this.a=void 0;this.h=this.g=null;this.k=new Bo;this.Pe=this.bc=null}B(Co,dm);g=Co.prototype;g.logger=O("ydn.db.core.req.SimpleCursor");g.te=function(){return!!this.i};g.update=function(a){Do(this.Pe,this.pb(),a);return Ge()};g.advance=function(a){function b(b){d++;if(!b||d>=a)return Eo(c,b)}var c=this,d=this.g?-1:0;this.reverse?Fo(this.bc,b,this.g):Go(this.bc,b,this.g)};
g.Dc=function(a){if(null!=a){var b=this,c=new Ho(a),d=function(c){b.g=c;if(!c)return Eo(b,c);var d=Fl(c.value.key,a);if(b.reverse){if(1!=d)return Eo(b,c)}else if(-1!=d)return Eo(b,c)};this.reverse?Fo(this.bc,d,c):Go(this.bc,d,c)}else this.advance(1)};function Io(a){setTimeout(function(){a.k.state()?(a.k.a=!1,a.ib(a.a,a.c,a.o),Io(a)):(a.h(),a.h=null)},4)}
function Eo(a,b){if(a.g=b){var c=b.value;if(a.V)if(a.reverse||null==a.V.upper)a.reverse&&null!=a.V.lower&&(d=Fl(c.key,a.V.lower),-1==d||0==d&&a.V.lowerOpen)&&(a.g=null);else{var d=Fl(c.key,a.V.upper);if(1==d||0==d&&a.V.upperOpen)a.g=null}if(a.g){if(a.unique&&null!=a.a&&null!=c.key&&0==Fl(a.a,c.key))return;a.a=c.key;a.c=a.d?c.a:a.a;4==a.w&&(a.qd?a.o=a.c:a.o=a.Pe.zb(null,a.c))}}a.g||(a.a=void 0,a.c=void 0,a.o=void 0);return a.k.a=!0}
g.openCursor=function(a,b){var c=null;if(this.V)if(this.reverse){var d=this.d?"\uffff":void 0;null!=this.V.upper&&(c=new Ho(this.V.upper,d))}else null!=this.V.lower&&(c=new Ho(this.V.lower));null!=a&&(c=this.d?new Ho(a,b):new Ho(a));this.h=this.i.I(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==Jo(c,e))return}else if(this.V&&(!this.reverse&&this.V.lowerOpen&&null!=this.V.lower&&(e=Fl(f,this.V.lower),0==e)||this.reverse&&this.V.upperOpen&&null!=this.V.upper&&(e=Fl(f,
this.V.upper),0==e)))return;return Eo(this,b)}this.Pe=Ko(b,this.U);this.bc=Lo(this.Pe,this.Ua);this.reverse?Fo(this.bc,z(d,this),c):Go(this.bc,z(d,this),c);Io(this)},this)};g.clear=function(){throw new Sl;};g.Wd=function(){throw new Sl;};g.toString=function(){return"Simple"+Co.f.toString.call(this)};function Mo(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(Jl(void 0))));return a.join("^|")};function Ho(a,b){this.key=a;this.a=b}Ho.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")};function Jo(a,b){var c=Fl(a.key,b.key);return 0===c?null!=a.a?null!=b.a?Fl(a.a,b.a):1:null!=b.a?-1:0:c};function No(a){this.cb=a||Oo}function Oo(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}g=No.prototype;g.oa=null;g.cb=null;g.Fb=null;g.Eb=null;
g.add=function(a){if(null==this.oa)return this.Eb=this.Fb=this.oa=new Po(a),!0;var b=null;Qo(this,function(c){var d=null,e=this.cb(c.value,a);0<e?(d=c.left,null==c.left&&(b=new Po(a,c),c.left=b,c==this.Fb&&(this.Fb=b))):0>e&&(d=c.right,null==c.right&&(b=new Po(a,c),c.right=b,c==this.Eb&&(this.Eb=b)));return d});b&&(Qo(this,function(a){a.count++;return a.parent},b.parent),Ro(this,b.parent));return!!b};
g.remove=function(a){var b=null;Qo(this,function(c){var d=null,e=this.cb(c.value,a);0<e?d=c.left:0>e?d=c.right:(b=c.value,So(this,c));return d});return b};g.clear=function(){this.Eb=this.Fb=this.oa=null};g.contains=function(a){var b=!1;Qo(this,function(c){var d=null,e=this.cb(c.value,a);0<e?d=c.left:0>e?d=c.right:b=!0;return d});return b};
g.indexOf=function(a){var b=-1,c=0;Qo(this,function(d){var e=this.cb(d.value,a);if(0<e)return d.left;d.left&&(c+=d.left.count);if(0>e)return c++,d.right;b=c;return null});return b};g.ga=function(){return this.oa?this.oa.count:0};g.getHeight=function(){return this.oa?this.oa.height:0};g.ua=function(){var a=[];To(this,function(b){a.push(b)});return a};
function To(a,b){if(a.oa){var c,d=c=Uo(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Qo(a,b,c){for(c=c?c:a.oa;c&&null!=c;)c=b.call(a,c)}
function Ro(a,b){Qo(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Vo(this,a.left),Wo(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Wo(this,a.right),Vo(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Vo(a,b){Xo(b)?(b.parent.left=b.right,b.right.parent=b.parent):Yo(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.oa=b.right,a.oa.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Wo(a,b){Xo(b)?(b.parent.left=b.left,b.left.parent=b.parent):Yo(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.oa=b.left,a.oa.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function So(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Zo(a,b.left);Qo(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Eb&&(a.Eb=d)}else{d=Uo(a,b.right);Qo(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.Fb&&(a.Fb=d)}d.count=b.count;Xo(b)?b.parent.left=d:Yo(b)?b.parent.right=d:a.oa=d;Ro(a,c?c:d)}else Qo(a,function(a){a.count--;return a.parent},b.parent),Xo(b)?(b.parent.left=null,b==a.Fb&&(a.Fb=b.parent),Ro(a,b.parent)):Yo(b)?(b.parent.right=null,b==a.Eb&&(a.Eb=b.parent),Ro(a,b.parent)):a.clear()}function Uo(a,b){if(!b)return a.Fb;var c=b;Qo(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Zo(a,b){if(!b)return a.Eb;var c=b;Qo(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Po(a,b){this.value=a;this.parent=b?b:null;this.count=1}Po.prototype.left=null;Po.prototype.right=null;Po.prototype.height=1;function Yo(a){return!!a.parent&&a.parent.right==a}function Xo(a){return!!a.parent&&a.parent.left==a};function $o(a){this.cb=a||Oo}B($o,No);function Go(a,b,c){if(a.oa){var d;if(c instanceof Po)d=c;else if(c){if(Qo(a,function(a){var b=null;0<this.cb(a.value,c)?(b=a.left,d=a):0>this.cb(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Uo(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function Fo(a,b,c){if(a.oa){var d;if(c instanceof Po)d=c;else if(c){if(Qo(a,z(function(a){var b=null;0<this.cb(a.value,c)?b=a.left:(0>this.cb(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Zo(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function ap(a,b,c){this.g=a;this.storage=b;this.b=c;this.a={};a=this.b.keyPath;this.c=u(a)?a.join(","):a||"_ROWID_";this.a[this.c]=null;this.d=Mo(this.g,this.b.getName(),this.c)+"^|"}
function Lo(a,b){var c=b||a.c;if(!a.a[c]){a.a[c]=new $o(Jo);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&ta(f,a.d)){var h=Ml(f.substr(a.d.length));if(c==a.c)a.a[c].add(new Ho(h));else{var k=a.storage.getItem(f);if(null!==k)if(f=fm(a.b,c),k=bl(k),k=In(f,k),f.multiEntry){if(u(k))for(f=0;f<k.length;f++)a.a[c].add(new Ho(k[f],h))}else a.a[c].add(new Ho(k,h))}}}}return a.a[c]}
function bp(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.c)e.remove(new Ho(b));else{var f=fm(a.b,d),f=Hl(c,f.keyPath);e.remove(new Ho(b,f))}}}function cp(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function Do(a,b,c,d){if(null==b&&(a.b.keyPath&&(b=tn(a.b,c)),a.b.autoIncrement&&null==b)){b=a.d+Jl(void 0);var e=bl(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,dl(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.d+Jl(b)));if(d)return null;a.storage.setItem(a.d+Jl(b),dl(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.c)e.add(new Ho(d));else{var h=fm(a.b,f),h=Hl(c,h.keyPath);null!=h&&e.add(new Ho(d,h))}return b}
function dp(a,b){var c=a.d+Jl(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=bl(d);bp(a,b,c);return 1}g=ap.prototype;g.clear=function(){cp(this);ep(this)};g.zb=function(a,b){if(a&&a!=this.c)throw"impl";var c=this.storage.getItem(this.d+Jl(b)),d=void 0;if(null!==c)for(var d=bl(c),c=0,e=this.b.indexes.length;c<e;c++){var f=this.b.index(c);if("DATE"==f.type){var h=In(f,d);h&&Jn(f,d,new Date(h))}}return d};g.getName=function(){return this.b.getName()};
function fp(a,b,c){b=b||a.c;a=Lo(a,b);var d=null,e=null,f=0,h=!1,k=!1;null!=c&&(null!=c.lower&&(d=new Ho(c.lower)),null!=c.upper&&(e=new Ho(c.upper)),h=c.lowerOpen,k=c.upperOpen);Go(a,function(a){if(null!=a&&(a=a.value,!h||null==d||0!=Fl(a.key,d.key))){if(null!=e&&(a=Fl(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function ep(a,b){var c=Lo(a,a.c),d=null,e=null,f=0,h=[],k=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new Ho(b.lower)),null!=b.upper&&(e=new Ho(b.upper)),l=b.lowerOpen,m=b.upperOpen);Go(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=Jo(b,d))){if(null!=e){var c=Jo(b,e);if(1===c||0===c&&m)return!0}var c=a.d+Jl(b.key),r=a.storage.getItem(c);null!==r&&(a.storage.removeItem(c),f++,10>h.length&&(h.push(b.key),k.push(bl(r))))}},d);if(10>h.length)for(c=0;c<h.length;c++)bp(a,h[c],k[c]);else cp(a);return f}
g.gc=function(a,b,c,d,e,f,h,k){function l(b){if(b&&(A++,!(A<f))){var c=b.value;if(d){if(M&&null!=y&&(b=q?Jo(c,y):Fl(c.key,y.key),0==b))return;if(null!=s&&(b=q?Jo(c,s):Fl(c.key,s.key),-1==b||0==b&&I))return k&&(k[0]=void 0,k[1]=void 0),!0}else{if(I&&null!=s&&(b=q?Jo(c,s):Fl(c.key,s.key),0==b))return;if(null!=y&&(b=q?Jo(c,y):Fl(c.key,y.key),1==b||0==b&&M))return k&&(k[0]=void 0,k[1]=void 0),!0}b=c.key;if(!h||!r||null==n||0!=Fl(n,b)){c=r?c.a:b;if(2==a)m.push(c);else if(1==a)m.push(b);else if(3==a)m.push([b,
c]);else if(4==a){var l=ia.zb(null,c);m.push(l)}else m.push([b,c,ia.zb(null,c)]);k&&(k[0]=b,k[1]=c)}n=b;if(t(e)&&m.length>=e)return!0}}var m=[],n,q=!!k&&null!=k[0];b=b||this.c;var r=b!=this.c;b=Lo(this,b);var s=null,y=null;t(f)||(f=0);var A=-1,I=!1,M=!1;null!=c&&(null!=c.lower&&(s=r&&d?new Ho(c.lower,"\uffff"):new Ho(c.lower)),null!=c.upper&&(y=r&&!d?new Ho(c.upper,"\uffff"):new Ho(c.upper)),I=!!c.lowerOpen,M=!!c.upperOpen);if(q){d?M=!0:I=!0;c=k[0];var N=t(k[1])?k[1]:"\uffff";d?y=r?new Ho(c,N):new Ho(c):
s=r?new Ho(c,N):new Ho(c)}var ia=this;d?Fo(b,l,y):Go(b,l,s);return m};g.ya=function(a,b,c,d,e){return this.gc(2,a,b,c,d,e)};g.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.b.getName()};function gp(){this.clear()}g=gp.prototype;g.uf=function(){return this};g.setItem=function(a,b){t(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};g.getItem=function(a){return t(this.a[a])?this.a[a]:null};g.removeItem=function(a){delete this.a[a];jb(this.keys,a.toString());this.length=this.keys.length};g.length=0;g.key=function(a){a=this.keys[a];return t(a)?this.a[a]:null};g.clear=function(){this.a={};this.keys=[];this.length=0};function hp(a){this.i=a||new gp;this.g={}}function Ko(a,b){var c=Z(a.a,b);if(c)a.g[b]||(a.g[b]=new ap(a.c,a.d,c));else throw new Ul('store name "'+b+'" not found.');return a.g[b]}hp.prototype.$a=function(a){var b=this;setTimeout(function(){var c=Mo(b.c),c=b.d.getItem(c),c=new Yn(c);a(c)},10)};function ip(a,b){this.b=a;this.a=b}ip.prototype.I=function(a,b){var c=this.b;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.a("complete",null);d.a=null;d.b=null}};function jp(a,b){this.a=b}B(jp,Nm);g=jp.prototype;g.logger=O("ydn.db.crud.req.SimpleStore");g.pg=function(a,b,c){this.Db(a,!0,!1,null,b,c)};
g.Db=function(a,b,c,d,e,f){V(this.logger,Y(a)+" "+(b?"put":"add")+"Object"+(c?"":"s "+e.length+" objects"));var h=a.a.I(function(k){var l;if(c)l=Ko(k,d),k=f?f[0]:void 0,k=Do(l,k,e[0],!b),null!=k?X(a,k):(l=cl(k),l=new Bm(l),X(a,l,!0));else{for(var m=d,n=[],q=!1,r=f||{},s=0;s<e.length;s++){var y;d?y=r[s]:(m=f[s],y=m.r(),m=m.U);l&&l.getName()==m||(l=Ko(k,m));y=Do(l,y,e[s],!b);null!=y?n.push(y):(q=!0,n.push(new Bm))}X(a,n,q)}h();h=null},this)};g.qg=function(){throw new Sl("putData");};
g.ie=function(a,b,c){var d=a.a.I(function(e){e=Ko(e,b).zb(null,c);X(a,e);d();d=null},this)};function kp(a,b,c,d){var e=b.a.I(function(a){for(var h=[],k=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof Lm&&(k=n,n=k.r(),k=k.U);l&&l.getName()==k||(l=Ko(a,k));n=l.zb(null,n);h[m]=n}X(b,h,!1);e();e=null},a)}g.fg=function(a,b,c){kp(this,a,b,c)};g.gg=function(a,b){kp(this,a,null,b)};
g.Je=function(a,b,c){var d=Y(a)+" removeById "+b+" "+c;V(this.logger,d);var e=this,f=a.a.I(function(h){h=dp(Ko(h,b),c);W(e.logger,"success "+d+(0==h?" [not found]":""));X(a,h);f();f=null},this)};g.sg=function(a,b){V(this.logger,Y(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.a.I(function(f){for(var h=0;h<b.length;h++){var k=b[h].U,l=b[h].r();c&&c.getName()==k||(c=Ko(f,k));d+=dp(c,l)}X(a,d);e();e=null},this)};g.tf=function(a,b,c){this.Ke(a,b,c)};
g.Ke=function(a,b,c){var d=Y(a)+" removeByKeyRange "+(c?dl(c):"");V(this.logger,d);var e=this,f=a.a.I(function(h){h=ep(Ko(h,b),c);W(e.logger,d+" deleted "+h+" records.");X(a,h);f();f=null},this)};g.rg=function(a,b,c,d){var e=Y(a)+" removeByIndexKeyRange "+(d?dl(d):"");V(this.logger,e);var f=a.a.I(function(e){e=Ko(e,b);for(var k=e.ya(c,d),l=k.length,m=0;m<l;m++)dp(e,k[m]);X(a,l);f();f=null},this)};
g.Ud=function(a,b){var c=Y(a)+" clearByStores";V(this.logger,c);var d=a.a.I(function(e){for(var f=0;f<b.length;f++)Ko(e,b[f]).clear();W(this.logger,"success "+c);X(a,b.length);d();d=null},this)};g.Xd=function(a,b){var c=a.a.I(function(d){for(var e=[],f=0;f<b.length;f++){var h=Ko(d,b[f]);e.push(fp(h))}X(a,e);c();c=null},this)};
g.dd=function(a,b,c,d){var e=Y(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");V(this.logger,e);var f=a.a.I(function(h){h=fp(Ko(h,b),d,c);W(this.logger,"success "+e);X(a,h);f();f=null},this)};g.Kb=function(a,b,c,d,e,f,h,k,l,m){var n=Y(a)+" "+c+" "+(e?cl(e):"");V(this.logger,n);var q=a.a.I(function(r){r=Ko(r,c).gc(b,d,e,k,f,h,l,m);W(this.logger,n+" "+r.length+" records found.");X(a,r);q();q=null},this)};function lp(a,b){this.a=b}B(lp,jp);lp.prototype.b=function(a,b,c,d){c=Z(this.a,c);return new Co(a,b,c,d)};function mp(a,b,c,d){dm.call(this,a,b,c,d);this.K=null;this.g=this.h=void 0}B(mp,dm);g=mp.prototype;g.logger=O("ydn.db.core.req.WebsqlCursor");g.pb=function(){return this.g};g.init=function(a,b,c,d,e){mp.f.init.call(this,a,b,c,d,e);this.K=v(b)?fm(this.b,b):null};g.R=function(){return this.k};function np(a,b){a.h=void 0;a.g=void 0;a.k=void 0;if(t(b))if(x(b)){var c=Kn(b[a.b.c],a.b.type);a.g=c;if(a.d){var d=fm(a.b,a.Ua);a.h=Kn(b[a.Ua],d.type)}else a.h=c;a.k=a.qd?c:op(b,a.b)}else a.k=b}
function pp(a,b,c){fm(a.b,a.Ua);var d=[],e=a.Ua,f=a.V,h=a.h;if(null!=f){var k=f.lower,l=f.upper,m=f.lowerOpen,n=f.upperOpen;a.reverse?l=null!=l&&-1==Fl(l,h)?l:h:k=null!=k&&1==Fl(k,h)?k:h;null!=k&&null!=l?f=wl.bound(k,l,!!m,!!n):f=null!=k?Bl.lowerBound(k,!!m):Bl.upperBound(l,!!n)}else f=a.reverse?Bl.upperBound(h):Bl.lowerBound(h);e=On(a.b,d,a.w,e,f,a.reverse,a.unique);c=a.reverse?Bl.upperBound(c,!1):Bl.lowerBound(c,!1);c=On(a.b,d,a.w,a.b.c,c,a.reverse,a.unique);e.Z=e.Z?e.Z+(" AND "+c.Z):c.Z;c="SELECT "+
e.select+" FROM "+e.Fc+(e.Z?" WHERE "+e.Z:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.Ub;c+=" LIMIT 1";V(a.logger,a+": continuePrimary:  SQL: "+c+" : "+dl(d));a.i.executeSql(c,d,function(c,d){0<d.rows.length?np(a,d.rows.item(0)):np(a);b.call(a,a.h,a.g,a.k);b=null},function(c,d){P(a.logger,"get error: "+d.message);gm(a,d);np(a);b.call(a,a.g,a.h,a.k);b=null;return!1})}
function qp(a,b,c,d,e,f){var h=!d;d=[];a.d&&null!=f&&null!=c?c=Rn(a.b,a.w,d,a.K.getName(),a.V,c,h,f,a.reverse,a.unique):null!=c?(f=a.K?a.K.getName():null,c=Qn(a.b,a.w,d,f,a.V,a.reverse,a.unique,c,h)):(c=Nn(a.b,d,a.w,a.d?a.K.d:a.b.c,a.V,a.reverse,a.unique),a.d&&(c+=", "+a.b.b+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);V(a.logger,a+": continue:  SQL: "+c+" : "+dl(d));a.i.executeSql(c,d,function(c,d){0<d.rows.length?np(a,d.rows.item(0)):np(a);b.call(a,a.h,a.g,a.k);b=null},function(c,d){P(a.logger,
"get error: "+d.message);gm(a,d);np(a);b.call(a,a.g,a.h,a.k);b=null;return!1})}g.te=function(){return!!this.i};g.update=function(a){if(!this.te())throw new Fm;var b=new te,c=this.pb();a=Un(this.b,a,c);var d="REPLACE INTO "+Pn(this.b)+" ("+a.Wg.join(", ")+") VALUES ("+a.Ph.join(", ")+")";V(this.logger,this+': update "'+d+'" : '+dl(a.Ra));this.i.executeSql(d,a.Ra,function(){b.callback(c)},function(a,c){b.H(c);return!1});return b};
g.advance=function(a){var b=this.h,c=this.g,d=!0;null==this.h||this.d&&null==this.g||(a-=1,d=!1);qp(this,function(a,d,h){var k=null!=b&&null!=a&&0==Fl(b,a);if(this.d){var l=null!=d&&null!=c&&0==Fl(d,c);if(k&&l)throw new Ul("current: "+b+";"+c+" next: "+a+";"+d);}else if(k)throw new Ul("current: "+b+" next: "+a);this.ib(a,d,h)},this.h,d,a,this.g)};g.Dc=function(a){null!=a?qp(this,this.ib,a,!0):this.advance(1)};g.openCursor=function(a,b){qp(this,this.ib,a,!1,0,b)};
g.clear=function(){if(!this.te())throw new Fm;var a=new te,b=this.b.c,b="DELETE FROM "+Pn(this.b)+" WHERE "+b+" = ?",c=[this.pb()];V(this.logger,this+': clear "'+b+'" : '+dl(c));this.i.executeSql(b,c,function(b,c){a.callback(c.rowsAffected)},function(b,c){a.H(c);return!1});return a};g.Wd=function(a){var b=Fl(a,this.g);if(0==b||1==b&&this.reverse||-1==b&&!this.reverse)throw new eo(this+" to continuePrimaryKey  from "+this.g+" to "+a+" on "+this.ob+" direction is wrong");pp(this,this.ib,a)};
g.toString=function(){return"WebSql"+mp.f.toString.call(this)};function rp(a,b){this.a=b}B(rp,Nm);g=rp.prototype;g.logger=O("ydn.db.crud.req.WebSql");
function op(a,b){if(b.Ac&&!b.keyPath&&0==b.indexes.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return bl(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),h=0;h<e;++h)f[h]=d.charCodeAt(h);return new Blob([f.buffer],{type:c})}c=a._default_?bl(a._default_):{};null!=b.keyPath&&(d=Kn(a[b.keyPath],b.type),null!=d&&wn(b,c,d));for(d=0;d<b.indexes.length;d++)e=
b.index(d),f=e.d,"_default_"==f||e.i||e.multiEntry||"DATE"!=e.type&&!b.Ac||(f=Kn(a[f],e.type),t(f)&&Jn(e,c,f));return c}g.qg=function(){throw new Sl("putData");};
g.Db=function(a,b,c,d,e,f){function h(b,d){if(null==e[b])if(V(m.logger,"empty object at "+b+" of "+e.length),q++,q==e.length)W(m.logger,r+" success "+r),X(a,n,s);else{var I=b+2;I<e.length&&h(I,d)}var M;M=t(f)?Un(k,e[b],f[b]):Un(k,e[b]);I=l+Pn(k)+" ("+M.Wg.join(", ")+") VALUES ("+M.Ph.join(", ")+");";V(m.logger,Y(a)+" SQL: "+I+" PARAMS: "+M.Ra+" REQ: "+b+" of "+e.length);d.executeSql(I,M.Ra,function(f,r){function I(b,c){var e="ydn.db.me:"+k.getName()+":"+b.getName(),e=l+Oa(e)+" ("+k.b+", "+b.c+") VALUES (?, ?)",
f=[Gl(L,k.type),Gl(c,b.type)];V(m.logger,Y(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){P(m.logger,"multiEntry index insert error: "+b.message);return!1})}q++;var L=t(M.key)?M.key:r.insertId;1>r.rowsAffected&&(s=!0,L=new Bm(L+" no-op"));for(var $c=0,kk=k.indexes.length;$c<kk;$c++){var Hd=k.index($c);if(Hd.multiEntry)for(var ye=Hl(e[b],Hd.keyPath),Qy=(ye?ye.length:0)||0,ao=0;ao<Qy;ao++)I(Hd,ye[ao])}c?X(a,L):(n[b]=L,q==e.length?X(a,n,s):($c=b+2,$c<e.length&&h($c,f)))},function(d,
f){q++;s=!0;6==f.code?f.name="ConstraintError":P(m.logger,"error: "+f.message+" "+r);if(c)X(a,f,!0);else if(n[b]=f,q==e.length)V(m.logger,"success "+r),X(a,n,s);else{var k=b+2;k<e.length&&h(k,d)}return!1})}b=!b;var k=Z(this.a,d),l=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.a;var m=this,n=[],q=0,r=Y(a)+" inserting "+e.length+" objects.",s=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)h(b,d);else W(this.logger,"success"),X(a,[])};
g.pg=function(a,b,c){if(0==c.length)X(a,[]);else{for(var d=[],e=0,f=0,h=this,k=function(k,l){var m=[];V(h.logger,"put "+l.length+" objects to "+k);for(var n=Tn(Z(h.a,k)),q=n?void 0:[],r=0;r<l.length;r++)m.push(b[l[r]]),n||q.push(c[l[r]].r());n=tm(a);G(n,function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&X(a,d)},function(){e++;e==f&&X(a,d,!0)});h.Db(n,!1,!1,k,m,q)},l="",m=[],n=[],q=0;q<c.length;q++){var r=c[q].U,s=c[q].r();r!=l?(f++,0<m.length&&k(l,m),m=[q],n=[s],l=r):(m.push(q),n.push(s))}0<
m.length&&k(l,m)}};g.ie=function(a,b,c){var d=a.a,e=Z(this.a,b),f=this;b=e.b;c=[Gl(c,e.type)];b="SELECT * FROM "+Pn(e)+" WHERE "+b+" = ?";var h=Y(a)+" SQL: "+b+" PARAMS: "+c;V(this.logger,h);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=op(d,e),X(a,d)):(W(f.logger,"success no result: "+h),X(a,void 0))}else W(f.logger,"success no result: "+h),X(a,void 0)},function(b,c){P(f.logger,"error: "+h+" "+c.message);X(a,c,!0);return!1})};
g.fg=function(a,b,c){function d(b,e){var q=l.b,r=[Gl(c[b],l.type)],s="SELECT * FROM "+Pn(l)+" WHERE "+q+" = ?";V(f.logger,"SQL: "+s+" PARAMS: "+r);e.executeSql(s,r,function(e,f){k++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(h[b]=op(n,l))}else h[b]=void 0;k==c.length?X(a,h):(n=b+10,n<c.length&&d(n,e))},function(e,l){k++;P(f.logger,"error: "+s+" "+l.message);if(k==c.length)X(a,h);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.a,f=this,h=[],k=0,l=Z(this.a,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else W(f.logger,"success"),X(a,[])};
g.gg=function(a,b){function c(d,k){var n=b[d],q=Z(e.a,n.U),r=Mm(n),n=q.b,r=[Gl(r,q.type)],s="SELECT * FROM "+Pn(q)+" WHERE "+n+" = ?";V(e.logger,"SQL: "+s+" PARAMS: "+r);k.executeSql(s,r,function(k,m){h++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=op(n,q))}else f[d]=void 0;h==b.length?(V(e.logger,"success "+s),X(a,f)):(n=d+10,n<b.length&&c(n,k))},function(b,c){X(a,c,!0);return!1})}var d=a.a,e=this,f=[],h=0;if(0<b.length)for(var k=0;10>k&&k<b.length;k++)c(k,d);else V(this.logger,"success"),
X(a,[])};
g.Ud=function(a,b){function c(d,h){function k(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Oa(a);V(e.logger,"SQL: "+a);h.executeSql(a,[])}var l=Z(e.a,b[d]),m="DELETE FROM  "+Pn(l);V(e.logger,"SQL: "+m+" PARAMS: []");h.executeSql(m,[],function(h){d==b.length-1?(V(e.logger,"success "+m),X(a,b.length)):c(d+1,h)},function(b,c){X(a,c,!0);return!1});for(var n=0,q=l.indexes.length;n<q;n++){var r=l.index(n);r.multiEntry&&k(r)}}var d=a.a,e=this;0<b.length?c(0,d):(V(this.logger,"success"),
X(a,0))};
g.sg=function(a,b){function c(k){if(k>=b.length)X(a,f,h);else{var l=Z(e.a,b[k].U),m=Gl(b[k].r(),l.type),n=" WHERE "+l.b+" = ?",q="DELETE FROM "+Pn(l)+n,r=Y(a)+" SQL: "+q+" PARAMS: "+[m];d.executeSql(q,[m],function(){f++;c(k)},function(a,b){P(e.logger,"error: "+r+b.message);h=!0;c(k);return!1});k++;for(var q=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Oa(b)+n;V(e.logger,Y(a)+NaN+b);d.executeSql(b,[m])},s=0,y=l.indexes.length;s<y;s++){var A=l.index(s);A.multiEntry&&q(A)}}}
var d=a.a,e=this,f=0,h=!1;V(this.logger,Y(a)+" removeByKeys: "+b.length+" keys");c(0)};
g.Je=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Oa(b)+l;V(k.logger,Y(a)+NaN+b);e.executeSql(b,[h])}var e=a.a,f=Z(this.a,b),h=Gl(c,f.type),k=this,l=" WHERE "+f.b+" = ?";b="DELETE FROM "+Pn(f)+l;V(this.logger,Y(a)+" SQL: "+b+" PARAMS: "+[h]);e.executeSql(b,[h],function(b,c){X(a,c.rowsAffected)},function(b,c){X(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};g.tf=function(a,b,c){sp(this,a,b,void 0,c)};
g.Ke=function(a,b,c){sp(this,a,b,void 0,c)};g.rg=function(a,b,c,d){sp(this,a,b,c,d)};
function sp(a,b,c,d,e){function f(c){c="ydn.db.me:"+k.getName()+":"+c.getName();c="DELETE FROM  "+Oa(c)+n;V(a.logger,Y(b)+NaN+c);h.executeSql(c,m)}var h=b.a,k=Z(a.a,c);c="DELETE FROM "+Pn(k);var l=[],m=[],n="";null!=e&&(t(d)?(d=fm(k,d),El(d.c,d.type,e,m,l)):El(k.b,k.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var q=Y(b)+" SQL: "+c+" PARAMS: "+l;V(a.logger,q);h.executeSql(c,l,function(c,d){V(a.logger,"success "+q);X(b,d.rowsAffected)},function(c,d){P(a.logger,"error: "+q+d.message);X(b,d,!0);return!1});
e=0;for(d=k.indexes.length;e<d;e++)c=k.index(e),c.multiEntry&&f(c)}g.Xd=function(a,b){function c(h){var k="SELECT COUNT(*) FROM "+Oa(b[h]);V(e.logger,"SQL: "+k+" PARAMS: []");d.executeSql(k,[],function(d,e){var k=e.rows.item(0);f[h]=parseInt(k["COUNT(*)"],10);h++;h==b.length?X(a,f):c(h)},function(b,c){X(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(V(this.logger,"success"),X(a,0)):c(0)};
g.dd=function(a,b,c,d,e){var f=[];b=Nn(Z(this.a,b),f,6,d,c,!1,e);V(this.logger,Y(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d=c.rows.item(0);X(a,go(d))},function(b,c){X(a,c,!0);return!1})};
g.Kb=function(a,b,c,d,e,f,h,k,l,m){var n=this,q=[],r=Z(this.a,c),s=r.c,y=r.type,A=y,I=null!=d&&d!==s?fm(r,d):null,M=d||s;I&&(A=I.type);c=[];if(m&&t(m[0])){var N=m[0];I&&t(m[1])?(d=m[1],e=Rn(r,b,c,I.getName(),e,N,!0,d,k,l)):e=Qn(r,b,c,d,e,k,l,N,!0)}else e=Nn(r,c,b,M,e,k,l);w(f)&&(e+=" LIMIT "+f);w(h)&&(e+=" OFFSET "+h);var ia=a+" SQL: "+e+" ;params= "+dl(c);V(this.logger,ia);a.a.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,h=0;h<e;h++)f=d.rows.item(h),2==b?q[h]=Kn(f[s],y):1==b?q[h]=Kn(f[M],
A):3==b?q[h]=[Kn(f[M],A),Kn(f[s],y)]:null!=f&&(q[h]=op(f,r));W(n.logger,"success "+a);m&&f&&(m[0]=Kn(f[M],A),m[1]=Kn(f[s],y));X(a,q)},function(b,c){P(n.logger,"error: "+ia+c.message);X(a,c,!0);return!1})};function tp(a,b){this.a=b}B(tp,rp);tp.prototype.logger=O("ydn.db.core.req.WebSql");tp.prototype.b=function(a,b,c,d){c=Z(this.a,c);return new mp(a,b,c,d)};vo.prototype.p=function(){var a=Sm(this);if("indexeddb"==a)return new Ao(0,this.b);if("websql"==a||"sqlite"==a)return new tp(0,this.b);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new lp(0,this.b);throw new Ul("No executor for "+a);};function up(a){if(!v(a))throw new Am;this.Qa=a;this.d=am;this.a=[];vp(this,a);this.Dd=""}g=up.prototype;g.Qa="";g.Ah=NaN;g.Bh=NaN;g.Ig=!1;g.Dd="";
function vp(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.g=c[1].toUpperCase();if("SELECT"==a.g)a.d=$l;else if("INSERT"==a.g)a.d=am;else if("UPDATE"==a.g)a.d=am;else if("DELETE"==a.g)a.d=am;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.c=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.c=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new Jm("missing closing parentheses"));a.k=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.b=d.substring(c),d=d.substring(0,c)):a.b="";c=d.search(/WHERE/i);0<c?(a.i=d.substring(c+6).trim(),d=d.substring(0,c)):a.i="";a.a=d.trim().split(",").map(function(a){a=La(a,'"');a=La(a,"'");return a.trim()})}}}
g.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.Qa=this.Qa.replace("?",a[b]);vp(this,this.Qa)}this.h=wp(this);if(!this.h)return this.Dd;a=this.b.length;if(b=/OFFSET\s+(\d+)/i.exec(this.b))this.Bh=parseInt(b[1],10),a=this.b.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.b))this.Ah=parseInt(b[1],10),b=this.b.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.b.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.Ig="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.Ig=!1,this.o=La(La(a,'"'),"'")):this.o=void 0;return""};function xp(a){if("*"==a.k)return null;a=a.k.split(",");return a=a.map(function(a){return La(a.trim(),'"')})}g.toJSON=function(){return{sql:this.Qa}};
function wp(a){function b(a){return gb(c,function(b){return b.gd()==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.i.length)for(var e=a.i.split("AND"),f=0;f<e.length;f++){var h=e[f],k=d.exec(h);if(k){var l=k[1].trim(),l=La(l,'"'),l=La(l,"'");if(0<l.length){var m=k[3].trim();ta(m,'"')?m=La(m,'"'):ta(m,"'")?m=La(m,"'"):m=parseFloat(m);k=new Vl(l,k[2],m);l=b(l);if(0<=l){if(c[l]=c[l].nf(k),!c[l])return a.Dd='where clause "'+h+'" conflict',null}else c.push(k)}else return a.Dd='Invalid clause "'+h+'"',
null}else return a.Dd='Invalid clause "'+h+'"',null}return c}g.toString=function(){return"query:"+this.Qa};function yp(a,b){this.a=b;this.b=a}yp.prototype.logger=O("ydn.db.sql.req.nosql.Node");yp.prototype.toJSON=function(){return{sql:this.a}};yp.prototype.toString=function(){return"idb.Node:"};
yp.prototype.execute=function(a,b){var c=lb(this.a.a)[0],d=this.a.h,e=this.a.Ah,e=isNaN(e)?100:e,f=this.a.Bh,f=isNaN(f)?0:f,h=this.a.o,k=xp(this.a),l=null,m=this.a.Ig;if(0==d.length)l=null;else if(1==d.length)l=zl(d[0].a);else throw new Rl("too many conditions.");null===k||wm(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return Hl(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=Hl(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].gd():void 0,n=Y(a)+" executing on"+c;d&&(n+=":"+
d);n+=" "+Dl(l);W(this.logger,n);h&&h!=this.b.keyPath?b.Kb(a,4,c,h,l,e,f,m,!1):t(d)&&d!=this.b.keyPath?b.Kb(a,4,c,d,l,e,f,m,!1):b.Kb(a,4,c,null,l,e,f,m,!1)};function zp(a,b){yp.call(this,a,b)}B(zp,yp);
zp.prototype.execute=function(a,b){var c,d=lb(this.a.a)[0],e=this.a.h,f=null;if(0==e.length)f=null;else if(1==e.length)f=zl(e[0].a);else throw new Rl("too many conditions.");var h=this.a.c,e=0<e.length?e[0].gd():void 0,k=Y(a)+" executing "+h+" on "+d;e&&(k+=":"+e);k+=" "+Dl(f);W(this.logger,k);if("COUNT"==h)f?b.dd(a,d,f,e,!1):b.dd(a,d,null,void 0,!1);else{var l,k=xp(this.a);if(!k||0==k.length)throw new eo("field name require for reduce operation: "+h);k=k[0];if("MIN"==h)l=Ap(k);else if("MAX"==h)l=
Bp(k);else if("AVG"==h)c=0,l=Cp(k);else if("SUM"==h)c=0,l=Dp(k);else throw new $n(h);var m;t(e)?m=new om(d,e,f):m=new nm(d,f);var d=b.b(a.a,Y(a),d,4),n=m.load([d]);n.M=function(b){X(a,b,!0)};var q=0;n.v=function(b){null!=b?(b=m.b?n.pb():n.R(),c=l(b,c,q),n.advance(1),q++):X(a,c)}}};function Cp(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function Dp(a){return function(b,c){return c+b[a]}}function Ap(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function Bp(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function Ep(a,b){this.a=b}B(Ep,Ao);Ep.prototype.logger=O("ydn.db.sql.req.IndexedDb");Ep.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new Jm(c);c=lb(b.a);if(1==c.length){var d=Z(this.a,c[0]);if(!d)throw new Gm(c[0]);var e=xp(b);if(e)for(var f=0;f<e.length;f++)if(!pn(d,e[f]))throw new Gm('Index "'+e[f]+'" not found in '+c[0]);var h;b.c?h=new zp(d,b):h=new yp(d,b);h.execute(a,this)}else throw new $n(b.Qa);};function Fp(a,b){this.b=b;this.c=a;this.a=xp(b)}Fp.prototype.logger=O("ydn.db.sql.req.websql.Node");Fp.prototype.toJSON=function(){return{sql:this.b.Qa}};Fp.prototype.toString=function(){return"websql.Node:"};function Gp(a,b){if(a.a){if(1==a.a.length){if(x(b))return Ab(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Ab(b,a.a[d]);return c}return op(b,a.c)}
Fp.prototype.execute=function(a,b,c){var d=this,e=[];b.executeSql(this.b.Qa,c,function(b,c){for(var k=c.rows.length,l=0;l<k;l++){var m=c.rows.item(l);if(x(m))var n=Gp(d,m);e.push(n)}a(e)},function(b,c){P(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function Hp(a,b){Fp.call(this,a,b)}B(Hp,Fp);Hp.prototype.execute=function(a,b,c){var d=this;b.executeSql(this.b.Qa,c,function(b,c){var d=c.rows.length;if(1==d)d=go(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new Em;},function(b,c){P(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function Ip(a,b){this.a=b}B(Ip,tp);Ip.prototype.logger=O("ydn.db.sql.req.WebSql");Ip.prototype.executeSql=function(a,b,c){var d=lb(b.a);if(1==d.length){var e=Z(this.a,d[0]);if(!e)throw new Gm(d[0]);var f=xp(b);if(f)for(var h=0;h<f.length;h++)if(!pn(e,f[h]))throw new Gm('Index "'+f[h]+'" not found in '+d[0]);var k;b.c?k=new Hp(e,b):k=new Fp(e,b);k.execute(function(b,c){X(a,b,c)},a.a,c)}else throw new $n(b.Qa);};function Jp(a,b){this.a=b}B(Jp,lp);Jp.prototype.logger=O("ydn.db.sql.req.SimpleStore");Jp.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new Jm(c);c=lb(b.a);if(1==c.length){var d=Z(this.a,c[0]);if(!d)throw new Gm(c[0]);var e=xp(b);if(e)for(var f=0;f<e.length;f++)if(!pn(d,e[f]))throw new U('Index "'+e[f]+'" not found in '+c[0]);var h;b.c?h=new zp(d,b):h=new yp(d,b);h.execute(a,this)}else throw new Rl(b.Qa);};function Kp(a,b,c){$m.call(this,a,b,c)}B(Kp,zn);Kp.prototype.executeSql=function(a,b){for(var c=new up(a),d=lb(c.a),e=0;e<d.length;e++){var f=Z(this.b,d[e]);if(!f)throw new U("store: "+f+" not exists.");}W(this.logger,"executeSql: "+a+" params: "+b);var h=this.a.request("sql",lb(c.a),c.d);xm(h,function(){an(this).executeSql(h,c,b||[])},this);return h};function Lp(a,b,c){uo.call(this,a,b,c)}B(Lp,vo);Lp.prototype.sd=function(a){return new Kp(this,this.b,a)};Lp.prototype.executeSql=function(a,b){return this.c.executeSql(a,b)};Lp.prototype.p=function(){var a=Sm(this);if("indexeddb"==a)return new Ep(0,this.b);if("websql"==a||"sqlite"==a)return new Ip(0,this.b);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new Jp(0,this.b);throw new Ul("No executor for "+a);};function Mp(a,b){t(a)&&5242880<a&&qg(this.logger,ag,"storage size request ignored, use Quota Management API instead");this.aa=null;this.zd=b||NaN}g=Mp.prototype;
g.connect=function(a,b){function c(a,c,d){W(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+h);for(d=0;d<b.stores.length;d++)Np(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)ln(b,c[d])||(a.deleteObjectStore(c[d]),W(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.b?P(e.logger,"database already set."):t(b)?(P(e.logger,b?b.message:"Error received."),e.aa=null,f.H(b)):(e.aa=a,e.aa.onabort=function(a){V(e.logger,e+": abort");e.Ed(a.target.error)},
e.aa.onerror=function(a){V(e.logger,e+": error");e.Ed(a.target.error)},e.aa.onversionchange=function(a){V(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.aa&&(e.aa.onabort=null,e.aa.onblocked=null,e.aa.onerror=null,e.aa.onversionchange=null,e.Fe(a),!a.defaultPrevented)){e.aa.close();e.aa=null;var b=Error();b.name=a.type;e.Ye(b)}},f.callback(parseFloat(h)))}var e=this,f=new te,h=void 0,k=b.version;qg(this.logger,eg,"Opening database: "+a+" ver: "+(b.b?"auto":k));var l;l=t(k)?
cm.open(a,k):cm.open(a);l.onsuccess=function(f){var k=f.target.result;t(h)||(h=k.version);qg(e.logger,eg,"Database: "+k.name+", ver: "+k.version+" opened.");if(b.b)e.$a(function(f){if(b instanceof fn)for(var h=0;h<f.stores.length;h++)ln(b,f.stores[h].getName())||gn(b,f.stores[h].clone());f=Zn(b,f,!1,!0);if(0<f.length){qg(e.logger,eg,"Schema change require for difference in "+f);var l=w(k.version)?k.version+1:1;if("IDBOpenDBRequest"in p){k.close();var m=cm.open(a,l);m.onupgradeneeded=function(a){a=
a.target.result;qg(e.logger,eg,"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){qg(e.logger,eg,e+": fail.");d(null)}}else{var q=k.setVersion(l+"");q.a=function(a){P(e.logger,"migrating from "+k.version+" to "+l+" failed.");d(null,a)};q.onsuccess=function(){q.transaction.oncomplete=M;c(k,q.transaction,!0)};var M=function(){var b=cm.open(a);b.onsuccess=function(a){a=a.target.result;qg(e.logger,eg,e+": OK.");d(a)};b.onerror=function(){qg(e.logger,
eg,e+": fail.");d(null)}};null!=q.transaction&&(q.transaction.oncomplete=M)}}else d(k)},void 0,k);else if(b.version>k.version){var l=k.setVersion(b.version);l.a=function(a){P(e.logger,"migrating from "+k.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(k,l.transaction,!0)}}else b.version==k.version?qg(e.logger,eg,"database version "+k.version+" ready to go"):P(e.logger,"connected database version "+k.version+" is higher than requested version."),e.$a(function(a){a=Zn(b,a,!1,
!0);0<a.length?(qg(e.logger,eg,a),d(null,new jn("different schema: "+a))):d(k)},void 0,k)};l.onupgradeneeded=function(a){a=a.target.result;h=NaN;qg(this.logger,eg,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};l.onerror=function(c){var f=e.logger;f&&kg(f,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name);d(null,c)};l.onblocked=function(c){var f=e.logger;f&&kg(f,"database "+a+" "+b.version+" block, close other connections.");
d(null,c)};w(this.zd)&&!isNaN(this.zd)&&setTimeout(function(){if("done"!=l.readyState){var a=e.logger;a&&kg(a,e+": database state is still "+l.readyState);d(null,new Km("connection timeout after "+e.zd))}},this.zd);return f};g.zd=18E4;g.Ye=function(){};g.Ed=function(){};g.Fe=function(){};g.Vc=function(){return"indexeddb"};g.Xe=function(){return!!this.aa};g.logger=O("ydn.db.con.IndexedDb");g.aa=null;g.We=function(){return this.aa?parseFloat(this.aa.version):void 0};
g.$a=function(a,b,c){c=c||this.aa;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Yn(c.version));return}throw new co;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Yn(c.version));return}b=c.transaction(b,$l)}for(var e=c.objectStoreNames,f=[],h=e.length,d=0;d<h;d++){for(var k=b.objectStore(e[d]),l=[],m=0,n=k.indexNames.length;m<n;m++){var q=k.index(k.indexNames[m]);l[m]=new Fn(q.keyPath,void 0,q.unique,q.multiEntry,q.name)}f[d]=
new cn(k.name,k.keyPath,k.autoIncrement,void 0,l)}b=new Yn(c.version,f);a(b)};
function Np(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}qg(a.logger,fg,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());em(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),qg(a.logger,ag,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):ha(c.autoIncrement)&&ha(d.autoIncrement)&&c.autoIncrement!=
d.autoIncrement&&(b.deleteObjectStore(d.getName()),qg(a.logger,ag,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,h=0;h<d.indexes.length;h++){var k=d.index(h);!f.contains(k.getName())&&k.g&&(c.clear(),qg(a.logger,ag,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var l=0,m=0,n=0,h=0;h<d.indexes.length;h++){var k=d.index(h),q=!1;if(f.contains(k.getName())){var r=c.index(k.getName()),s=null!=r.unique&&null!=k.unique&&r.unique!=
k.unique,y=null!=r.multiEntry&&null!=k.multiEntry&&r.multiEntry!=k.multiEntry,r=null!=r.keyPath&&null!=k.keyPath&&!!em(r.keyPath,k.keyPath);if(s||y||r)c.deleteIndex(k.getName()),q=!0,l--,n++}else"BLOB"!=k.type&&(q=!0);q&&(k.unique||k.multiEntry?(q={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,q)):c.createIndex(k.getName(),k.keyPath),l++)}for(h=0;h<f.length;h++)pn(d,f[h])||(c.deleteIndex(f[h]),m++);qg(a.logger,fg,"Updated store: "+c.name+", "+l+" index created, "+m+
" index deleted, "+n+" modified.")}else{c=e();for(h=0;h<d.indexes.length;h++)k=d.index(h),"BLOB"==k.type?qg(a.logger,bg,"Index "+k+" of blob data type ignored."):(qg(a.logger,fg,"Creating index: "+k),k.unique||k.multiEntry?(q={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,q)):c.createIndex(k.getName(),k.keyPath));qg(a.logger,fg,"Created store: "+c)}}
g.ae=function(a,b,c,d){var e=this.aa;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};g.close=function(){qg(this.logger,fg,this+" closing connection");this.aa.close()};g.toString=function(){return"IndexedDB:"+(this.aa?this.aa.name+":"+this.aa.version:"")};
zm.push(function(a,b){if(!cm||b&&"indexeddb"!=b)return null;var c=cm.deleteDatabase(a),d=new rm("IDBVersionChangeEvent ");c.onblocked=function(a){Xl(d,a)};c.onerror=function(a){d.H(a)};c.onsuccess=function(a){d.callback(a)};return d});function Op(a){hp.call(this,a);this.b=NaN}B(Op,hp);g=Op.prototype;g.logger=O("ydn.db.con.SimpleStorage");g.We=function(){return this.b};
g.connect=function(a,b){function c(a,b){setTimeout(function(){b?(W(d.logger,d+" opening fail"),e.H(b)):(W(d.logger,d+" version "+d.We()+" open"),e.callback(a))},10)}var d=this,e=new te;this.d=this.i.uf(a);this.c=a;this.a=b;var f=Mo(this.c);this.b=NaN;var h=bl(this.d.getItem(f));t(h.version)&&!w(h.version)&&(h.version=NaN);if(h)if(h=new Yn(h),Zn(this.a,h,!1,!1))if(!this.a.b&&!isNaN(h.version)&&this.a.version>h.version)c(NaN,new Dm("existing version "+h.version+" is larger than "+this.a.version));else{var k=
this.a.version;this.b=t(k)?k:h.version+1;for(k=0;k<this.a.count();k++)var l=this.a.stores[k]||null;if(this.a instanceof fn)for(k=0;k<h.count();k++)l=h.stores[k]||null,gn(this.a,l);k=this.a.toJSON();k.version=this.b||NaN;this.d.setItem(f,dl(k));c(h.version||NaN)}else{for(k=0;k<this.a.count();k++)l=this.a.stores[k]||null;this.b=h.version||NaN;c(this.b)}else h=b.toJSON(),this.b=1,h.version=this.b,this.d.setItem(f,dl(h)),c(NaN);return e};g.Xe=function(){return!!this.c};g.Ye=function(){};g.Ed=function(){};
g.Fe=function(){};g.Vc=function(){return"memory"};g.close=function(){};g.ae=function(a,b,c,d){a(new ip(this,function(a,b){d(a,b)}))};g.toString=function(){return"SimpleStorage:"+this.Vc()+":"+(this.c+":"+this.b)};function Pp(){Op.call(this,this)}B(Pp,Op);Pp.prototype.uf=function(){return window.localStorage};Pp.prototype.Vc=function(){return"localstorage"};zm.push(function(a,b){if(!b||"localstorage"==b){var c=new Pp,d=new fn;c.connect(a,d);c.$a(function(a){for(var b=0;b<a.stores.length;b++)Ko(c,a.stores[b].getName()).clear()})}});function Qp(){Op.call(this,this)}B(Qp,Op);Qp.prototype.uf=function(){return window.sessionStorage};Qp.prototype.Vc=function(){return"sessionstorage"};
zm.push(function(a,b){if(!b||"sessionstorage"==b){var c=new Qp,d=new fn;c.connect(a,d);c.$a(function(a){for(var b=0;b<a.stores.length;b++)Ko(c,a.stores[b].getName()).clear()})}});function Rp(a,b){this.a=t(a)?a:4194304;this.b=b||"websql"}g=Rp.prototype;
g.connect=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,h=c.b?isNaN(f)?1:f+1:c.version;rg(e.logger,a+": changing version from "+b.version+" to "+h);var k=!1,l=0;b.changeVersion(b.version,h+"",function(a){e.$a(function(b){k=!0;for(var d=0;d<c.count();d++){var f=Z(b,(c.stores[d]||null).getName()),f=f?Sn(f,c.stores[d]||null):null;Sp(e,a,c.stores[d]||null,function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.stores[d]||null,ln(c,f.getName())||(c instanceof fn?gn(c,f):(f="DROP TABLE "+
Pn(f),W(e.logger,f),a.executeSql(f,[],function(){},function(a,b){throw b;})))},a,b)},function(c){var d=e.logger;d&&kg(d,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+h+" on "+a);throw c;},function(){if(k){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");V(e.logger,a+":"+b.version+" ready"+f);d(b)}else P(e.logger,a+": changing version voided.")})}function d(a,b){t(b)?(e.wa=null,h.H(b)):(e.wa=a,h.callback(parseFloat(f)))}var e=this,f=NaN,
h=new te,k=null;try{"sqlite"==this.b?p.sqlitePlugin?(k=p.sqlitePlugin.openDatabase(a,"",a,this.a),k.readTransaction||(k.readTransaction=k.transaction),k.changeVersion=function(a,b,c,d,e){k.transaction(c,d,e)}):(P(this.logger,"sqlitePlugin not found."),k=null,this.Ze=Error("sqlitePlugin not found.")):k=p.openDatabase(a,"",a,this.a)}catch(l){if("SECURITY_ERR"==l.name)P(this.logger,"SECURITY_ERR for opening "+a),k=null,this.Ze=new Im(l);else throw l;}if(k){var f=k.version||"",m="database "+a+(0==f.length?
"":" version "+k.version);null!=b.version&&b.version==k.version?(rg(e.logger,"Existing "+m+" opened as requested."),d(k)):this.$a(function(a){(a=Zn(b,a,!0,!1))?(0==f?rg(e.logger,"New "+m+" created."):b.b?rg(e.logger,"Existing "+m+" opened and schema change for "+a):rg(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(k,b)):(rg(e.logger,"Existing "+m+" with same schema opened."),d(k))},null,k)}else d(null,this.Ze);return h};g.Vc=function(){return this.b};g.Ze=null;
g.wa=null;g.logger=O("ydn.db.con.WebSql");g.Ye=function(){};g.Ed=function(){};
function Tp(a){var b=a.k,c="CREATE TABLE IF NOT EXISTS "+Pn(a)+" (",d=a.b,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");if(!a.Ac||!a.keyPath&&0==a.indexes.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],h=0,k=a.indexes.length;h<k;h++){var l=a.index(h),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Oa(m)+" ("+d+" "+b+", "+l.c+" "+l.h+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=
l.type&&v(n)&&(n="CREATE "+m+" INDEX IF NOT EXISTS "+Oa(a.getName()+"-"+l.getName())+" ON "+Pn(a)+" ("+l.c+")",e.push(n)),n=l.c,-1==f.indexOf(n)&&(c+=", "+n+" "+l.h+m,f.push(n))}e.unshift(c+")");return e}g.We=function(){return this.wa?parseFloat(this.wa.version):void 0};
g.$a=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var r=Eb(e,"sql");V(f.logger,"Parsing table schema from SQL: "+r);for(var s=r.substr(r.indexOf("("),r.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),y=void 0,A,r=[],I=!1,M=!1,N=0;N<s.length;N++){var ia=s[N].match(/\w+|"[^"]+"/g),db=ab(ia,function(a){return a.toUpperCase()}),L=La(ia[0],
'"'),ia=Gn(db[1]);if(-1!=db.indexOf("PRIMARY")&&-1!=db.indexOf("KEY")){A=ia;if(v(L)&&!wa(L)&&"_ROWID_"!=L){var $c=L.split(","),y=L;1<$c.length&&(y=$c,A=void 0)}-1!=db.indexOf("AUTOINCREMENT")&&(I=!0)}else if("_ROWID_"!=L)if("_default_"==L)M=!0;else{var kk="UNIQUE"==db[2];ta(L,e.tbl_name+"-")&&(L=L.substr(e.tbl_name.length+1));db=new Fn(L,ia,kk);r.push(db)}}if(ta(e.name,"ydn.db.me:")){var Hd=e.name.split(":");if(3<=Hd.length){var ye=Hd[1],y=new Fn(Hd[2],ia,kk,!0),s=gb(r,function(a){return a.getName()==
Hd[2]});0<=s?r[s]=y:r.push(y);s=gb(k,function(a){return a.getName()===ye});0<=s?(N=k[s],k[s]=new cn(N.getName(),N.keyPath,I,A,r,void 0,!M)):k.push(new cn(ye,void 0,!1,void 0,[y]));V(f.logger,'multi entry index "'+y.getName()+'" found in '+ye+(-1==s?"*":""))}else P(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else N=gb(k,function(a){return a.getName()===e.name}),0<=N?(s=k[N].index(0),r.push(s),k[N]=new cn(e.name,y,I,A,r,void 0,!M)):(r=new cn(e.name,y,I,A,r,void 0,!M),k.push(r))}}d=new Yn(h,
k);a(d)}}var f=this,h=(c=c||this.wa)&&c.version?parseFloat(c.version):void 0,h=isNaN(h)?void 0:h,k=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.$a(a,b,c)},function(a){var b=f.logger;b&&kg(b,"opening tx: "+a.message);throw a;},e)};
function Sp(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){h++;h==k.length&&(d(!0),d=null)},function(b,e){h++;h==k.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new Hm(e,f);})}var h=0,k=Tp(c),l="Create";if(e){e=en(c,e);if(0==e.length){V(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";P(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");k.unshift("DROP TABLE IF EXISTS "+
Oa(c.getName()))}V(a.logger,l+" table: "+c.getName()+": "+k.join(";"));for(a=0;a<k.length;a++)f(k[a])}g.Xe=function(){return!!this.wa};g.close=function(){this.wa=null};
g.ae=function(a,b,c,d){function e(a){V(k.logger,k+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function h(b){a(b)}var k=this;null===this.wa&&(a(null),d("abort",this.Ze));c==$l?this.wa.readTransaction(h,e,f):c==bm?this.wa.changeVersion(this.wa.version,this.wa.version+1+"",h,e,f):this.wa.transaction(h,e,f)};
zm.push(function(a,b){if(ja(p.openDatabase)&&(!b||"websql"==b)){var c=new Rp,d=new fn;W(c.logger,"deleting websql database: "+a);var d=c.connect(a,d),e=function(){var b=c.logger;b&&lg(b,"all tables in "+a+" deleted.",void 0)};F(d,function(){c.ae(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var q=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=q.name&&"sqlite_sequence"!=q.name&&(m++,V(c.logger,"deleting table: "+
q.name),b.executeSql("DROP TABLE "+q.name))}W(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],am,e)});Ae(d,function(){P(c.logger,"Connecting "+a+" failed.")})}});Rp.prototype.Fe=function(){};Rp.prototype.toString=function(){return"WebSql:"+(this.wa?":"+this.wa.version:"")};so.prototype.xf=function(a){return"indexeddb"==a&&cm?new Mp(this.k,this.w):"sqlite"==a&&p.sqlitePlugin?new Rp(this.k,"sqlite"):"websql"==a&&ja(p.openDatabase)?new Rp(this.k):"localstorage"==a&&window.localStorage?new Pp:"sessionstorage"==a&&window.sessionStorage?new Qp:"memory"==a?new Op:null};function Up(a,b){Ie.call(this);this.d=b;this.b=[];if(a>this.d)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.b.push(this.a())}B(Up,Ie);Up.prototype.a=function(){return{}};Up.prototype.c=function(a){if(x(a))if(ja(a.u))a.u();else for(var b in a)delete a[b]};Up.prototype.l=function(){Up.f.l.call(this);for(var a=this.b;a.length;)this.c(a.pop());delete this.b};function Vp(){this.a=[];this.c=new Mf;this.d=new Mf;this.i=1;this.g=new Up(0,4E3);this.g.a=function(){return new Wp};this.h=new Up(0,50);this.h.a=function(){return new Xp};var a=this;this.b=new Up(0,2E3);this.b.a=function(){return String(a.i++)};this.b.c=function(){}}O("goog.debug.Trace");function Xp(){this.time=this.count=0}Xp.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Wp(){}
function Yp(a,b,c){var d=[];-1==b?d.push("    "):d.push(Zp(a.eventTime-b));d.push(" ",$p(a.eventTime-0));0==a.a?d.push(" Start        "):1==a.a?(d.push(" Done "),d.push(Zp(a.c-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.b&&d.push("[VarAlloc ",a.b,"] ");return d.join("")}Wp.prototype.toString=function(){return null==this.type?this.comment:"["+this.type+"] "+this.comment};
Vp.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.a.length;d++){var e=this.a[d];1==e.a&&c.pop();a.push(" ",Yp(e,b,c.join("")));b=e.eventTime;a.push("\n");0==e.a&&c.push("|  ")}if(0!=this.c.ga()){var f=qa();a.push(" Unstopped timers:\n");Kf(this.c,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",$p(b.startTime),")\n")})}b=this.d.ya();for(d=0;d<b.length;d++)c=this.d.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function Zp(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function $p(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Vp;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function aq(a){a.h||(a.h=new J);return a.h}so.prototype.addEventListener=function(a,b,c,d){if("ready"==a)mf(aq(this),a,b,c,d);else{var e="created error fail ready deleted updated versionchange".split(" "),f=function(a){if(!hb(e,a))throw new U('Invalid event type "'+a+'"');};if(ga(a))for(var h=0;h<a.length;h++)f(a[h]);else f(a);ef(aq(this),a,b,c,d)}};so.prototype.removeEventListener=function(a,b,c,d){nf(aq(this),a,b,c,d)};so.prototype.Sa=function(a){K(aq(this),a)};function bq(a,b,c){uo.call(this,a,b,c)}B(bq,Lp);function cq(a){for(var b=ko(a),c=0;c<b.stores.length;c++);b=(b=Rm)||Rm;b=to(a,b,!1,void 0,void 0,void 0);this.b=a.sd(b,a.P);this.d=!1;on(a,this.k,this);this.a=1E4;this.g=fg.value;this.c=0;this.o=z(this.p,this);this.h=!1;this.i={}}function dq(a){if(a.a&&a.c>=a.a){var b=a.a/100;100<b&&(b=100);F(a.b.keys("db-logger",null,b),function(a){a=a.map(function(a){return new Lm("db-logger",a)});F(this.b.remove(a),function(){F(this.b.count("db-logger"),function(a){this.c=a},this)},this)},a)}}
function eq(){var a=fq;a.a=1E4;dq(a)}cq.prototype.k=function(){this.a&&(this.d=!0,F(this.b.count("db-logger"),function(a){this.c=a;dq(this)},this))};function gq(a){var b=fq;if(a!=b.h){var c=pg();a?ig(c,b.o):(c=c.a)&&jb(c,b.o);b.h=a}}cq.prototype.p=function(a){if(this.d){var b=a.b;ta(b,"ydn.db.")||this.i[b]||!(b=a.d)||b.value<=this.g||(a={exception:a.a,level:b.value,logger:a.b,name:b.name,time:a.g,message:a.getMessage(),seq:a.i},this.b.put("db-logger",a),this.c++,dq(this))}};var fq=null;function hq(a){return ab(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")};function iq(){this.b=-1};function jq(a,b){this.a=a;this.filter=b||null;this.prefix=""}jq.prototype.count=function(){return this.a.count("log")};jq.prototype.log=function(){};var kq,il,lq=O("ydn.crm"),mq=null,nq={};function oq(a,b){"sync"==b&&(x(a["lg-cc"])&&Bk(!!a["lg-cc"].newValue),x(a["lg-br"])&&gq(!!a["lg-br"].newValue),x(a["cp-po"])&&(nq["cp-po"]=a["cp-po"].newValue||pq))}var qq=!1,rq="";qa();
function sq(){var a=new te,b=p.CRMinInbox.sugarcrm.Version;chrome.storage.local.get("ydn-crm-track",function(c){var d=c["ydn-crm-track"];c="jsc/crmininbox-"+b.release+".js";navigator.onLine&&"Edge"==d?c="https://ydn-src-1.storage.googleapis.com/jsc/crmininbox-edge.js":"Beta"==d&&b.beta?c="jsc/crmininbox-"+b.beta+".js":"RC"==d&&b.rc&&(c="jsc/crmininbox-"+b.rc+".js");a.callback(c);d={};d["front-end-src"]=c;chrome.storage.local.set(d)})}
function tq(){var a;chrome&&chrome.runtime&&chrome.runtime.id?(a="9","ldikiokclnbceabnlbkabmcacpiednop"==chrome.runtime.id?a="8":"iccdnijlhdogaccaiafdpjmbakdcdakk"==chrome.runtime.id&&(a="6"),a="UA-33861582-"+a):a=null;if(a&&!p._gaq){p._gaq=[];p._gaq.push(["_setAccount",a]);p._gaq.push(["_gat._forceSSL"]);p._gaq.push(["_trackPageview"]);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="https://ssl.google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];
b.parentNode.insertBefore(a,b)}}
function uq(){if(!qq){qq=!0;tq();var a;a="Yathit CRMinInbox ydn.crm.version 0.16.7 (dev)";Hk("ydn.crm");Hk("ydn.ds");p.console.info(a);p.console.info("API documentation: http://crm.yathit.com/\nFeedback and suggestion: https://yathit.uservoice.com/\nBug report: https://github.com/yathit/sugarcrm-gmail-chrome-extension");Bk(!1);sq();il||(kq||(kq=new nk(0)),il=new vl(kq),hl());mq=new bq("ydn.crm",{stores:[{name:"log",keyPath:"key"},{name:"db-logger",autoIncrement:!0,indexes:[{name:"level"},{name:"time"},
{name:"name"},{name:"name, time",keyPath:["name","time"]}]},{name:"default",autoIncrement:!0}]});fq=new cq(mq);eq();fq.g=300;fq.i["ydn.db.tr.DbOperator"]=!0;gq(!1);on(mq,function(){F(mq.get("default","install-id"),function(a){a?rq=a["install-id"]:(rq=qa()+Math.random().toFixed(8).substr(2),a={},a["install-id"]=rq,mq.put("default",a,"install-id"))})});lg(lq,"Starting ydn.crm.App:0.16.7");var b=["lg-cc","cp-po","lg-br"];chrome.storage.sync.get(b,function(a){for(var d={},e=0;e<b.length;e++)t(a[b[e]])&&
(d[b[e]]={newValue:a[b[e]]});oq(d,"sync")});chrome.storage.onChanged.addListener(oq);sl=Ik=new jq(mq,function(a){return!a||a.HttpRequestData&&"https://mail.google.com/mail/feed/atom/bazinga"==a.HttpRequestData.path?null:a});window.onerror=function(a,b,e,f){var h="";f&&f instanceof Error&&(h=f.stack+"");Jk({message:a,url:b,lineNumber:e,stack:h})}}};function vq(a){this.data=a}vq.prototype.r=function(){return this.data.id.$t};vq.prototype.Bd=function(){return this.data.title?this.data.title.$t:void 0};vq.prototype.N=function(){return this.data.content||null};function wq(a){this.data=a}B(wq,vq);O("ydn.gdata.base");O("ydn");function xq(a){if(!u(a))throw new Am("Array required.");if(t(void 0))return a=ab(a,function(a){return a[void 0]}),xq(a);for(var b=Number.NaN,c=-1,d=0;d<a.length;d++)!isNaN(a[d])&&(isNaN(b)||a[d]>b)&&(b=a[d],c=d);return{value:b,index:c}};O("ydn.xml");function yq(a){var b;if(t(a.id))b=a.id.$t;else if(t(a.batch$id))b=a.batch$id.$t;else if(t(a.a))b=a.a.$t;else throw new Am("id or batch:id required.");this.id=b;this.data=a}B(yq,wq);g=yq.prototype;g.logger=O("ydn.gdata.Entry");g.ke=function(){return this.kind};g.getData=function(){return this.data};g.Bd=vq.prototype.Bd;g.r=function(){return this.id};function zq(a){return a.id.match(/\w+$/)[0]}g.zj=["id","batch$id","link","category"];g.N=vq.prototype.N;g.setTitle=function(){throw new bo;};
g.update=function(a){var b=["batch$status","batch$operation","status"],c;for(c in a.data)a.data.hasOwnProperty(c)&&x(a.data[c])&&!hb(b,c)&&!hb(this.zj,c)&&(this.data[c]=a.data[c])};function Aq(a){var b,c=a.match(/^\D*0*(\d{1,2}\D)?\D*0*(.+)/);c?(b=c[1].replace(/\D/g,""),a=c[2].replace(/\D/g,"")):a=a.replace(/\D/g,"");return{sf:b,Wa:a}};function Bq(a){yq.call(this,a);a=(a=this.id.match(/https?:\/\/www.google.com\/m8\/feeds\/(group|contact|batch)s?\/([^\/]+)\/?(\w+)\/?(\w*)?/))?{wk:"m8",kind:a[1],user_id:a[2]?a[2].replace("%40","@"):"",projection:a[3],id:a[4]}:null;window.console.assert(!!a,"Invalid m8 entry: "+this.id);this.user_id=a.user_id;window.console.assert(a.kind==this.kind,"Invalid kind: "+a.kind+" vs "+this.kind)}B(Bq,yq);Bq.prototype.logger=O("ydn.gdata.m8.Entry");Bq.prototype.type="m8";
Bq.prototype.toString=function(){var a=this.id?zq(this):void 0;return"m8.Entry."+this.kind+":"+a};function Cq(a,b,c,d,e,f){this.b=a;this.domain=b;this.module=c;this.a=d;this.c=w(e)?e:NaN;this.d=w(f)?f:NaN}Cq.prototype.R=function(){return this.b+"://"+this.domain+"/"+this.module+"/"+this.a};function Dq(a){Bq.call(this,a)}B(Dq,Bq);Dq.prototype.kind="contact";Dq.prototype.logger=O("ydn.gdata.m8.ContactEntry");Dq.prototype.ke=function(){return"contact"};Dq.prototype.getName=function(a){var b=a?"":this.Bd();if(a||0==b.length)a=this.getData().gd$name,x(a)&&(b=a.gd$fullName.$t||"",0==b.length&&(b=(a.gd$givenName.$t||"")+" "+(a.gd$familyName.$t||"")));return ya(b)};function Eq(a){var b=a.data.gd$email;a=[];for(var b=u(b)?b:b?[b]:[],c=0;c<b.length;c++)a.push(b[c].address);return a}
function Fq(a){a=a.data.gd$phoneNumber;a=u(a)?a:x(a)?[a]:[];for(var b=[],c=0;c<a.length;c++)a[c].$t&&!wa(a[c].$t)&&b.push(a[c].$t);return b}function Gq(a,b){return"https://mail.google.com/mail/u/"+(b||0)+"/#contact/"+zq(a)}
function Hq(a,b,c,d){a=a.getData();a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var e=0;e<a.length;e++){var f;f=a[e];if(x(f)&&v(f.value)){var h=f.value;f=f.label;if(h=h?h.match(/(\w+):\/\/([^\/]+)\/([^\/]+)\/(.*)/):null){var k=NaN,l=NaN;if(v(f)){var m=f.indexOf("#"),n=f.indexOf("-");0<m&&0<n&&n>m&&(k=parseInt(f.substring(m,n),10),l=parseInt(f.substring(n),10))}f=new Cq(h[1],h[2],h[3],h[4],k,l)}else f=null}else f=null;if(f&&!("sugarcrm"!=f.b||
b&&b!=f.domain||d&&d!=f.a||c&&c!=f.module))return f}return null};function Iq(a,b){var c;c=a.replace("@","%40");c="http://www.google.com/m8/feeds/contacts/"+c+"/base/"+ ++Jq;b.id={$t:c};Bq.call(this,b)}B(Iq,Dq);var Jq=0;function Kq(a,b,c){this.c=a;this.a=b;this.b=c;this.kind=Lq}var Lq="d";
function Mq(a,b){var c,d={gd$email:[{address:a.a}]};a.b&&(d.gd$name={gd$fullName:{$t:a.b}});c=new Iq(a.c,d);for(var d=[],e=0;e<b.length;e++){for(var f=e,h=c,k=b[e],l=0,m=Eq(h),n=Eq(k),q=0;q<m.length;q++)for(var r=m[q],s=0;s<n.length;s++){var y=n[s];r&&r==y&&(l+=1)}m=0;r=h.data.gd$name;s=k.data.gd$name;if(r&&s)for(y=["gd$familyName","gd$givenName","gd$additionalName","gd$fullName"],n=[.06,.06,.06,.12],q=0;4>q;q++){var A=r[y[q]],I=s[y[q]];A&&I==A&&(m+=n[q])}q=0;n=h.Bd();r=k.Bd();n&&n==r&&(q+=.2);s=
0;h=Fq(h);k=Fq(k);r=h.length;for(n=[];r--;){s=h[r];y=k.length;for(n[r]=0;y--;)I=k[y],s.$t&&I.$t&&((A=s)&&I&&0!=A.length&&0!=I.length?(A=A.trim(),I=I.trim(),A=Aq(A),I=Aq(I),A=A.sf&&A.Wa&&A.sf==I.sf&&A.Wa==I.Wa?6<=A.Wa.length?1:4<=A.Wa.length?.8:.4:A.Wa&&4<=A.Wa.length&&A.Wa==I.Wa?8<=A.Wa.length?.8:4<=A.Wa.length?.6:.4:0):A=0,n[r]=Math.max(n[r],.7*A));s=xq(n).value}d[f]=l+m+q+s}c=[];for(e=0;e<b.length;e++){f=c;l=d[e];m=qb;n=0;k=f.length;for(h=void 0;n<k;)q=n+k>>1,r=m(l,f[q]),0<r?n=q+1:(k=q,h=!r);f=
h?n:~n;0>f?(nb(c,-(f+1),0,d[e]),l=b.splice(e,1),nb(b,-(f+1),0,l[0])):nb(c,f,0,d[e])}}Kq.prototype.toString=function(){return"ContactModel:"+this.a};function Nq(a,b,c){this.c=a;this.b=b;this.a=c;this.id=this.b+(this.a?"-"+this.a:"")}Nq.prototype.send=function(a,b){var c=new Oq(a),d=this.a;c.i=this.b;c.h=d;b&&(c.b=b);var d=c.d,e=this.c,f=c.toJSON();Pq(e).postMessage(f);e.a.push(c);50<e.a.length&&(e.a.length-=1);return d};function Qq(a){H.call(this,a.req||"event");this.c=a}B(Qq,H);Qq.prototype.getMessage=function(){return this.c};Qq.prototype.getData=function(){return this.c.data};function Oq(a){this.id="i"+this.count();this.req=a;this.c=!0;this.a=this.b=null;this.d=new Wl;this.g=NaN}Oq.prototype.r=function(){return this.id};var Rq=0;g=Oq.prototype;g.count=function(){Rq++;return Rq};
g.listen=function(a){if(a&&a.id==this.id){this.b=a.data;var b=a.error;b&&(b instanceof Error?this.a=b:x(b)?(this.a=Error(b.message),this.a.name=b.name,this.a.source=b,this.a.result=this.b):(this.a=Error(b),this.a.name="UnknownError"));a.done?(this.c=!1,this.a?this.d.H(this.a):this.d.callback(this.b),window.clearTimeout(this.g)):Xl(this.d,a.data);return!0}return!1};g.toString=function(){return"Message:"+this.id+(this.c?"*":"")};g.getData=function(){return this.b};g.getError=function(){return this.a};
g.toJSON=function(){var a=this;this.g=window.setTimeout(function(){if(a.c){var b=Error("message timeout");b.name="TimeOutError";a.listen({id:a.id,req:a.req,error:b})}},1E4);return{id:this.id,req:this.req,group:this.i,name:this.h,data:this.b}};function Sq(a){J.call(this);var b=v(a)?null:a;this.name=v(a)?a:a.name;this.a=[];this.g=b;this.b=null;this.c={}}B(Sq,J);Sq.prototype.l=function(){if(this.b){var a=this;this.b.disconnect(function(){a.b=null;a.a.length=0})}else this.a.length=0};
Sq.prototype.d=function(a){if(a)if(a.id)for(var b=this.a.length-1;0<=b;b--){if(this.a[b].r()==a.id){if(this.a[b].listen(a)){this.a[b].c?25<b&&(a=this.a.splice(b,1),this.a.unshift(a[0])):this.a.splice(b,1);break}break}}else"info"==a.req?(a.data=this.g,this.b.postMessage(a)):"html-body-inner"==a.req?(window.console.log("html",a),a.req="",a.done=!0,a.data=document&&document.body?document.body.innerHTML:"",this.b.postMessage(a)):K(this,new Qq(a))};Sq.prototype.toString=function(){return"Pipe:"+this.name};
function Tq(a,b,c){b=b||Uq;var d=b+(c?"-"+c:"");a.c[d]||(a.c[d]=new Nq(a,b,c||""));return a.c[d]}function Pq(a){if(!a.b){a.b=chrome.runtime.connect({name:a.name});var b=z(a.d,a);a.b.onMessage.addListener(b);a.b.onDisconnect.addListener(function(){a.b.onMessage.removeListener(b);a.b=null;a.a.length=0})}return a.b}var Vq=null;function Wq(){if(!Vq){var a=Uq+"-"+qa();Vq=new Sq(a)}return Vq}function Xq(a){var b=a;v(a)&&(b={group:a,name:a+"-"+qa()});Vq=new Sq(b)}var Uq="default";
function Yq(a,b){return Tq(Wq(),a,b)};var Zq="Accounts Calls Campaigns Contacts Documents Meetings Emails EmailTemplates Employees Leads Notes Opportunities Tasks Teams TeamSets Users".split(" "),$q="Accounts Contacts EmailTemplates Leads Notes Tasks Meetings Calls Opportunities Emails".split(" "),ar=["Accounts","Contacts","Leads"],br=["Contacts","Leads","Accounts"],cr=["Meetings","Calls","Tasks","Opportunities"];function dr(a){a=Zq.indexOf(a);return Zq[a]};function er(a,b,c){this.domain=a;this.module=b;this.a=c||{}}function fr(a){return null!=a.a.id}g=er.prototype;g.getData=function(){return this.a};g.r=function(){return this.a.id};function gr(a){return a.a?+hr(a.a.date_modified):NaN}function ir(a){return"Tasks"==a?"date_due":"Opportunities"==a?"date_closed":"date_start"}
function jr(a){if(!a.a)return"";if(a.a.name)return a.a.name;var b=a.a.full_name||a.a.name;return b?b:a.a.first_name||a.a.last_name?(b=(a.a.first_name||"").trim(),a=(a.a.last_name||"").trim(),b+" "+a):a.a.id}g.value=function(a){return this.a[a]};g.toJSON=function(){return{domain:this.domain,module:this.module,obj:this.a}};g.toString=function(){return"Record:"+this.module+":"+(this.a?this.a.id:void 0)};function kr(a,b,c){b&&(b.gd$city&&a[c+"_address_city"]!=b.gd$city.$t&&(a[c+"_address_city"]=b.gd$city.$t),b.gd$country&&a[c+"_address_country"]!=b.gd$country.$t&&(a[c+"_address_country"]=b.gd$country.$t),b.gd$postcode&&a[c+"_address_postalcode"]!=b.gd$postcode.$t&&(a[c+"_address_postalcode"]=b.gd$postcode.$t),b.gd$region&&a[c+"_address_state"]!=b.gd$region.$t&&(a[c+"_address_state"]=b.gd$region.$t),b.gd$street&&a[c+"_address_street"]!=b.gd$street.$t&&(a[c+"_address_street"]=b.gd$street.$t),b.gd$housename&&
a[c+"_address_street_2"]!=b.gd$neighborhood.$t&&(a[c+"_address_street_2"]=b.gd$neighborhood.$t),b.gd$neighborhood&&a[c+"_address_street_3"]!=b.gd$city.$t&&(a[c+"_address_street_3"]=b.gd$city.$t))};function lr(a,b){this.parent=a;this.da=b}lr.prototype.yc=function(){return mr(this.parent.module).module_fields[this.da]};function nr(a){return(a=a.yc())?a.group:""}lr.prototype.nb=function(){return this.parent.module.value(this.da)};lr.prototype.gd=function(){return this.nb()};function or(a){a=a.yc();return v(a.label)?a.label.replace(/:$/,""):a.label}function pr(a){return(a=a.yc())?a.type||"varchar":"varchar"}function qr(a){return(a=a.yc())?!!a.calculated:!1}
var rr={pk:"add",qk:"edit",rk:"optout",sk:"primary",tk:"remove"};lr.prototype.a=function(){return[]};lr.prototype.toString=function(){return this.parent+";Field:"+this.da};lr.prototype.ai=function(a){if(qr(this)||a===this.nb())return null;var b={};b[this.da]=a;return b};function sr(a,b){lr.call(this,a,b)}B(sr,lr);sr.prototype.nb=function(){var a;a:{var b=this.parent;a=this.da;var c=b.module.value("email");if(u(c)){for(b=0;b<c.length;b++){var d=c[b];if(d.email_address_id==a){a=d.email_address;break a}}a=null}else a=b.module.value(a)}return a};sr.prototype.yc=function(){return mr(this.parent.module).module_fields[this.da]||mr(this.parent.module).module_fields.email};
sr.prototype.ai=function(a){if(!a)return null;var b=this.parent;if(tr(b)){for(var b=ur(b),c=0;c<b.length;c++){var d=b[c];if(b[c].email_address_id==this.da){if(d.email_address==a)return null;b[c].email_address=a;b[c].email_address_caps=a.toUpperCase();return{email:b}}}b={};b[this.da]=a;return b}if(b.module.value(this.da)==a)return null;b={};b[this.da]=a;return b};
function vr(a){var b=a.parent;if(tr(b)){for(var c=ur(b),b=0;b<c.length;b++)if(c[b].email_address_id==a.da)return a=fo(c),a.splice(b,1),{email:a};return null}return b.module.value(a.da)?(b={},b[a.da]=void 0,b):null}
sr.prototype.a=function(){var a;a:{var b=this.parent;a=this.da;var c=b.module.value("email");if(u(c)){for(b=0;b<c.length;b++){var d=c[b];if(d.email_address_id==a){a="1"==d.opt_out;break a}}a=null}else a="email"==a?"1"==b.module.value("email_opt_out"):null}return[{name:"remove",label:"Remove"},{name:"optout",label:"Opt out",type:"bool",value:a}]};function wr(a,b){this.qb=null;this.a=a||{};this.bg=fo(b||[])}wr.prototype.render=function(a){this.qb=document.createElement("div");this.qb.className="more-menu";var b=xr(this.a.className||"more-vert"),c=document.createElement("div");c.className="svg-button";c.appendChild(b);b=yr(this.bg);b.classList.add("flyout-menu");this.qb.appendChild(c);this.qb.appendChild(b);a.appendChild(this.qb)};
function zr(a){var b=Jc(a.target,null,"goog-menuitem");if(b){a.preventDefault();a.stopPropagation();a=b.getAttribute("name");var c=b.classList.contains("goog-menuitem-disabled"),d=Jc(b,null,"flyout-menu");E(d,!1);setTimeout(function(){E(d,!0)},1E3);return c?null:a}return null}wr.prototype.e=function(){return this.qb};
function yr(a){for(var b=ec(),c=[],d=0;d<a.length;d++){var e=a[d];if(e){var f=[b.j("div",{"class":"goog-menuitem-content"},e.label)];if("bool"==e.type){var h=b.j("div",{"class":"goog-menuitem-checkbox",role:"menuitem"});f.unshift(h)}e.children&&(h=xr("arrow-drop-right"),h.classList.add("left-arrow"),f.unshift(h));h={"class":"goog-menuitem",role:"bool"==e.type?"goog-menuitem-checkbox":"menuitem"};e.title&&(h.title=e.title);f=b.j("div",h,f);f.setAttribute("name",e.name);e.value&&f.classList.add("goog-option-selected");
e.children&&(h=yr(e.children),f.appendChild(h));e.disabled&&f.classList.add("goog-menuitem-disabled");c.push(f)}else e=b.j("div",{"class":"goog-menuseparator",role:"separator"}),c.push(e)}return b.j("div",{"class":"goog-menu goog-menu-vertical",role:"menu"},c)}function Ar(a,b){var c=document.createElement("span");c.className="flyout-button";var d=xr("more-vert"),e=yr(b);e.classList.add("flyout-menu");c.appendChild(d);c.appendChild(e);a.appendChild(c)}
function Br(a,b,c){(a=a.e().querySelector('div.goog-menuitem[name="'+b+'"]'))&&(c?a.classList.remove("goog-menuitem-disabled"):a.classList.add("goog-menuitem-disabled"))}function Cr(a,b){var c=a.e().querySelector('div.goog-menuitem[name="sync"]');c&&(c.querySelector(".goog-menuitem-content").textContent=b)};function Dr(a,b){this.module=a;this.Ca=b||""}g=Dr.prototype;g.Jb=function(a){var b=mr(this.module),c;for(c in b.module_fields)if(c==a)return!0;return!1};g.hg=function(){var a=mr(this.module),b=[],c;for(c in a.module_fields){var d=a.module_fields[c];this.Ca&&d.group==this.Ca?b.push(c):this.Ca||d.group||b.push(c)}return b};function Er(a,b){var c=a.module.value(b);return v(c)?c:""}g.Gf=function(){var a=this.Ca.replace("_"," ");return a=a.charAt(0).toUpperCase()+a.substr(1)};g.Cd=function(){return null};
g.Ef=function(){return null};function Fr(a,b){Dr.call(this,a,b)}B(Fr,Dr);function Gr(a,b){return a.module.value(a.Ca+"_"+b)}function Hr(a,b,c,d,e,f){var h="";a&&(h+=a);c?h=d?c+" "+d+", "+h:h+(" "+c):d&&(h+=" "+d);h||(h=e||"");h||(h=f||"");b&&(h=b+" "+h);return h}Fr.prototype.Cd=function(){var a=Gr(this,"country"),b=Gr(this,"city"),c=Gr(this,"state"),d=Gr(this,"postalcode"),e=Gr(this,"street")||"",f=Gr(this,"street_2")||"";return Hr(a,b,c,d,e,f)};Fr.prototype.Ef=function(){return{label:"Edit",name:"edit",type:"text"}};function Ir(a,b){Dr.call(this,a,b);this.Ea=[]}B(Ir,Dr);Ir.prototype.a=function(a){var b=Jr(this,a);if(b)return b;b=new lr(this,a);this.Ea.push(b);return b};function Jr(a,b){for(var c=0;c<a.Ea.length;c++)if(a.Ea[c].da==b)return a.Ea[c];return null};function Kr(a){Ir.call(this,a,"email")}B(Kr,Ir);Kr.prototype.hg=function(){var a=this.module.value("email");if(u(a))return a.map(function(a){return a.email_address_id});var a=tr(this),b=mr(this.module),c=[],d;for(d in b.module_fields)"email"!=b.module_fields[d].group||a&&"email"==d||c.push(d);return c};Kr.prototype.a=function(a){var b=Jr(this,a);if(b)return b;b=new sr(this,a);this.Ea.push(b);return b};function tr(a){var b=a.module.value("email");return t(b)?u(b):!!Lr(a.module.parent)}
Kr.prototype.Jb=function(a){var b=this.module.value("email");return u(b)?b.some(function(b){return b.email_address_id==a}):Kr.f.Jb.call(this,a)};function ur(a){var b=a.module.value("email");if(u(b))return b;a=mr(a.module);var c=[],d;for(d in a.module_fields)"email"==a.module_fields[d].group&&c.push({email_address_id:d,email_address:b,primary_address:"0"});return c};function Mr(a){Dr.call(this,a,"name")}B(Mr,Dr);
function Nr(a,b){b=b.trim();if(!a.Jb("last_name"))return{full_name:b?b:void 0};var c={salutation:void 0,full_name:void 0,first_name:void 0,last_name:void 0};if(!b)return c;var d=b.split(/\s+/);if(!a.Jb("last_name"))return{name:b};var e=a.module.value("salutation"),f=a.module.value("first_name"),h=a.module.value("last_name");d[0]==e&&(c.salutation=d.shift(),b=b.substr(e.length+1).trim());if((e=a.Jb("salutation"))&&!(e=f&&d[1]==f)&&(e=2<=d.length))if(e=d[0]){"."!=e.charAt(e.length-1)&&(e+=".");var k=
mr(a.module).module_fields.salutation,e=0<=(k.options?Object.keys(k.options):["Mrs.","Mr."]).indexOf(e)}else e=!1;e&&(c.salutation=d.shift(),b=b.substr(c.salutation.length+1).trim());e=b.indexOf(h);h&&0<=e?(c.first_name=b.substr(0,e-1).trim(),c.last_name=b.substr(e).trim()):(h=b.indexOf(f),f&&0<=h?(c.first_name=f,c.last_name=b.substr(h+f.length+1,b.length).trim()):(c.first_name=d.shift(),c.last_name=d.join(" ")));c.first_name&&(c.full_name=c.first_name);c.last_name&&(c.full_name=c.full_name?c.full_name+
(" "+c.last_name):c.last_name);return c}Mr.prototype.Gf=function(){return"Name"};Mr.prototype.Cd=function(){var a;if(this.Jb("full_name")){a="";var b=this.module.value("full_name");b?a+=b:(a+=this.module.value("first_name")||"",(b=this.module.value("last_name"))&&(a+=" "+b))}else a=this.module.value("name")||"";return a};Mr.prototype.Ef=function(){return{label:"Edit",name:"edit",type:"text"}};function Or(a,b){lr.call(this,a,b)}B(Or,lr);Or.prototype.a=function(){return[{name:"remove",label:"Remove"}]};function Pr(a){Ir.call(this,a,"phone")}B(Pr,Ir);Pr.prototype.a=function(a){var b=this.Ea.indexOf(a);if(0<=b)return this.Ea[b];a=new Or(this,a);this.Ea.push(a);return a};function Qr(a,b){J.call(this);this.parent=a;this.G=b;this.a={}}B(Qr,J);g=Qr.prototype;g.logger=O("ydn.crm.sugarcrm.model.Record");g.r=function(){return this.G.r()};g.value=function(a){return this.G.value(a)};function Rr(a){return fr(a.G)?jr(a.G):""}function Sr(a){return a.G.module}function mr(a){return a.parent.i[Sr(a)]}function Tr(a){return fr(a.G)?(a=(new Cq("sugarcrm",$(a.parent),Sr(a),a.r())).R(),F(Tq(Wq()).send("gdata-list-contact",{externalId:a}),function(a){return a[0]||null})):Ge(null)}
function Ur(a,b){if(!b||0==Object.keys(b))return Ge(!1);var c=fo(a.G.getData()),d;for(d in b)c[d]=b[d];return F(Vr(a.parent,new er($(a.parent),Sr(a),c)),function(a){fr(this.G)&&this.G.r();var b=this.G;if(a){b.a||(b.a={});for(var c in a)b.a[c]=a[c]}fr(this.G)?K(this,new Wr):K(this,new Xr)},a)}function Yr(a){if(!fr(a.G))return He(Error("record not defined."));var b={module:Sr(a),id:a.r()};return Zr(a.parent).send("delete-record",b)}g.l=function(){Qr.f.l.call(this);this.a=null};
function $r(a){return fr(a.G)?as(a.parent,Sr(a),a.r()):null}function bs(a,b){if(b!=a.G)if(b)if(b.module!=a.G.module){var c=a.G.module;a.G=b;K(a,new cs(c,a))}else fr(b)?fr(a.G)?b.r()!=a.G.r()?(a.G.r(),a.G=b,K(a,new Xr(0,a))):(a.G=b,K(a,new Wr(a))):fr(b)&&(a.G=b,K(a,new Xr(0,a))):fr(a.G)&&(a.G.r(),a.G=b,K(a,new Xr(0,a)));else fr(a.G)&&(a.G.a={},K(a,new Xr(0,a)))}g.toString=function(){return"ydn.crm.sugarcrm.model.Record:"+this.G};function ds(a,b){H.call(this,a,b)}B(ds,H);function es(a,b,c,d){H.call(this,"context-change",d);this.c=a;this.o=b||null;this.i=c||null}B(es,ds);function Xr(a,b){H.call(this,"record-change",b)}B(Xr,ds);function cs(a,b){H.call(this,"module-change",b);this.module=a}B(cs,ds);function Wr(a){H.call(this,"record-update",a)}B(Wr,ds);function fs(a,b,c,d){H.call(this,a,d)}B(fs,ds);function gs(a,b,c){H.call(this,"gdata-updated",c)}B(gs,fs);function hr(a){return new Date(a+" GMT")}function hs(a){return a.toISOString().replace("T"," ").replace(/\..+/,"")};function is(a,b,c){J.call(this);this.about=a;a={};if(u(b))for(var d=0;d<b.length;d++)a[b[d].module_name]=b[d];else a=b;this.i=a;this.d=c||{};this.L=new zf(this);this.Re=new er($(this),"Users");js(this);b=Wq();this.L.listen(b,["login","host-permission"],this.lj);this.g=null}B(is,J);g=is.prototype;g.lj=function(a){"login"==a.type?(a=a.getData())&&a.domain==$(this)&&ks(this,a):"host-permission"==a.type&&this.about&&(a=a.getData(),a.grant&&a.grant==$(this)&&(this.about.hostPermission=!0,K(this,new H("hag"))))};
function Lr(a){if(null==a.g&&a.d){var b;b=0<=Qa(a.d?a.d.version||"":"","7");a.g=b}return a.g}function ks(a,b){if(b){var c=a.about.isLogin,d=!!b&&b.isLogin;a.about=b;!c&&d?K(a,new H("login",a)):c&&!d&&K(a,new H("logout",a))}}g.isLogin=function(){return!!this.about.isLogin};function js(a){a.about&&a.about.userName&&F(a.send("login-user"),function(a){a&&a.id&&(this.Re.a=a||{})},a)}function ls(a){return F(a.send("about"),function(a){ks(this,a)},a)}function Zr(a){return Yq("sugarcrm",$(a))}
function $(a){return a.about.domain}function ms(a){return a.about.baseUrl?a.about.baseUrl:"https://"+a.about.domain}g.getInfo=function(){return Fb(this.d)};function as(a,b,c){return Lr(a)?ms(a)+"#"+b+"/"+c:ms(a)+"/index.php?module="+b+"&action=DetailView&record="+c}function ns(a,b,c){var d={};d.domain=$(a);d.baseUrl=a.about.baseUrl||null;d.username=b;d.password=c;return F(a.send("login",d),function(a){ks(this,a)},a)}g.send=function(a,b){return Yq("sugarcrm",$(this)).send(a,b)};
function os(a,b,c,d,e,f){b={store:b};c&&(b.index=c);d&&(d instanceof wl?b.range=d.toJSON():b.key=d);b.prefix=!!e;f&&(b.limit=void 0);return Zr(a).send("query",[b])}function ps(a,b,c){c={store:b,index:"name",q:c,fetchFull:!1};"Notes"==b&&(c.index="content");return Zr(a).send("search",[c])}
function qs(a,b,c,d){var e=document.createElement("div");e.innerHTML=b.ag;var f=b.bh,f=f&&f instanceof Date&&!isNaN(f.getTime())?hs(b.bh):"",h=a.about?a.about.userName||"":"",k;k=a.Re.value("name")||a.about.userName||null;return a.send("new-record",{module:"Emails",record:{assigned_user_id:h,assigned_user_name:k,type:"archived",date_sent:f,description:e.textContent,description_html:b.ag,name:b.subject,from_addr:b.Ci,to_addrs:b.Yj,parent_id:d||"",parent_type:c||"",mailbox_id:b.Bj||"",message_id:b.jg||
"",status:"read"}})}function Vr(a,b){var c={module:b.module,record:b.getData()};return a.send("put-record",c)}g.clone=function(){return new is(this.about,this.i)};g.l=function(){is.f.l.call(this);this.d=null;this.L.u();this.L=null};g.toString=function(){return"ydn.crm.sugarcrm.model.Sugar:"+$(this)};g.Fg=function(a){return F(Yq().send("export-record",a.toJSON()),function(a){return new Dq(a)},this)};function rs(a,b,c,d){is.call(this,a,b,d);this.a=this.b=this.c=null}B(rs,is);rs.prototype.zb=function(){return this.a};
function ss(a){if(!a.a)return He("No SugarCRM Record to link with Gmail contact.");a.a.r();var b=a.a.module,c=a.b;if(!c)return He("Not Gmail contact data to link.");var d=Hq(c,$(a),b);if(d)return He("Contact "+zq(c)+" already link to "+d.a+" with the module "+b);b=new Cq("sugarcrm",$(a),b,a.a.r(),+new Date(c.data.updated.$t),gr(a.a));c={kind:c.ke(),"gdata-id":c.r(),"external-id":{label:b.module+"#"+b.c+"-"+b.d,value:b.R()}};return F(Zr(a).send("link",c),function(a){this.b=new Dq(a);K(this,new es(this.c,
this.b,this.a))},a)}function ts(a){if(!a.a)return He("No SugarCRM Record to unlink with Gmail contact.");var b=a.a.r(),c=a.a.module,d=a.b;if(!d)return He("Not Gmail contact data to link.");var e=Hq(d,$(a),c,b);if(!e)return He("No link exists between SugarCRM "+c+" "+b+" and Gmail Contact "+zq(d));b={kind:d.ke(),"gdata-id":d.r(),"external-id":e.R()};return F(Zr(a).send("unlink",b),function(a){this.b=new Dq(a);K(this,new es(this.c,this.b,this.a))},a)}
function us(a,b){if(a.a)return He("already imported as "+a.a.r()+" in "+a.a.module);var c=a.b;if(!c)return He("no contact gdata to import?");c={module:b,kind:c.ke(),"gdata-id":c.r()};return F(Zr(a).send("import-gdata",c),function(a){this.a=new er($(this),b,a);K(this,new es(this.c,this.b,this.a));return this.a},a)}rs.prototype.Fg=function(a){return F(rs.f.Fg.call(this,a),function(a){this.b=a;K(this,new gs(0,0,this))},this)};
rs.prototype.update=function(a){return this.isLogin()?vs(this,a):Be(ls(this),function(){return vs(this,a)},this)};function ws(a,b,c){for(var d=b.a,e=[],f=0;f<br.length;f++)e[f]={store:br[f],index:"ydn$emails",key:d};return F(Zr(a).send("query",e),function(a){for(var d=0;d<a.length;d++){var e=a[d];if(e.result[0])return new es(b,c,new er($(this),e.store,e.result[0]))}return new es(b,c)},a)}function xs(a){return a.b&&a.a?!!Hq(a.b,$(a),a.a.module,a.a.r()):!1}
function ys(a,b,c){var d=Hq(c,$(a));if(d){var e=[{store:d.module,index:"id",key:d.a}];return F(Zr(a).send("query",e),function(a){if((a=a[0])&&a.result[0])return new es(b,c,new er($(this),a.store,a.result[0]));window.console.warn("link id: "+d.a+" no longer available, deleting..");window.console.error("Removing external id not implemented");ws(this,b,c)},a)}return ws(a,b,c)}
function zs(a,b){if(b){var c=b.a;return F(Yq().send("gdata-list-contact",{email:c}),function(a){a=a.map(function(a){return new Dq(a)});Mq(b,a);return a[0]?ys(this,b,a[0]):ws(this,b)},a)}return Ge(new es(null))}function vs(a,b){return G(zs(a,b),function(a){this.b=a.o;this.c=a.c;this.a=a.i;K(this,a)},function(a){window.console.error(a.stack||a)},a)}
function As(a,b){if(a.a)return He("already exist as "+a.a.r()+" in "+a.a.module);var c=a.c.a;if(!c)return He("No data to import.");new Wl;var d=a.c.b,c={email1:c,full_name:d};d&&0<d.length&&(d=d.split(/\s/),d[0]&&(c.first_name=d[0]),d[1]&&(c.last_name=d[d.length-1]));d={module:b,record:c};return F(Zr(a).send("put-record",d),function(a){this.a=new er($(this),b,a);K(this,new es(this.c,this.b,this.a))},a)};function Bs(a){this.a=a;this.L=new zf(this);this.b=null}Bs.prototype.logger=O("ydn.crm.gmail.Template");function Cs(a,b,c,d,e){G(Ds(a,c.id,d),function(a){var h=c.name;Kg(b).querySelector('input[name="subjectbox"]').value=h;e&&(Kg(b).querySelector('textarea[name="to"]').value=d);var h=Ng(b),k=document.createElement("div");k.innerHTML=a;a=k.querySelectorAll("script");for(var l=0;l<a.length;l++)k.removeChild(a[l]);h.appendChild(k)},function(a){window.console.error(a.stack||a)},a)}
Bs.prototype.d=function(a){if(a.target instanceof ni){var b=a.b;a=a.target.a;var c=this.a;if(a){var d=Mg(b)[0],e=!1;d||(d=c.c?c.c.a:null,e=!!d);d?Cs(this,b,a,d,e):window.alert("A valid recipient email address is required in To input field.")}else window.open(ms(c)+"/index.php?module=EmailTemplates&action=EditView&return_module=EmailTemplates&return_action=DetailView",$(c))}};Bs.prototype.c=function(a){a=a.target;this.L.O(a,"action",this.d);this.L.O(a,"cc",this.c)};
Bs.prototype.g=function(a){a=a.c;var b=a.b,c=new si(b),d=xr("drive-document"),b=new Gi(d,c,null,b);b.qa("Insert SugarCRM template");Es(this,function(a){for(var b=[],d=0;d<a.length;d++)-1==b.indexOf(a[d].type)&&b.push(a[d].type);for(d=0;d<b.length;d++)if(b[d]){for(var k=new vj(b[d],null,c.b),l=0;l<a.length;l++)if(a[l].type==b[d]){var m=new ni(a[l].name,a[l]);k.sb(m)}c.D(k,!0)}for(l=0;l<a.length;l++)a[l].type||(m=new ni(a[l].name,a[l]),c.D(m,!0));c.D(new ri,!0);c.D(new ni("New template...",null),!0)},
this);a.D(b,!0);this.L.listen(a,"action",this.d);this.L.listen(a,"cc",this.c)};function Fs(a){return 0<=a.indexOf("$contact_name")||0<=a.indexOf("$contact_account_name")}function Es(a,b,c){G(os(a.a,"EmailTemplates",void 0,void 0,void 0,200),function(a){a=a[0];for(var e=[],f=0;f<a.result.length;f++){var h=a.result[f];e.push({id:h.id,name:h.name,type:h.type||"",vk:Fs(h.body_html)})}b.call(c,e)},function(a){throw a;},a)}
function Ds(a,b,c){var d=a.a;if(v(c))return F(d.send("query",[{store:"Contacts",index:"ydn$emails",key:c,limit:1},{store:"Leads",index:"ydn$emails",key:c,limit:1}]),function(a){var f=null;a[0].result[0]?f=new er($(d),"Contacts",a[0].result[0]):a[1].result[0]&&(f=new er($(d),"Leads",a[1].result[0]));return f?(a=new Qr(d,f),Ds(this,b,a)):F(Tq(Wq()).send("gdata-list-contact",{email:c}),function(a){if(a&&a[0]){var c={};a=a[0];var e=0;!a.title||c.name&&c.name==a.title.$t||(c.name=a.title.$t,e++);for(var f=
0;a.gd$email&&f<a.gd$email.length;f++){var n=a.gd$email[f];"http://schemas.google.com/g/2005#work"==n.rel?c.email1!=n.address&&(e++,c.email1=n.address):"http://schemas.google.com/g/2005#home"==n.rel?c.email2!=n.address&&(e++,c.email2=n.address):"http://schemas.google.com/g/2005#other"==n.rel&&c.email!=n.address&&(e++,c.email=n.address)}a.gd$name?(a.gd$name.gd$namePrefix&&c.salutation!=a.gd$name.gd$namePrefix.$t&&(e++,c.salutation=a.gd$name.gd$namePrefix.$t),a.gd$name.gd$givenName&&c.first_name!=a.gd$name.gd$givenName.$t&&
(c.first_name=a.gd$name.gd$givenName.$t,e++),a.gd$name.gd$familyName&&c.last_name!=a.gd$name.gd$familyName.$t&&(c.last_name=a.gd$name.gd$familyName.$t,e++),a.gd$name.gd$fullName&&c.full_name!=a.gd$name.gd$fullName.$t&&(c.full_name=a.gd$name.gd$fullName.$t,e++)):c.full_name=a.title.$t;a.gd$organization&&a.gd$organization[0]&&(f=a.gd$organization[0],f.gd$orgTitle&&f.gd$orgTitle.$t!=c.title&&(c.title=f.gd$orgTitle.$t,e++),f.gd$orgDepartment&&f.gd$orgDepartment.$t!=c.department&&(c.department=f.gd$orgDepartment.$t,
e++),f.gd$orgJobDescription&&f.gd$orgJobDescription.$t!=c.description&&(c.description=f.gd$orgJobDescription.$t,e++));if(a.gd$im)for(f=0;f<a.gd$im.length;f++)"Twitter"==a.gd$im[f].label&&c.twitter!=a.gd$im[f].address?(c.twitter=a.gd$im[f].address,e++):"Facebook"==a.gd$im[f].label&&c.facebook!=a.gd$im[f].address?(c.facebook=a.gd$im[f].address,e++):"Google Plus"==a.gd$im[f].label&&c.googleplus!=a.gd$im[f].address?(c.googleplus=a.gd$im[f].address,e++):"Linkedin"==a.gd$im[f].label&&c.linkedin!=a.gd$im[f].address&&
(c.linkedin=a.gd$im[f].address,e++);a.gContact$birthday&&c.birthdate!=a.gContact$birthday.when&&(c.birthdate=a.gContact$birthday.when,e++);for(f=0;a.gd$phoneNumber&&f<a.gd$phoneNumber.length;f++)if(n=a.gd$phoneNumber[f],n.$t)if("http://schemas.google.com/g/2005#mobile"==n.rel)c.phone_mobile!=n.$t&&(c.phone_mobile=n.$t,e++);else if("http://schemas.google.com/g/2005#work"==n.rel)c.phone_work!=n.$t&&(c.phone_work=n.$t,e++);else if("http://schemas.google.com/g/2005#home"==n.rel)c.phone_home!=n.$t&&(c.phone_home=
n.$t,e++);else if("http://schemas.google.com/g/2005#fax"==n.rel||"http://schemas.google.com/g/2005#home_fax"==n.rel||"http://schemas.google.com/g/2005#work_fax"==n.rel)c.phone_fax!=n.$t&&(c.phone_fax=n.$t,e++);else if(c.phone_other=n.$t)c.phone_other=n.$t,e++;if(a.gd$structuredPostalAddress){n=e=-1;for(f=0;f<a.gd$structuredPostalAddress.length;f++){var q=a.gd$structuredPostalAddress[f];"http://schemas.google.com/g/2005#work"==q.rel||q.primary?e=f:n=f}-1==e&&(n=-1);kr(c,a.gd$structuredPostalAddress[e],
"primary");kr(c,a.gd$structuredPostalAddress[n],"alt")}c=new Qr(d,new er($(d),"Contacts",c));return Ds(this,b,c)}return null},this)},a);if(!v(b)||16>b.length)throw Error("valid template id required, but "+b+" found.");return F(d.send("get",{module:"EmailTemplates",id:b}),function(a){a=a.body_html;if(v(a)){var d=a,h=this.a;a=Lr(h);if(!1===a)var k=document,d=Pa(d,"&")?Ia(d,k):d;if((h=h.Re)&&fr(h)){var k=this.a.i.Users,l;for(l in k.module_fields)k=h.value(l),v(k)&&(a?d=d.replace(new RegExp("{::future::Users::"+
l+"::}","g"),k):(d=d.replace(new RegExp("\\$user_"+l,"g"),k),d=d.replace(new RegExp("\\$contact_user_"+l,"g"),k)))}else P(this.logger,"Login user info not available");if(c&&0<Object.keys(c.G.a).length)for(l in h=mr(c),h.module_fields)k=c.value(l),v(k)&&(d=a?d.replace(new RegExp("{::future::Contacts::"+l+"::}","g"),k):d.replace(new RegExp("\\$contact_"+l,"g"),k));return d}throw Error("Template record: "+b+" does not have body_html");},a)};function Gs(a){for(var b=Hs,c=0;c<b.b.length;c++){var d=b.b[c],e=b.a[a];e&&d.a&&(d.a.children[0].textContent=e.title+" ",e.rd?(d.a.children[1].textContent=e.eg,d.a.children[1].href=e.rd,d.a.children[1].title=e.Ae,d.a.children[1].style.display=""):d.a.children[1].style.display="none",d.a.children[2].textContent=" "+(e.update||""))}}var Hs=new function(){this.a=[];this.b=[]};
function Is(a,b){Hs.a.push({title:a,update:b,type:"n"});var c=Hs.a.length-20;0<=c&&(Hs.a[c]=void 0);c=Hs.a.length-1;Gs(c);return c}function Js(a,b,c,d){var e=Hs.a[a];e&&(e.title=b,c&&(e.update=c),d&&(e.type=d),Gs(a))}function Ks(a,b){var c=Hs.a[a];c&&(c.update=b,c.type="e",Gs(a))}function Ls(a,b,c,d){var e=Hs.a[a];e&&(b?(e.rd=b,e.eg=c,e.Ae=d):(e.rd=void 0,e.eg=void 0,e.Ae=void 0),Gs(a))};function Ms(){this.b=-1;this.b=64;this.a=Array(4);this.g=Array(this.b);this.d=this.c=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.d=this.c=0}B(Ms,iq);
function Ns(a,b,c){c||(c=0);var d=Array(16);if(v(b))for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.a[0];c=a.a[1];var e=a.a[2],f=a.a[3],h=0,h=b+(f^c&(e^f))+d[0]+3614090360&4294967295;b=c+(h<<7&4294967295|h>>>25);h=f+(e^b&(c^e))+d[1]+3905402710&4294967295;f=b+(h<<12&4294967295|h>>>20);h=e+(c^f&(b^c))+d[2]+606105819&4294967295;e=f+(h<<17&4294967295|h>>>15);h=c+(b^e&(f^b))+
d[3]+3250441966&4294967295;c=e+(h<<22&4294967295|h>>>10);h=b+(f^c&(e^f))+d[4]+4118548399&4294967295;b=c+(h<<7&4294967295|h>>>25);h=f+(e^b&(c^e))+d[5]+1200080426&4294967295;f=b+(h<<12&4294967295|h>>>20);h=e+(c^f&(b^c))+d[6]+2821735955&4294967295;e=f+(h<<17&4294967295|h>>>15);h=c+(b^e&(f^b))+d[7]+4249261313&4294967295;c=e+(h<<22&4294967295|h>>>10);h=b+(f^c&(e^f))+d[8]+1770035416&4294967295;b=c+(h<<7&4294967295|h>>>25);h=f+(e^b&(c^e))+d[9]+2336552879&4294967295;f=b+(h<<12&4294967295|h>>>20);h=e+(c^f&
(b^c))+d[10]+4294925233&4294967295;e=f+(h<<17&4294967295|h>>>15);h=c+(b^e&(f^b))+d[11]+2304563134&4294967295;c=e+(h<<22&4294967295|h>>>10);h=b+(f^c&(e^f))+d[12]+1804603682&4294967295;b=c+(h<<7&4294967295|h>>>25);h=f+(e^b&(c^e))+d[13]+4254626195&4294967295;f=b+(h<<12&4294967295|h>>>20);h=e+(c^f&(b^c))+d[14]+2792965006&4294967295;e=f+(h<<17&4294967295|h>>>15);h=c+(b^e&(f^b))+d[15]+1236535329&4294967295;c=e+(h<<22&4294967295|h>>>10);h=b+(e^f&(c^e))+d[1]+4129170786&4294967295;b=c+(h<<5&4294967295|h>>>
27);h=f+(c^e&(b^c))+d[6]+3225465664&4294967295;f=b+(h<<9&4294967295|h>>>23);h=e+(b^c&(f^b))+d[11]+643717713&4294967295;e=f+(h<<14&4294967295|h>>>18);h=c+(f^b&(e^f))+d[0]+3921069994&4294967295;c=e+(h<<20&4294967295|h>>>12);h=b+(e^f&(c^e))+d[5]+3593408605&4294967295;b=c+(h<<5&4294967295|h>>>27);h=f+(c^e&(b^c))+d[10]+38016083&4294967295;f=b+(h<<9&4294967295|h>>>23);h=e+(b^c&(f^b))+d[15]+3634488961&4294967295;e=f+(h<<14&4294967295|h>>>18);h=c+(f^b&(e^f))+d[4]+3889429448&4294967295;c=e+(h<<20&4294967295|
h>>>12);h=b+(e^f&(c^e))+d[9]+568446438&4294967295;b=c+(h<<5&4294967295|h>>>27);h=f+(c^e&(b^c))+d[14]+3275163606&4294967295;f=b+(h<<9&4294967295|h>>>23);h=e+(b^c&(f^b))+d[3]+4107603335&4294967295;e=f+(h<<14&4294967295|h>>>18);h=c+(f^b&(e^f))+d[8]+1163531501&4294967295;c=e+(h<<20&4294967295|h>>>12);h=b+(e^f&(c^e))+d[13]+2850285829&4294967295;b=c+(h<<5&4294967295|h>>>27);h=f+(c^e&(b^c))+d[2]+4243563512&4294967295;f=b+(h<<9&4294967295|h>>>23);h=e+(b^c&(f^b))+d[7]+1735328473&4294967295;e=f+(h<<14&4294967295|
h>>>18);h=c+(f^b&(e^f))+d[12]+2368359562&4294967295;c=e+(h<<20&4294967295|h>>>12);h=b+(c^e^f)+d[5]+4294588738&4294967295;b=c+(h<<4&4294967295|h>>>28);h=f+(b^c^e)+d[8]+2272392833&4294967295;f=b+(h<<11&4294967295|h>>>21);h=e+(f^b^c)+d[11]+1839030562&4294967295;e=f+(h<<16&4294967295|h>>>16);h=c+(e^f^b)+d[14]+4259657740&4294967295;c=e+(h<<23&4294967295|h>>>9);h=b+(c^e^f)+d[1]+2763975236&4294967295;b=c+(h<<4&4294967295|h>>>28);h=f+(b^c^e)+d[4]+1272893353&4294967295;f=b+(h<<11&4294967295|h>>>21);h=e+(f^
b^c)+d[7]+4139469664&4294967295;e=f+(h<<16&4294967295|h>>>16);h=c+(e^f^b)+d[10]+3200236656&4294967295;c=e+(h<<23&4294967295|h>>>9);h=b+(c^e^f)+d[13]+681279174&4294967295;b=c+(h<<4&4294967295|h>>>28);h=f+(b^c^e)+d[0]+3936430074&4294967295;f=b+(h<<11&4294967295|h>>>21);h=e+(f^b^c)+d[3]+3572445317&4294967295;e=f+(h<<16&4294967295|h>>>16);h=c+(e^f^b)+d[6]+76029189&4294967295;c=e+(h<<23&4294967295|h>>>9);h=b+(c^e^f)+d[9]+3654602809&4294967295;b=c+(h<<4&4294967295|h>>>28);h=f+(b^c^e)+d[12]+3873151461&4294967295;
f=b+(h<<11&4294967295|h>>>21);h=e+(f^b^c)+d[15]+530742520&4294967295;e=f+(h<<16&4294967295|h>>>16);h=c+(e^f^b)+d[2]+3299628645&4294967295;c=e+(h<<23&4294967295|h>>>9);h=b+(e^(c|~f))+d[0]+4096336452&4294967295;b=c+(h<<6&4294967295|h>>>26);h=f+(c^(b|~e))+d[7]+1126891415&4294967295;f=b+(h<<10&4294967295|h>>>22);h=e+(b^(f|~c))+d[14]+2878612391&4294967295;e=f+(h<<15&4294967295|h>>>17);h=c+(f^(e|~b))+d[5]+4237533241&4294967295;c=e+(h<<21&4294967295|h>>>11);h=b+(e^(c|~f))+d[12]+1700485571&4294967295;b=c+
(h<<6&4294967295|h>>>26);h=f+(c^(b|~e))+d[3]+2399980690&4294967295;f=b+(h<<10&4294967295|h>>>22);h=e+(b^(f|~c))+d[10]+4293915773&4294967295;e=f+(h<<15&4294967295|h>>>17);h=c+(f^(e|~b))+d[1]+2240044497&4294967295;c=e+(h<<21&4294967295|h>>>11);h=b+(e^(c|~f))+d[8]+1873313359&4294967295;b=c+(h<<6&4294967295|h>>>26);h=f+(c^(b|~e))+d[15]+4264355552&4294967295;f=b+(h<<10&4294967295|h>>>22);h=e+(b^(f|~c))+d[6]+2734768916&4294967295;e=f+(h<<15&4294967295|h>>>17);h=c+(f^(e|~b))+d[13]+1309151649&4294967295;
c=e+(h<<21&4294967295|h>>>11);h=b+(e^(c|~f))+d[4]+4149444226&4294967295;b=c+(h<<6&4294967295|h>>>26);h=f+(c^(b|~e))+d[11]+3174756917&4294967295;f=b+(h<<10&4294967295|h>>>22);h=e+(b^(f|~c))+d[2]+718787259&4294967295;e=f+(h<<15&4294967295|h>>>17);h=c+(f^(e|~b))+d[9]+3951481745&4294967295;a.a[0]=a.a[0]+b&4294967295;a.a[1]=a.a[1]+(e+(h<<21&4294967295|h>>>11))&4294967295;a.a[2]=a.a[2]+e&4294967295;a.a[3]=a.a[3]+f&4294967295}
Ms.prototype.update=function(a,b){t(b)||(b=a.length);for(var c=b-this.b,d=this.g,e=this.c,f=0;f<b;){if(0==e)for(;f<=c;)Ns(this,a,f),f+=this.b;if(v(a))for(;f<b;){if(d[e++]=a.charCodeAt(f++),e==this.b){Ns(this,d);e=0;break}}else for(;f<b;)if(d[e++]=a[f++],e==this.b){Ns(this,d);e=0;break}}this.c=e;this.d+=b};
function Os(a){var b=Array((56>a.c?a.b:2*a.b)-a.c);b[0]=128;for(var c=1;c<b.length-8;++c)b[c]=0;for(var d=8*a.d,c=b.length-8;c<b.length;++c)b[c]=d&255,d/=256;a.update(b);b=Array(16);for(c=d=0;4>c;++c)for(var e=0;32>e;e+=8)b[d++]=a.a[c]>>>e&255;return b};function Ps(a){var b=a.type;if(!t(b))return null;switch(b.toLowerCase()){case "checkbox":case "radio":return a.checked?a.value:null;case "select-one":return b=a.selectedIndex,0<=b?a.options[b].value:null;case "select-multiple":for(var b=[],c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:null;default:return t(a.value)?a.value:null}}function Qs(a,b){var c=a.elements[b];if(c){if(c.type)return Ps(c);for(var d=0;d<c.length;d++){var e=Ps(c[d]);if(e)return e}}return null};var Xg="cp";function Rs(a){var b=document.querySelector('span[name="me"][email]');if(b)return b=b.getAttribute("email"),Ge(b);if(b=document.title.match(/- (\S+@\S+\.\S+) -/))return Ge(b[1]);a--;var c=new te;0<a?setTimeout(function(){var b=Rs(a);G(b,c.callback,c.H,c)},500):c.H(null);return c}function Ss(){if("https://mail.google.com"!=location.origin)return He(null);document.querySelector('span[name="me"][email]');return Ae(Rs(3),function(){return Ts()})}
function Ts(){if("https://mail.google.com"!=location.origin)return He("");var a=new rl,a=jl().request(a),b=new te;window.setTimeout(function(){b.b||(b.H(),b=null)},2E3);a.execute(function(a,d){if(b)if(ol(d)){var e=ql(d).match(/<title>(.+?)(\S+)<\/title>/);e?b.callback(e[2]):b.H()}else b.H()});return b}function Us(){var a=window.location.pathname.match(/^\/mail\/[^\/]+\/(\d+)\//);return a?(a=parseInt(a[1],10),isNaN(a)?0:a):0};function Vs(a,b,c,d){Zi.call(this);this.w=d;jj(this,c);this.setTitle(a);this.Lc=a=Ad(b,null);this.cc&&(this.cc.innerHTML=zd(a));this.ce=!0;ij(this,!1);aj(this);this.$d=!0;a=R(this);a.listen(this,kj,this.ca);a.listen(this,kj,this.S)}B(Vs,Zi);Vs.prototype.ca=function(a){this.w&&(this.w.callback(a.key),this.w=null)};Vs.prototype.S=function(){this.w&&(this.w.callback("cancel"),this.w=null)};
function Ws(){var a=new te,b=mj(new lj,nj,!0,!0);(new Vs("Yathit CRM Setting","User setting cannot change because you are not login Yathit server.",b,a)).T(!0);return a};function Xs(){this.c=this.b=this.i=this.a=null;uq();this.d=null;this.g=""}ea(Xs);Xs.prototype.logger=O("ydn.crm.ui.UserSetting");Xs.prototype.isLogin=function(){return!!this.a&&this.a.is_login};function Ys(a){return a.isLogin()&&(!a.d||a.d==a.a.email)}
function Zs(a){a.c||(chrome.storage.sync.get("user-setting",function(b){a.i=b["user-setting"]||$s}),at(a),a.c=Be(Ss(),function(a){(this.d=a)?Is("Loading user setting for "+a):Is("User setting not available.");return G(Yq().send("login-info",{gmail:a}),function(a){(this.a=a)?a.is_login?Is(a.email+" login."):Is("Not login to Yathit server."):Is("Login to Yathit server failed.")},function(){this.a=null;Is("login error.");this.logger.log(ag,"login fail",void 0)},this)},a));return a.c}
function bt(a){a.a=null;a.i=null;a.c=null;Zs(a)}function ct(a){return a.a.email}var $s={},dt={Group:{},Field:{}};function at(a){if(a.b)Ge(a.b);else{var b=new te;chrome.storage.sync.get("sugar-setting",function(c){a.b=c["sugar-setting"]||dt;b.callback(a.b)})}}function et(a){var b={};b["sugar-setting"]=a.b;var c=new te;chrome.storage.sync.set(b,function(){c.callback(b)})}function ft(){var a=Xs.t();a.b||at(a);return a.b||fo(dt)}
function gt(a){Zi.call(this);this.w=a;jj(this,$i());this.setTitle("Yathit CRM Setting");this.ce=!0;ij(this,!1);aj(this);this.$d=!0;a=this.B();a.classList.add("ydn-crm");a.innerHTML=Fd(Rd());a=R(this);a.listen(this,kj,this.ca);a.listen(this,kj,this.S)}B(gt,Zi);gt.prototype.ca=function(){if(this.w){var a=this.B().querySelector("form.basic-setting"),b={};b["cp-po"]=Qs(a,"context-panel-position");b["lg-cc"]=!!Qs(a,"log-on-console");this.w.callback(b);this.w=null}};
gt.prototype.S=function(){this.w&&(this.w.callback(null),this.w=null)};
Xs.prototype.show=function(){if(!Ys(this))return Ws();var a=new te,b=new gt(a),c,d=["lg-cc","cp-po"];chrome.storage.sync.get(d,function(a){c=a;var d=b.B().querySelector("form.basic-setting"),h=d.querySelector("input[name=log-on-console]");a=!!a["lg-cc"];var k=h.type;if(t(k))switch(k.toLowerCase()){case "checkbox":case "radio":h.checked=a?"checked":null;break;case "select-one":h.selectedIndex=-1;if(v(a))for(var l=0;k=h.options[l];l++)if(k.value==a){k.selected=!0;break}break;case "select-multiple":v(a)&&
(a=[a]);for(l=0;k=h.options[l];l++)if(k.selected=!1,a)for(var m,n=0;m=a[n];n++)k.value==m&&(k.selected=!0);break;default:h.value=null!=a?a:""}d=d.querySelectorAll("input[name=context-panel-position]");h=nq["cp-po"]||pq;for(a=0;a<d.length;a++)if(h==d[a].value){d[a].setAttribute("checked","1");break}b.T(!0)}.bind(this));return F(a,function(a){if(a){for(var b={},h=0;h<d.length;h++){var k=d[h];a[k]!=c[k]&&(b[k]=a[k])}(a=0<Object.keys(b).length)&&chrome.storage.sync.set(b);return a}})};
function ht(a){var b=it();return"tk"==a?!0:"su"==a||"gc"==a?"SugarCRM"==b:!1};function jt(a){this.name=a||""}jt.prototype.Ue=function(){return this.name.toUpperCase()};jt.prototype.getName=function(){return this.name};function kt(a){this.name=a.name||"";this.a=a}B(kt,jt);g=kt.prototype;g.Ue=function(){return this.a.label||""};g.getName=function(){return this.a.name||""};g.jh=function(){this.getName();return!0};g.Ve=function(){return ft().Field[this.a.name]||null};g.$g=function(){var a=ft();a.Field[this.a.name]||(a.Field[this.a.name]={});return a.Field[this.a.name]};
g.fb=function(){var a=this.Ve();a&&t(a.normallyHide)?a=!!a.normallyHide:this.a.group?a=-1==lt.indexOf(this.a.group):(this.getName(),a=!0);return a};function mt(a){this.name=a||""}B(mt,jt);mt.prototype.Ue=function(){return mt.f.Ue.call(this).toUpperCase()};mt.prototype.Ve=function(){return ft().Group[this.name]||null};mt.prototype.$g=function(){var a=ft();a.Group[this.name]||(a.Group[this.name]={});return a.Group[this.name]};var lt=["name","email","phone",""];
mt.prototype.fb=function(){var a=this.Ve();return a?!!a.normallyHide:-1==lt.indexOf(this.name)};mt.prototype.jh=function(){var a=this.getName();return-1==lt.indexOf(a)};function nt(a,b){H.call(this,"field-change",b);this.c=a}B(nt,H);function ot(a,b){H.call(this,"action",b);this.c=a}B(ot,H);function pt(){}ea(pt);pt.prototype.m=function(){return"field"};function qt(a,b){var c="ydnf-"+(a+"-"+b.name);if(b.options){if(!document.getElementById(c)){var d=document.createElement("datalist");d.id=c;for(var e in b.options)if(e){var f=document.createElement("option");f.setAttribute("value",e);d.appendChild(f)}document.body.appendChild(d)}return c}return null}pt.prototype.a=function(a){var b=a.a,c=a.b.j("div");c.classList.add(this.m());c.setAttribute("name",b.da);return a.s=c};
pt.prototype.refresh=function(a){var b=a.e(),c=a.a;E(b,!!c);if(c){var d=c.nb();b.textContent=d;var e=or(c);e?b.setAttribute("title",e):b.removeAttribute("title");(v(d)?wa(d):null==d)?b.classList.add("empty"):b.classList.remove("empty");!nr(c)&&rt(a).fb()?b.classList.add("normally-hide"):b.classList.remove("normally-hide")}};pt.prototype.b=function(a){return a.B().textContent};function st(){}B(st,pt);ea(st);st.prototype.a=function(a){var b=st.f.a.call(this,a),c=a.a;a=a.b;var d=or(c),c=qr(c),e=zg(yg.t()),f=a.j("input",{type:"checkbox",id:e});a=a.j("label",{"for":e},d);c&&f.setAttribute("disabled","true");f.classList.add("value");b.appendChild(f);b.appendChild(a);return b};
st.prototype.refresh=function(a){var b=a.e(),c=a.a;E(b,!!c);if(c){var d=c.nb(),e=v(d)?!wa(d):null!=d,f=b.querySelector(".value");"bool"!=pr(c)||ha(d)||(d="1"==d||"on"==d||"true"==d?!0:!1);f.value=d;e?b.classList.remove("empty"):b.classList.add("empty");!nr(c)&&rt(a).fb()&&b.classList.add("normally-hide")}};st.prototype.b=function(a){a=a.B().querySelector(".value");return"LABEL"==a.tagName||"SPAN"==a.tagName||"DIV"==a.tagName?a.textContent:"checkbox"==a.type?a.checked:a.value};function tt(){}B(tt,pt);ea(tt);tt.prototype.a=function(a){var b=tt.f.a.call(this,a),c=a.a;a=a.b;var d=or(c),d=a.j("input",{type:"text","class":"value",title:d,placeholder:d});b.appendChild(d);qr(c)&&d.setAttribute("disabled","1");c=c.a();0<c.length&&(a=a.j("div",{"class":"hover-button more-menu"}),b.appendChild(a),Ar(a,c));return b};
tt.prototype.refresh=function(a){var b=a.e(),c=a.a;E(b,!!c);if(c){var d=c.nb(),e=v(d)?!wa(d):null!=d;b.querySelector(".value").value=e?d:"";if(d=b.querySelector(".more-menu")){d.innerHTML="";var f=c.a();Ar(d,f)}e?b.classList.remove("empty"):b.classList.add("empty");!nr(c)&&rt(a).fb()&&b.classList.add("normally-hide")}};tt.prototype.b=function(a){return a.B().querySelector(".value").value};function ut(){}B(ut,tt);ea(ut);ut.prototype.a=function(a){var b=ut.f.a.call(this,a),c=b.querySelector(".value");c.classList.add("enum");(a=vt(a))&&c.setAttribute("list",a);return b};function wt(){}B(wt,pt);ea(wt);wt.prototype.a=function(a){var b=wt.f.a.call(this,a),c=a.b;a=or(a.a);c=c.j("TEXTAREA",{"class":"value",title:a,placeholder:a});b.appendChild(c);return b};wt.prototype.refresh=function(a){var b=a.e(),c=a.a;E(b,!!c);if(c){var d=c.nb(),e=v(d)?!wa(d):null!=d;b.querySelector(".value").value=e?d:"";e?b.classList.remove("empty"):b.classList.add("empty");!nr(c)&&rt(a).fb()&&b.classList.add("normally-hide")}};
wt.prototype.b=function(a){a=a.B().querySelector(".value");return"LABEL"==a.tagName||"SPAN"==a.tagName||"DIV"==a.tagName?a.textContent:"checkbox"==a.type?a.checked:a.value};function xt(a,b,c){Q.call(this,c);b||(b=pr(a),b="bool"==b?st.t():"text"==b?wt.t():"enum"==b?ut.t():tt.t());this.c=b;this.a=a}B(xt,Q);function rt(a){return new kt(a.a.yc())}g=xt.prototype;g.A=function(){this.c.a(this)};g.n=function(){var a=this.e().querySelector("input");a&&R(this).listen(a,"blur",this.jk);(a=this.e().getElementsByClassName("more-menu")[0])&&R(this).listen(a,"click",this.kk)};
g.kk=function(a){a=a.target;var b=Jc(a,null,"goog-menuitem").getAttribute("name");if(b){b=new ot(b,this);K(this,b);var c=Jc(a,null,"more-menu");E(c,!1);setTimeout(function(){E(c,!0)},1E3);b.d||("remove"==b.c?(a=this.Zg(),K(this,new nt(a,this))):"edit"==b.c&&yt(this))}};function zt(a){var b=a.a;a=vt(a);return{Ea:[{label:or(b),name:b.da,value:b.nb(),type:pr(b),Be:a}]}}function vt(a){a=a.a;return qt(Sr(a.parent.module),a.yc())}
function At(a){var b=new Zi;jj(b,$i());b.setTitle("Edit name");b.ce=!0;ij(b,!0);aj(b);b.$d=!0;b.B().classList.add("ydn-crm");var c;c='<div class="field-edit-dialog"><table><tbody>';a=a.Ea;for(var d=a.length,e=0;e<d;e++){var f=a[e];c+='<tr class="field" name="'+Ld(f.name)+'"><td class="name">'+Jd(f.label)+'</td><td><input class="value" type="'+Ld(f.type)+'"'+(f.Be?'list="'+Ld(f.Be)+'"':"")+'value="'+Ld(f.value)+'" /></td></tr>'}c=Kd(c+"</tbody></table></div>");c=Ad(c.toString(),null);b.Lc=c;b.cc&&
(b.cc.innerHTML=zd(c));return b}function yt(a){var b=At(zt(a));R(a).listen(b,kj,a.bi,!1);Df(R(a),b,"hide",function(){R(this).O(b,kj,this.bi,!1)});b.T(!0)}g.bi=function(a){if("ok"==a.key){a=a.target.B().querySelectorAll(".field");for(var b={},c=this.a,d=0;d<a.length;d++){var e=a[d].getAttribute("name"),f=a[d].querySelector(".value").value;c.nb()!=f&&(b[e]=f)}K(this,new nt(b,this))}};g.jk=function(){var a=this.c.b(this);(a=this.a.ai(a))&&K(this,new nt(a,this))};
g.Zg=function(){var a={};a[this.a.da]="";return a};g.refresh=function(){this.c.refresh(this)};function Bt(a){var b=a.c.b(a);a=a.a;var c=a.gd();if("bool"==pr(a)&&t(c)&&!ha(c))if("on"==c||"off"==c)b=b?"on":"off";else if("true"==c||"false"==c)b=b?"true":"false";else{if("1"==c||"0"==c)b=b?"1":"0"}else!1===c&&"bool"!=!pr(a)&&"false"==b?b=c:t(c)||b||(b=c);return b!=c?b:null}g.R=function(){return this.a.nb()};function Ct(a,b){Q.call(this,b);this.a=a}B(Ct,Q);function Dt(a,b){var c=a.e();b?(c.classList.add("edit"),c.classList.remove("view")):(c.classList.remove("edit"),c.classList.add("view"))}function Et(a){var b=a.e();b.classList.add("view");b.classList.remove("edit");for(b=0;b<Gg(a);b++)S(a,b).Te()}Ct.prototype.m=function(){return"record-body"};Ct.prototype.A=function(){Ct.f.A.call(this);var a=this.e();a.classList.add(this.m());a.classList.add("view")};
Ct.prototype.refresh=function(){for(var a=0;a<Gg(this);a++)S(this,a).refresh()};function Ft(a,b){var c=tt.t();xt.call(this,a,c,b)}B(Ft,xt);Ft.prototype.Zg=function(){return vr(this.a)};function Gt(a,b){var c=tt.t();xt.call(this,a,c,b)}B(Gt,xt);function Ht(){}ea(Ht);Ht.prototype.m=function(){return"record-group"};Ht.prototype.refresh=function(a){for(var b=0;b<Gg(a);b++)S(a,b).refresh()};function It(a){this.data=a||{}}function Jt(a){a=a.trim().replace("%40","@");return-1==a.indexOf("@")||-1==a.indexOf(".")?He(Error("Invalid email "+a)):G(Yq().send("social-profile",{email:a}),function(a){return new It(a)},function(){return new It(null)})};function Kt(a,b){Q.call(this,b);this.a=a}B(Kt,Q);g=Kt.prototype;g.B=function(){return hc("content",this.e())};g.Tc=function(){return null};g.m=function(){return"record-group"};g.A=function(){var a=this.b,b=a.j("div",this.m()),c=a.j("div","header"),a=a.j("div","content");b.appendChild(c);b.appendChild(a);this.s=b;b.setAttribute("name",this.a.Ca);(new mt(this.a.Ca)).fb()&&b.classList.add("normally-hide")};g.refresh=function(){};
g.Te=function(){var a=(new mt(this.a.Ca)).fb(),b=this.e();a?b.classList.add("normally-hide"):b.classList.remove("normally-hide")};g.Ag=function(a,b){var c=a?'[name="'+a+'"]':"";if(c=this.B().querySelector("div.field"+c+" input.value"))c.value=b};g.Gg=function(){return!1};function Lt(){}ea(Lt);function Mt(a,b){a.B().querySelector("input.value").value=b}Lt.prototype.refresh=function(a){var b=a.a;a=a.B();E(a,!!b);if(b){a=a.querySelector(".value");var c=b.Cd();"INPUT"==a.tagName?a.value=c:a.textContent=c;(b=b.Gf())?a.setAttribute("title",b):a.removeAttribute("title");(v(c)?wa(c):null==c)?a.classList.add("empty"):a.classList.remove("empty")}};function Nt(a,b,c){this.d=b||Lt.t();Kt.call(this,a,c)}B(Nt,Kt);g=Nt.prototype;
g.A=function(){Nt.f.A.call(this);var a=this.a,b=this.b,c=b.j("div","field"),d=a.Gf(),d=b.j("input",{type:"text","class":"value",title:d,placeholder:d});c.appendChild(d);a=a.Ef();u(a)?(b=b.j("div",{"class":"hover-button more-menu"}),c.appendChild(b),Ar(b,a)):x(a)&&(d=a.name==rr?"delete-field":"detail-field",b=b.j("div",{"class":"hover-button "+d,title:a.label}),d=xr("delete-field"==d?"delete":"more-horiz"),b.appendChild(d),b.setAttribute("name",a.name),c.appendChild(b));this.B().appendChild(c)};
g.n=function(){Nt.f.n.call(this);var a=this.e().querySelector("input");a&&R(this).listen(a,"blur",this.lk);(a=this.e().getElementsByClassName("hover-button")[0])&&R(this).listen(a,"click",this.Gj)};g.lk=function(){var a=this.Tc();var b=this.a;if(x(a)){var c=!1,d={},e;for(e in a)if(b.Jb(e)){var f=b.module.value(e);a[e]!==f&&(c=!0,d[e]=a[e])}else c=!0,d[e]=a[e];a=c?d:null}else a=null;a&&K(this,new nt(a,this))};g.Gj=function(a){if(a=a.b.getAttribute("name"))a=new ot(a,this),K(this,a),a.d||Ot(this,a)};
g.Tc=function(){for(var a=null,b=0;b<Gg(this);b++){var c=S(this,b),d=Bt(c);null!==d&&(a||(a={}),a[c.a.da]=d)}return a};function Ot(a,b){if("edit"==b.c){var c=At(a.Hg());R(a).listen(c,kj,a.ci,!1);Df(R(a),c,"hide",function(){R(this).O(c,kj,this.ci,!1)});c.T(!0)}}g.ci=function(a){if("ok"==a.key){a=a.target.B().querySelectorAll(".field");for(var b={},c=this.a,d=0;d<a.length;d++){var e=a[d].getAttribute("name"),f=a[d].querySelector(".value").value;Er(c,e)!=f&&(b[e]=f)}a=new nt(b,this);K(this,a);a.d||this.eh(a)}};
g.eh=function(){};g.refresh=function(){this.d.refresh(this)};g.Hg=function(){return{Ea:[]}};function Pt(a,b){Nt.call(this,a,null,b);this.c=null}B(Pt,Nt);g=Pt.prototype;g.n=function(){Pt.f.n.call(this);this.e().querySelector("input").setAttribute("disabled","1")};function Qt(a,b){return a.c&&a.c[b]?a.c[b]:Er(a.a,b)}function Rt(a,b,c){a.c||(a.c={});a.c[b]=c}g.Hg=function(){var a=this.a,b=[],c=mr(a.module),d=a.Ca,e;for(e in c.module_fields){var f=c.module_fields[e];f.group==d&&b.push({name:e,label:f.label,type:f.type,value:Qt(this,e),Be:qt(Sr(a.module),f)})}return{Ea:b}};
g.Gg=function(a){if(!a)return!1;var b=Ab(a.data,"fc","demographics","locationDeduced");a=!1;if(b){var c=this.a.Ca+"_";!Qt(this,c+"country")&&b.country&&(b.country.code?(Rt(this,c+"country",b.country.code),a=!0):b.country.name&&(Rt(this,c+"country",b.country.name),a=!0));!Qt(this,c+"city")&&b.city&&b.city.name&&(Rt(this,c+"city",b.city.name),a=!0);!Qt(this,c+"state")&&b.state&&b.state.name&&(Rt(this,c+"state",b.state.name),a=!0);a&&(b=St(this),Mt(this,b))}return a};
function St(a){var b=a.a;if(a.c){var c=a.a.Ca+"_",b=Qt(a,c+"country"),d=Qt(a,c+"city"),e=Qt(a,c+"state"),f=Qt(a,c+"postalcode"),h=Qt(a,c+"street");a=Qt(a,c+"street_2");return Hr(b,d,e,f,h,a)}return b.Cd()}g.eh=function(a){this.c=fo(a.c);a=St(this);Mt(this,a)};g.Tc=function(){return this.c||null};function Tt(a,b,c){b||Ht.t();Kt.call(this,a,c)}B(Tt,Kt);g=Tt.prototype;g.A=function(){Tt.f.A.call(this);Ut(this)};function Ut(a){for(var b=a.a,c=a.b,d=b.hg(),e=0;e<d.length;e++){var f=b.a(d[e]),h;f instanceof sr?h=new Ft(f,c):f instanceof Or?h=new Gt(f,c):h=new xt(f,null,c);a.D(h,!0)}}g.n=function(){Tt.f.n.call(this);R(this).listen(this,"action",this.Hj)};g.Hj=function(){};g.Tc=function(){for(var a=null,b=0;b<Gg(this);b++){var c=S(this,b),d=Bt(c);null!==d&&(a||(a={}),a[c.a.da]=d)}return a};
g.refresh=function(){for(var a=0;a<Gg(this);a++)S(this,a).refresh()};g.Te=function(){Tt.f.Te.call(this);for(var a=0;a<Gg(this);a++){var b=S(this,a),c=rt(b).fb(),b=b.e();c?b.classList.add("normally-hide"):b.classList.remove("normally-hide")}};function Vt(a,b){var c=Ht.t();Tt.call(this,a,c,b)}B(Vt,Tt);Vt.prototype.Te=function(){for(var a=Gg(this)-1;0<=a;a--)this.removeChild(S(this,a),void 0).u();Ut(this)};function Wt(){}B(Wt,Ht);ea(Wt);Wt.prototype.m=function(){return"record-group"};Wt.prototype.refresh=function(a){for(var b=a.a,c=a.b,d=[],e=0;e<Gg(a);e++){var f=S(a,e);f.refresh();d.push(f.a.da)}f=b.hg();for(e=0;e<f.length;e++){var h=f[e],k=b.a(h);(new mt(a.a.Ca)).fb()||-1!=d.indexOf(h)||(h=new xt(k,null,c),a.D(h,!0))}};function Xt(){}B(Xt,Ht);ea(Xt);Xt.prototype.m=function(){return"list"};function Yt(a,b){var c=Xt.t();Tt.call(this,a,c,b)}B(Yt,Tt);Yt.prototype.B=function(){return hc("content",this.e())};Yt.prototype.refresh=function(){for(var a=0;a<Gg(this);a++)S(this,a).refresh()};function Zt(a,b){Nt.call(this,a,null,b)}B(Zt,Nt);Zt.prototype.Hg=function(){var a=this.a;if(a.Jb("full_name"))var b=qt(Sr(a.module),mr(a.module).module_fields.salutation),a=[{name:"salutation",label:"Salutation",type:"enum",value:Er(a,"salutation"),Be:b},{name:"first_name",label:"First name",type:"text",value:Er(a,"first_name")},{name:"last_name",label:"Last name",type:"text",value:Er(a,"last_name")}];else a=[{name:"name",label:"Name",type:"text",value:Er(a,"name")}];return{Ea:a}};
Zt.prototype.Tc=function(){var a=this.a,b=this.B().querySelector("input.value").value,c=a.Cd();if(b==c)return null;if(!a.Jb("full_name"))return{name:b};var b=Nr(a,b),c=a.module.value("salutation"),d=a.module.value("first_name"),e=a.module.value("last_name"),a=a.module.value("full_name");return c!=b.salutation||d!=b.first_name||e!=b.last_name||a!=b.full_name?b:null};Zt.prototype.Ag=function(a,b){"full_name"!=a&&"name"!=a||Zt.f.Ag.call(this,null,b)};
Zt.prototype.Gg=function(a){var b=this.B().querySelector("input.value").value;a=a.data.fc?a.data.fc.contactInfo.fullName:null;return!b&&a?(Mt(this,a),!0):!1};function $t(a,b){Yt.call(this,a,b)}B($t,Yt);function au(a,b){Ct.call(this,a,b)}B(au,Ct);
au.prototype.A=function(){au.f.A.call(this);this.e();var a=this.b,b=this.a,c=[],d=mr(b),e;for(e in d.module_fields){var f=d.module_fields[e].group;-1==c.indexOf(f)&&c.push(f)}for(d=0;d<c.length;d++){e=c[d];var f=b,h=e;f.a[h]||("name"==h?f.a[h]=new Mr(f):0<=["address","alt_address","primary_address"].indexOf(h)?f.a[h]=new Fr(f,h):f.a[h]="email"==h?new Kr(f):"phone"==h?new Pr(f):new Ir(f,h));f=f.a[h];if(f instanceof Kr)e=new Vt(f,a);else if(f instanceof Fr)e=new Pt(f,a);else if(f instanceof Pr)e=new $t(f,
a);else if(f instanceof Mr)e=new Zt(f,a);else if(f instanceof Ir)e=f,f=null,""==e.Ca&&(f=Wt.t()),e=new Tt(e,f,a);else throw Error("Invalid group: "+e);this.D(e,!0)}};function bu(){}ea(bu);function cu(a){a=a.e().querySelector(".record-footer div.message");a.textContent="";a.classList.remove("error")};function du(a,b,c){ni.call(this,a,b,c);this.la(16,!0)}B(du,ni);th("goog-checkbox-menuitem",function(){return new du(null)});var eu={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function fu(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(gu.test(c))return b.ve=hu(c),b.type="hex",b;c=iu(a);if(c.length){var d=c[0];a=c[1];c=c[2];d=Number(d);a=Number(a);c=Number(c);if(isNaN(d)||0>d||255<d||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)throw Error('"('+d+","+a+","+c+'") is not a valid RGB color');d=ju(d.toString(16));a=ju(a.toString(16));c=ju(c.toString(16));b.ve="#"+d+a+c;b.type="rgb";return b}if(eu&&(c=eu[a.toLowerCase()]))return b.ve=c,b.type="named",b;throw Error(a+
" is not a valid color string");}var ku=/#(.)(.)(.)/;function hu(a){if(!gu.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(ku,"#$1$1$2$2$3$3"));return a.toLowerCase()}var gu=/^#(?:[0-9a-f]{3}){1,2}$/i,lu=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function iu(a){var b=a.match(lu);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]}
function ju(a){return 1==a.length?"0"+a:a};function mu(){}B(mu,Fi);ea(mu);mu.prototype.a=function(a,b){return mu.f.a.call(this,b.j("div","goog-color-menu-button-indicator",a),b)};mu.prototype.kd=function(a,b){if(a){var c=this.ha(a);if(c&&c.firstChild){var d;if(d=b)d=!!(gu.test("#"==b.charAt(0)?b:"#"+b)||iu(b).length||eu&&eu[b.toLowerCase()]);d=d?fu(b).ve:null;c.firstChild.style.borderBottomColor=d||(D?"":"transparent")}}};mu.prototype.Ic=function(a){var b=a.e();this.kd(b,a.R());T(b,"goog-color-menu-button");mu.f.Ic.call(this,a)};function nu(a,b,c,d,e){this.a=!!b;a&&ou(this,a,d);this.b=void 0!=e?e:this.Ib||0;this.a&&(this.b*=-1);this.c=!c}B(nu,If);g=nu.prototype;g.Gb=null;g.Ib=0;g.Th=!1;function ou(a,b,c){if(a.Gb=b)a.Ib=w(c)?c:1!=a.Gb.nodeType?0:a.a?-1:1;w(void 0)&&(a.b=void 0)}g.clone=function(){return new nu(this.Gb,this.a,!this.c,this.Ib,this.b)};
g.next=function(){var a;if(this.Th){if(!this.Gb||this.c&&0==this.b)throw Hf;a=this.Gb;var b=this.a?-1:1;if(this.Ib==b){var c=this.a?a.lastChild:a.firstChild;c?ou(this,c):ou(this,a,-1*b)}else(c=this.a?a.previousSibling:a.nextSibling)?ou(this,c):ou(this,a.parentNode,-1*b);this.b+=this.Ib*(this.a?-1:1)}else this.Th=!0;a=this.Gb;if(!this.Gb)throw Hf;return a};
g.splice=function(a){var b=this.Gb,c=this.a?1:-1;this.Ib==c&&(this.Ib=-1*c,this.b+=this.Ib*(this.a?-1:1));this.a=!this.a;nu.prototype.next.call(this);this.a=!this.a;for(var c=ga(arguments[0])?arguments[0]:arguments,d=c.length-1;0<=d;d--)b.parentNode&&b.parentNode.insertBefore(c[d],b.nextSibling);xc(b)};function pu(a,b,c,d){nu.call(this,a,b,c,null,d)}B(pu,nu);pu.prototype.next=function(){do pu.f.next.call(this);while(-1==this.Ib);return this.Gb};function qu(){}B(qu,zh);ea(qu);var ru=0;qu.prototype.Aa=function(a){var b=Ch(this,a);a=a.b.j("DIV",b?b.join(" "):null,su(this,a.N(),a.Ka,a.b));ah(a,"grid");return a};function su(a,b,c,d){for(var e=[],f=0,h=0;f<c.height;f++){for(var k=[],l=0;l<c.width;l++){var m=b&&b[h++];k.push(tu(a,m,d))}e.push(uu(a,k,d))}a=d.j("TABLE",a.m()+"-table",d.j("TBODY",a.m()+"-body",e));a.cellSpacing=0;a.cellPadding=0;return a}function uu(a,b,c){a=c.j("TR",a.m()+"-row",b);ah(a,"row");return a}
function tu(a,b,c){a=c.j("TD",{"class":a.m()+"-cell",id:a.m()+"-cell-"+ru++},b);ah(a,"gridcell");bh(a,"selected",!1);if(!Gc(a)&&!ch(a,"label")){var d;b=new pu(a);for(c="";!c&&(d=Lf(b));)1==d.nodeType&&(c=ch(d,"label")||d.title);(d=c)&&bh(a,"label",d)}return a}
qu.prototype.Sb=function(a,b){if(a){var c=ic(document,"TBODY",this.m()+"-body",a)[0];if(c){var d=0;C(c.rows,function(a){C(a.cells,function(a){vc(a);if(b){var c=b[d++];c&&a.appendChild(c)}})});if(d<b.length){for(var e=[],f=ec(a),h=c.rows[0].cells.length;d<b.length;){var k=b[d++];e.push(tu(this,k,f));e.length==h&&(k=uu(this,e,f),c.appendChild(k),e.length=0)}if(0<e.length){for(;e.length<h;)e.push(tu(this,"",f));k=uu(this,e,f);c.appendChild(k)}}}nd(a,!0,Ob)}};
function vu(a,b,c){for(b=b.e();c&&1==c.nodeType&&c!=b;){if("TD"==c.tagName&&ph(c,a.m()+"-cell"))return c.firstChild;c=c.parentNode}return null}qu.prototype.m=function(){return"goog-palette"};function wu(a){J.call(this);this.a=[];xu(this,a)}B(wu,J);g=wu.prototype;g.Xb=null;g.wg=null;function xu(a,b){b&&(C(b,function(a){yu(this,a,!1)},a),mb(a.a,b))}g.sb=function(a){var b=this.a.length;a&&(yu(this,a,!1),nb(this.a,b,0,a))};g.gc=function(){return lb(this.a)};function zu(a,b){b!=a.Xb&&(yu(a,a.Xb,!1),a.Xb=b,yu(a,b,!0));K(a,"select")}function Au(a){var b=a.Xb;return b?Ya(a.a,b):-1}g.clear=function(){ib(this.a);this.Xb=null};g.l=function(){wu.f.l.call(this);delete this.a;this.Xb=null};
function yu(a,b,c){b&&("function"==typeof a.wg?a.wg(b,c):"function"==typeof b.Yb&&b.Yb(c))};function Bu(a,b,c){Kh.call(this,a,b||qu.t(),c);this.ac&=-89;this.c=new Cu;this.c.Ne(this);this.v=-1}B(Bu,Kh);g=Bu.prototype;g.Ka=null;g.Cb=-1;g.ra=null;g.l=function(){Bu.f.l.call(this);this.ra&&(this.ra.u(),this.ra=null);this.Ka=null;this.c.u()};g.wd=function(a){Bu.f.wd.call(this,a);Du(this);this.ra?(this.ra.clear(),xu(this.ra,a)):(this.ra=new wu(a),a=z(this.Ni,this),this.ra.wg=a,R(this).listen(this.ra,"select",this.Mi));this.Cb=-1};g.Ob=function(){return""};g.Me=function(){};
g.oc=function(a){Bu.f.oc.call(this,a);var b=vu(this.d,this,a.target);b&&a.i&&zc(b,a.i)||b==Eu(this)||(a=this.N(),Fu(this,a?Ya(a,b):-1))};g.mc=function(a){Bu.f.mc.call(this,a);if(Ih(this,4)&&(a=vu(this.d,this,a.target),a!=Eu(this))){var b=this.N();Fu(this,b?Ya(b,a):-1)}};g.Ha=function(a){var b=Eu(this);return b?(this.ra&&zu(this.ra,b),Bu.f.Ha.call(this,a)):!1};
g.va=function(a){var b=this.N(),b=b?b.length:0,c=this.Ka.width;if(0==b||!this.isEnabled())return!1;if(a.a==Tg||32==a.a)return this.Ha(a);if(36==a.a)return Fu(this,0),!0;if(35==a.a)return Fu(this,b-1),!0;var d=0>this.Cb?this.ra?Au(this.ra):-1:this.Cb;switch(a.a){case 37:if(-1==d||0==d)d=b;Fu(this,d-1);a.preventDefault();return!0;case 39:return d==b-1&&(d=-1),Fu(this,d+1),a.preventDefault(),!0;case 38:-1==d&&(d=b+c-1);if(d>=c)return Fu(this,d-c),a.preventDefault(),!0;break;case 40:if(-1==d&&(d=-c),
d<b-c)return Fu(this,d+c),a.preventDefault(),!0}return!1};g.Mi=function(){};function Eu(a){var b=a.N();return b&&b[a.Cb]}function Fu(a,b){b!=a.Cb&&(Gu(a,a.Cb,!1),a.v=a.Cb,a.Cb=b,Gu(a,b,!0),K(a,"a"))}function Hu(a,b){if(a.ra){var c=a.ra;zu(c,c.a[b]||null)}}
function Gu(a,b,c){if(a.e()){var d=a.N();if(d&&0<=b&&b<d.length){var e;e=(e=Eu(a))?e.parentNode:null;a.c.e()!=e&&(a.c.s=e);e=a.c;e.Ba(c);Ih(e,2)==c&&(b=d[b])&&(b=b?b.parentNode:null,d=a.d.m()+"-cell-hover",c?T(b,d):rh(b,d),c?bh(a.s,"activedescendant",b.id):b.id==ch(a.s,"activedescendant")&&a.s.removeAttribute("aria-activedescendant"))}}}g.Ba=function(a){a&&-1==this.Cb?Fu(this,-1<this.v?this.v:0):a||Fu(this,-1);Bu.f.Ba.call(this,a)};
g.Ni=function(a,b){if(this.e()&&a){var c=a.parentNode,d=this.d.m()+"-cell-selected";b?T(c,d):rh(c,d);bh(c,"selected",b)}};function Du(a){var b=a.N();if(b)if(a.Ka&&a.Ka.width){if(b=Math.ceil(b.length/a.Ka.width),!w(a.Ka.height)||a.Ka.height<b)a.Ka.height=b}else b=Math.ceil(Math.sqrt(b.length)),a.Ka=new dc(b,b);else a.Ka=new dc(0,0)}function Cu(){Kh.call(this,null);this.Hb|=2}B(Cu,Kh);function Iu(a,b,c){this.h=a||[];Bu.call(this,null,b||qu.t(),c);this.h=this.h;this.p=this.k=null;Oh(this,Ju(this))}B(Iu,Bu);Iu.prototype.p=null;Iu.prototype.k=null;Iu.prototype.Jf=function(){var a=this.ra?this.ra.Xb:null;if(a){var b=a.style[Ta("background-color")],a="undefined"!==typeof b?b:a.style[Tc(a,"background-color")]||"";return Ku(a)}return null};Iu.prototype.xg=function(a){a=Ku(a);this.p||(this.p=ab(this.h,function(a){return Ku(a)}));Hu(this,a?Ya(this.p,a):-1)};
function Ju(a){return ab(a.h,function(a,c){var d=this.b.j("div",{"class":this.d.m()+"-colorswatch",style:"background-color:"+a}),e;this.k&&this.k[c]?e=this.k[c]:"#"==a.charAt(0)?(e=hu(a),e="RGB ("+[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)].join(", ")+")"):e=a;d.title=e;return d},a)}function Ku(a){if(a)try{return fu(a).ve}catch(b){}return null};function Lu(a,b,c,d){Gi.call(this,a,b,c||mu.t(),d)}B(Lu,Gi);var Mu={o:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),M:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),v:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")};
function Nu(a){var b=new si(a);xb(Mu,function(c){c=new Iu(c,null,a);if(c.e())throw Error("Component already rendered");c.Ka=w(8)?new dc(8,void 0):8;Du(c);b.D(c,!0)});return b}g=Lu.prototype;g.Jf=function(){return this.R()};g.xg=function(a){this.hb(a)};g.hb=function(a){for(var b=0,c;c=this.c?S(this.c,b):null;b++)"function"==typeof c.xg&&c.xg(a);Lu.f.hb.call(this,a)};
g.nd=function(a){"function"==typeof a.target.Jf?this.hb(a.target.Jf()):"none"==a.target.R()&&this.hb(null);Lu.f.nd.call(this,a);a.stopPropagation();K(this,"action")};g.$=function(a,b){a&&0==(this.c?Gg(this.c):0)&&(this.od(Nu(this.b)),this.hb(this.R()));Lu.f.$.call(this,a,b)};th("goog-color-menu-button",function(){return new Lu(null)});function Ou(){}B(Ou,Bi);ea(Ou);Ou.prototype.ha=function(a){return a};Ou.prototype.Aa=function(a){var b=Ch(this,a);return a.b.j("div",{"class":"goog-inline-block "+b.join(" "),title:a.Pb()||""},a.N())};Ou.prototype.m=function(){return"goog-css3-button"};th("goog-css3-button",function(){return new Di(null,Ou.t())});th("goog-css3-toggle-button",function(){var a=new Di(null,Ou.t());a.la(16,!0);return a});function Pu(a,b,c){Di.call(this,a,b||Ei.t(),c)}B(Pu,Di);th("goog-custom-button",function(){return new Pu(null)});function Qu(a,b,c){Di.call(this,a,b||Ei.t(),c);this.la(16,!0)}B(Qu,Di);th("goog-toggle-button",function(){return new Qu(null)});function Ru(){this.a="toolbar"}B(Ru,vh);ea(Ru);Ru.prototype.m=function(){return"goog-toolbar"};Ru.prototype.g=function(){return xh};function Su(a,b,c){Wh.call(this,b,a||Ru.t(),c)}B(Su,Wh);Su.prototype.ld=function(a){Su.f.ld.call(this,a);this.Va||ai(this)};function Tu(a,b){Q.call(this,b);this.a=a}B(Tu,Q);Tu.prototype.m=function(){return"secondary"};Tu.prototype.A=function(){Tu.f.A.call(this);this.e().classList.add(this.m())};Tu.prototype.n=function(){Tu.f.n.call(this);var a=this.a;if(0<=ar.indexOf(Sr(a))){var b=R(this);b.listen(a,"module-change",this.c);b.listen(a,"record-change",this.c);this.c()}};
Tu.prototype.c=function(){for(;this.g&&0!=this.g.length;){var a=S(this,0);this.removeChild(a,!0);a.u()}a=this.a;if(fr(a.G)){var b=a.parent,a=[{store:"Notes",index:"parent",reverse:!0,keyRange:Al([Sr(a),a.r()])}];G(b.send("query",a),function(a){for(var d=0;d<a.length;d++){var e=a[d];e.result&&0<e.result.length&&(e=new Qr(this.a.parent,new er($(b),"Notes",e.result[0])),e=new Uu(e,this.b),this.D(e,!0))}},function(a){throw a;},this)}};var pq="in",Vu=null;function Wu(){if(!Vu){var a=chrome.extension.getURL("image/all-icons.svg"),b=new XMLHttpRequest;b.open("GET",a,!1);b.onload=function(){Vu=b.responseXML;b=null};b.send()}return Vu}function xr(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=Wu().getElementById(a);d&&(c.setAttribute("viewBox",d.getAttribute("viewBox")),c.innerHTML=d.innerHTML);2>arguments.length?c.classList.add("icons"):v(b)&&c.classList.add(b);return c};var Xu=null,Yu=null;function Zu(){var a=chrome.extension.getURL("inj-template.html");v(a)?Yu=a:Xu=a}function $u(){if(!Xu){if(!Yu)throw Error("default template document not set.");var a=new XMLHttpRequest;a.open("GET",Yu,!1);a.onload=function(){Xu=(new DOMParser).parseFromString(a.responseText,"text/html");a=null};a.send()}return Xu}
function av(a){var b=document.getElementById(a);b||(b=$u().documentElement.querySelector("#"+a));document.body.contains(b)||(b=document.importNode(b,!0),document.body.appendChild(b));return b}
function bv(a){a.preventDefault();var b=600,c=400,d=a.target.getAttribute("data-window-height"),e=a.target.getAttribute("data-window-width");e&&(b=parseInt(e,10));d&&(c=parseInt(d,10));window.open(a.target.href,void 0,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+b+", height="+c+", top="+(window.innerWidth/2-c/2+window.screenTop)+", left="+(window.innerWidth/2-b/2+window.screenLeft))};function cv(a,b){this.a=document.createElement("dialog");var c=document.createElement("div");c.className="header";var d=document.createElement("div");d.className="content";var e=document.createElement("div");e.className="button-bar";var f=document.createElement("h3");f.textContent=a;c.appendChild(f);v(b)?(f=document.createElement("div"),f.textContent=b,d.appendChild(f)):b&&d.appendChild(b);f=document.createElement("button");f.className="ok default";f.value="ok";f.textContent="OK";e.appendChild(f);
this.a.appendChild(c);this.a.appendChild(d);this.a.appendChild(e);this.a.className="ydn-crm";document.body.appendChild(this.a)}cv.prototype.u=function(){for(var a=this.a.querySelector(".button-bar").querySelectorAll("button"),b=a.length-1;0<=b;b--)a[b].onclick=null;this.a.onclose=null;document.body.removeChild(this.a);this.a=null};
function dv(){var a=new cv("Export to Gmail Contact","SugarCRM Record does not exist"),b=new te;a.a.querySelector(".button-bar").querySelector("button.default").onclick=function(){a.a.close("apply");a.u()};a.a.onclose=function(){b.callback(a.a.returnValue);a.u()};a.a.showModal()};function Uu(a,b){Q.call(this,b);this.a=a;this.d=new wr({className:"menu"});this.c=new au(this.a,this.b);this.h=new Tu(a,b);bu.t()}B(Uu,Q);g=Uu.prototype;g.logger=O("ydn.crm.sugarcrm.ui.record.Record");g.m=function(){return"record-panel"};g.B=function(){return this.e().querySelector(".content")};function ev(a){return a.e().querySelector(".head")}
g.A=function(){Uu.f.A.call(this);var a=this.e(),b=this.b;a.className=this.m()+" "+Sr(this.a);var c=b.j("div","head"),d=b.j("div","content");a.appendChild(c);a.appendChild(d);c.classList.add("record-header");c.classList.add("flex-bar");var d=b.j("a",{"class":"title center",title:"Open in SugarCRM"}),e=b.j("span","icon"),f=b.j("a",{title:"View in Gmail contact","class":"badge-icon google"},xr("google","icons-small")),h=b.j("span","svg-button ok-button",xr("check-circle"));h.setAttribute("title","Save");
c.appendChild(e);c.appendChild(f);c.appendChild(d);c.appendChild(h);this.d.render(c);this.D(this.c,!0);this.D(this.h,!0);b=b.j("div","record-footer");a.appendChild(b);b=this.b;a=this.e().querySelector(".record-footer");b=b.j("div","message");a.appendChild(b)};
g.n=function(){Uu.f.n.call(this);var a=R(this),b=this.a;a.listen(b,"click",this.uh,!1);this.e().querySelector(".record-footer");var c=this.e().querySelector(".head .more-menu");a.listen(b,"module-change",this.uh);a.listen(b,"record-change",this.pj);a.listen(b,"record-update",this.qj);a.listen(this.B(),"click",this.Ti,!1);a.listen(this,["field-change"],this.fj);a.listen(c,"click",this.cj);b=ev(this).querySelector(".ok-button");a.listen(b,"click",this.Kj);fv(this)};
function gv(a){var b=a.a,c=av("record-delete-dialog");a=c.querySelector("a.record");a.href=$r(b);a.textContent=Rr(b);c.querySelector("span.type").textContent=Sr(b);c.showModal(document.getElementById("sticky-hud-base"));c.querySelector("button[name=cancel]").onclick=function(){c.close("cancel")};a=c.querySelector("button[name=ok]");a.onclick=function(){c.close("ok")};a.focus();c.onclose=function(a){if("ok"==a.target.returnValue){var c=Is("Deleting","...");Ls(c,$r(b),Rr(b));G(Yr(b),function(){Js(c,
Rr(b)," deleted.")},function(a){Ks(c,a.message)},this)}}}function hv(a){var b=a.a;if(fr(b.G)){var c=Is("exporting...");G(fr(b.G)?b.parent.Fg(b.G):He(Error("no Record to export.")),function(a){var b=Us();Js(c,"Exported to ");b=Gq(a,b);Ls(c,b,"View in Gmail contact","Gmail Contact "+zq(a));iv(this)},function(a){Js(c,"Error exporting: "+a.message||a)},a)}else dv()}
g.cj=function(a){a=zr(a);var b=jv+"-";"edit"==a?this.Uc(!this.e().classList.contains("edit")):a==kv?gv(this):a==lv?hv(this):a==mv?nv(this):a==ov?pv(this):a&&ta(a,"new-")?(a=a.substr(4),qv(this,a,!1)):a&&ta(a,b)&&(a=a.substr(b.length),qv(this,a,!0))};g.Kj=function(){for(var a=this.c,b=null,c=0;c<Gg(a);c++){var d=S(a,c).Tc();if(d){b||(b={});for(var e in d)b[e]=d[e]}}rv(this,b)};
function nv(a){var b=document.querySelector("#field-display-dialog")||av("field-display-dialog"),c=b.querySelector(".content"),d=c.getAttribute("name");if(!d){var e=b.querySelector("button.apply"),f=b.querySelector("button.cancel");e.onclick=function(){b.close("apply")};f.onclick=function(){b.close("cancel")};b.onclose=a.Fj.bind(a)}a=a.a;e=Sr(a);if(d!=e){c.innerHTML="";c.setAttribute("name",e);d=av("field-table").content;c.appendChild(d.cloneNode(!0));d=c.querySelector("tbody.group-body");c=c.querySelector("tbody.field-body");
a=mr(a);e=[];Xs.t();for(var h in a.module_fields){var k=a.module_fields[h],l=k.group,f=document.createElement("tr");if(l)if(-1==e.indexOf(l))e.push(l),d.appendChild(f),k=new mt(l);else continue;else c.appendChild(f),k=new kt(k);f.setAttribute("name",k.getName());var l=document.createElement("td"),m=document.createElement("td"),n=document.createElement("input");l.appendChild(n);n.type="checkbox";k.fb()||(n.checked=!0);m.textContent=k.Ue();f.appendChild(l);f.appendChild(m)}}b.showModal()}
g.Fj=function(a){a=a.target;if("apply"==a.returnValue){var b=a.querySelector(".group-body"),b=sv(b);tv(this,!0,b);a=a.querySelector(".field-body");a=sv(a);tv(this,!1,a);a=this.e().classList.contains("edit");Et(this.c);this.c.refresh();a&&Dt(this.c,!0)}};function sv(a){for(var b={},c=a.childElementCount,d=0;d<c;d++){var e=a.children[d],f=e.children[0].children[0];b[e.getAttribute("name")]=!f.checked}return b}
function tv(a,b,c){a=mr(a.a);Xs.t();for(var d in c){var e=a.module_fields[d],f;b?f=new mt(d):f=new kt(e);var e=f,h=c[d],k=Xs.t(),l=e.Ve(),m=e.jh();h==m?l?(delete l.normallyHide,et(k)):Ge(!1):(l||(l=e.$g()),l.normallyHide=!!h,et(k))}}
function pv(a){a=fo(a.a.G.getData());var b=av("record-detail-dialog");b.querySelector("button.ok").onclick=function(){b.close("close")};var c=b.querySelector(".content");c.innerHTML="";var d=document.createElement("pre");if(a){for(var e in a)ta(e,"ydn$")&&delete a[e];d.textContent=JSON.stringify(a,null,2)}c.appendChild(d);b.showModal()}g.fj=function(a){this.e().classList.contains("edit")?uv(this,!0):(a.preventDefault(),rv(this,a.c))};
function uv(a,b){var c=ev(a).querySelector(".ok-button");E(c,!!b)}function rv(a,b){var c=a.a,d=Is("Updating...");G(Ur(c,b),function(){uv(this,!1);Js(d,Sr(c)," updated.");var a=$r(c);Ls(d,a,Rr(c),"View in SugarCRM")},function(a){Ks(d,a.message)},a)}g.Uc=function(a){var b=this.e();a?b.classList.add("edit"):b.classList.remove("edit");Dt(this.c,a)};g.Ti=function(a){if(a.target.classList.contains("value"))a:{var b=this.c;if(a=Jc(a.target,null,"record-group"))for(var c=0;c<Gg(b);c++)if(S(b,c).e()==a)break a}};
g.uh=function(){this.removeChild(this.c,!0);this.c.u();this.c=new au(this.a,this.b);this.Ld(this.c,1,!0);fv(this)};g.pj=function(){fv(this)};g.qj=function(){this.refresh()};function iv(a){vv(a)&&F(Tr(a.a),function(a){if(a){var c=ev(this).querySelector("a.google");E(c,!0);a=new Dq(a);c.href=Gq(a,Us());Br(this.d,lv,!1)}else Br(this.d,lv,!0)},a)}
function fv(a){var b=a.a,c=a.e(),d=ev(a),e=Sr(a.a);d.querySelector("span.icon").textContent=e?e.substr(0,2):"";e=d.querySelector("a.google");E(e,!1);e.removeAttribute("href");var e=a.d,f=[];f.push({name:"edit",label:"Edit"},{name:kv,label:"Delete"},null);var h=a.If();if(0<h.length){for(var k=[],l=0;l<h.length;l++)k[l]={name:"new-"+h[l],label:h[l]};f.push({name:"new",label:"New",children:k})}k=a.Ff();if(0<k.length){for(var m=[],l=0;l<k.length;l++)m[l]={name:jv+"-"+k[l],label:k[l]};f.push({name:jv,
label:"Duplicate to",children:m})}(l=vv(a))&&f.push({name:lv,label:"To Gmail",title:"Export SugarCRM Contacts record to Gmail Contact and sync"});(l||0<h.length||0<k.length)&&f.push(null);f.push({name:ov,label:"View details ..."},{name:mv,label:"Fields ..."});e.bg=fo(f);e.qb&&(f=e.qb.querySelector(".flyout-menu"),e.qb.removeChild(f),f=yr(e.bg),f.classList.add("flyout-menu"),e.qb.appendChild(f));d=d.querySelector(".ok-button");E(d,!1);wv(a);cu(a);Et(a.c);a.c.refresh();c.className=fr(b.G)?a.m()+" "+
Sr(b):a.m()+" "+Sr(b)+" empty";iv(a)}g.W=function(){Uu.f.W.call(this)};g.refresh=function(){fr(this.a.G)?this.e().classList.remove("empty"):this.e().classList.add("empty");wv(this);cu(this);this.c.refresh()};function xv(a,b){if(b){var c=a.c,d;for(d in b){var e;a:{if(e=mr(c.a).module_fields[d]){e=e.group||"";for(var f=0;f<Gg(c);f++){var h=S(c,f);if(h.a.Ca==e){e=h;break a}}}e=null}e&&e.Ag(d,b[d])}}}g.toString=function(){return"ydn.crm.sugarcrm.ui.record.Record:"+this.a};
function qv(a,b,c){var d=a.a,e=null;c&&(e=fo(d.G.getData()),delete e.id,delete e._module,delete e.date_entered,delete e.date_modified);bs(d,new er($(d.parent),b));e&&xv(a,e);a.Uc(!0)}var kv="delete",ov="record-detail",jv="duplicate",lv="export",mv="field-option";Uu.prototype.If=function(){return[]};Uu.prototype.Ff=function(){return[]};function vv(a){return(a=a.a)&&"Contacts"==Sr(a)?!0:!1}
function wv(a){var b=ev(a),c=a.a,b=b.querySelector("a.title");fr(c.G)?(b.textContent=Rr(c),b.href=$r(c),b.target=$(c.parent),Br(a.d,jv,!0)):(b.innerHTML="",b.href="",Br(a.d,jv,!1))};function yv(a,b){Uu.call(this,a,b)}B(yv,Uu);g=yv.prototype;g.m=function(){return yv.f.m.call(this)+" new-record"};g.n=function(){yv.f.n.call(this);var a=this.a;R(this).listen(a.parent,"context-change",this.ek)};g.ek=function(a){var b=this.a;a.i?bs(b,a.i):a.i||bs(b,new er($(b.parent),Sr(b)))};g.If=function(){return[]};g.Ff=function(){return br};var zv;
zv={g:["BC","AD"],d:["Before Christ","Anno Domini"],p:"JFMAMJJASOND".split(""),ia:"JFMAMJJASOND".split(""),k:"January February March April May June July August September October November December".split(" "),S:"January February March April May June July August September October November December".split(" "),F:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),lb:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Gd:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),rb:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
K:"Sun Mon Tue Wed Thu Fri Sat".split(" "),mb:"Sun Mon Tue Wed Thu Fri Sat".split(" "),P:"SMTWTFS".split(""),ca:"SMTWTFS".split(""),pa:["Q1","Q2","Q3","Q4"],w:["1st quarter","2nd quarter","3rd quarter","4th quarter"],a:["AM","PM"],b:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Yc:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],c:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],i:6,Hd:[5,6],h:5};function Av(a){a=String(a);if(void 0===zv.zi)return a;for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);b.push(48<=d&&57>=d?String.fromCharCode(zv.zi+d-48):a.charAt(c))}return b.join("")};var Bv;function Cv(a){var b=qa(),c=Math.floor((b-a)/6E4),b=!1;0>c&&(b=!0,c*=-1);if(60>c)return Bv(c,b,0);c=Math.floor(c/60);if(24>c)return Bv(c,b,1);c=new Date(qa());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Bv(c,b,2):""}
Bv=function(a,b,c){var d=Av(a);return b||0!=c?b&&0==c?1==a?"in "+(d+" minute"):"in "+(d+" minutes"):b||1!=c?b&&1==c?1==a?"in "+(d+" hour"):"in "+(d+" hours"):b||2!=c?b&&2==c?1==a?"in "+(d+" day"):"in "+(d+" days"):"":1==a?d+" day ago":d+" days ago":1==a?d+" hour ago":d+" hours ago":1==a?d+" minute ago":d+" minutes ago"};function Dv(){}B(Dv,zh);ea(Dv);g=Dv.prototype;g.m=function(){return"goog-tab"};g.lc=function(){return"tab"};g.Aa=function(a){var b=Dv.f.Aa.call(this,a);(a=a.Pb())&&this.qa(b,a);return b};g.Pb=function(a){return a.title||""};g.qa=function(a,b){a&&(a.title=b||"")};function Ev(a,b,c){Kh.call(this,a,b||Dv.t(),c);this.la(8,!0);this.Hb|=9}B(Ev,Kh);Ev.prototype.Pb=function(){return this.c};Ev.prototype.qa=function(a){this.d.qa(this.e(),a);this.Oh(a)};Ev.prototype.Oh=function(a){this.c=a};th("goog-tab",function(){return new Ev(null)});function Fv(){this.a="tablist"}B(Fv,vh);ea(Fv);Fv.prototype.m=function(){return"goog-tab-bar"};Fv.prototype.b=function(a){var b=Fv.f.b.call(this,a);if(!this.d){var c=this.m();this.d=Ib(Gv,c+"-top",Hv,c+"-bottom",Iv,c+"-start",Jv,c+"-end")}b.push(this.d[a.d]);return b};function Kv(a,b,c){a=a||Gv;var d=a==Iv||a==Jv?yh:xh;if(this.e())throw Error("Component already rendered");this.Vb=d;this.d=a;Wh.call(this,this.Vb,b||Fv.t(),c);Lv(this)}B(Kv,Wh);var Gv="top",Hv="bottom",Iv="start",Jv="end";g=Kv.prototype;g.Pa=null;g.n=function(){Kv.f.n.call(this);Lv(this)};g.l=function(){Kv.f.l.call(this);this.Pa=null};g.removeChild=function(a,b){Mv(this,a);return Kv.f.removeChild.call(this,a,b)};g.Pf=function(a){Kv.f.Pf.call(this,a);Nv(this,S(this,a))};
function Nv(a,b){b?b.Yb(!0):a.Pa&&a.Pa.Yb(!1)}function Mv(a,b){if(b&&b==a.Pa){for(var c=Ig(a,b),d=c-1;b=S(a,d);d--)if(b.Q()&&b.isEnabled()){Nv(a,b);return}for(c+=1;b=S(a,c);c++)if(b.Q()&&b.isEnabled()){Nv(a,b);return}Nv(a,null)}}g.vj=function(a){this.Pa&&this.Pa!=a.target&&this.Pa.Yb(!1);this.Pa=a.target};g.yj=function(a){a.target==this.Pa&&(this.Pa=null)};g.tj=function(a){Mv(this,a.target)};g.uj=function(a){Mv(this,a.target)};g.ld=function(){$h(this)||this.Ta(Ig(this,this.Pa||S(this,0)))};
function Lv(a){R(a).listen(a,"select",a.vj).listen(a,"unselect",a.yj).listen(a,"disable",a.tj).listen(a,"hide",a.uj)}th("goog-tab-bar",function(){return new Kv});function Ov(a,b){Uu.call(this,a,b)}B(Ov,Uu);g=Ov.prototype;g.m=function(){return Ov.f.m.call(this)+" new-record"};g.n=function(){Ov.f.n.call(this);var a=this.a;R(this).listen(a.parent,"context-change",this.gk);this.Uc(!0)};g.gk=function(a){var b=this.a;a.i||a.o?E(this.e(),!1):(bs(b,new er($(b.parent),Sr(b))),this.Uc(!0),a.c&&"s"==a.c.kind?(xv(this,{email1:a.c.a||"",full_name:a.c.b||""}),Pv(this,a.c),E(this.e(),!0)):E(this.e(),!1))};
function Pv(a,b){if(b&&b.a){var c=b.a,d=Is("Querying social data for "+c);G(Jt(b.a),function(a){if(a&&a.data.fc){Js(d,"Social data for "+c+" applied.");for(var b=this.c,h=!1,k=0;k<Gg(b);k++)h|=!!S(b,k).Gg(a);h&&uv(this,!0)}else Js(d,"Social data for "+c+" not available, dispatching crawlers now.")},function(a){Js(d,"Fail request due to "+(a.message?a.message:a))},a)}}g.If=function(){return $q};g.Ff=function(){return[]};g.Uc=function(){Ov.f.Uc.call(this,!0)};g.toString=function(){return"NewRecord"};function Qv(a,b,c,d,e){Gi.call(this,a,b,c,d,e||new qi("listbox"));this.F=this.N();this.v=null;this.Uf="listbox"}B(Qv,Gi);g=Qv.prototype;g.X=null;g.n=function(){Qv.f.n.call(this);Rv(this);Sv(this)};g.l=function(){Qv.f.l.call(this);this.X&&(this.X.u(),this.X=null);this.F=null};g.nd=function(a){Tv(this,a.target);Qv.f.nd.call(this,a);a.stopPropagation();K(this,"action")};g.Oi=function(){var a=Uv(this);Qv.f.hb.call(this,a&&a.R());Rv(this)};
g.od=function(a){var b=Qv.f.od.call(this,a);a!=b&&(this.X&&this.X.clear(),a&&(this.X?Fg(a,function(a){Vv(a);this.X.sb(a)},this):Wv(this,a)));return b};g.sb=function(a){Vv(a);Qv.f.sb.call(this,a);this.X?this.X.sb(a):Wv(this,Ji(this));Xv(this)};function Tv(a,b){if(a.X){var c=Uv(a);zu(a.X,b);b!=c&&K(a,"change")}}g.hb=function(a){if(null!=a&&this.X)for(var b=0,c;c=this.X.a[b]||null;b++)if(c&&"function"==typeof c.R&&c.R()==a){Tv(this,c);return}Tv(this,null)};
g.R=function(){var a=Uv(this);return a?a.R():null};function Uv(a){return a.X?a.X.Xb:null}function Wv(a,b){a.X=new wu;b&&Fg(b,function(a){Vv(a);this.X.sb(a)},a);Sv(a)}function Sv(a){a.X&&R(a).listen(a.X,"select",a.Oi)}function Rv(a){var b=Uv(a);Oh(a,b?b.Ob():a.F);var c=a.d.ha(a.e());c&&a.b.Aj(c)&&(null==a.v&&(a.v=ch(c,"label")),b=(b=b?b.e():null)?ch(b,"label"):a.v,bh(c,"label",b),Xv(a))}
function Xv(a){var b=a.d;if(b&&(b=b.ha(a.e()))){var c=a.s;b.id||(b.id=zg(yg.t()));ah(b,"option");bh(c,"activedescendant",b.id);a.X&&(c=a.X.gc(),c=eb(c,function(a){return a instanceof ni}),bh(b,"setsize",c),bh(b,"posinset",1+Au(a.X)))}}function Vv(a){a.Uf=a instanceof ni?"option":"separator"}g.$=function(a,b){Qv.f.$.call(this,a,b);Ih(this,64)?Ji(this).Ta(this.X?Au(this.X):-1):Xv(this)};th("goog-select",function(){return new Qv(null)});function Yv(){}B(Yv,Fi);ea(Yv);Yv.prototype.m=function(){return"goog-toolbar-menu-button"};function Zv(a,b,c,d){Qv.call(this,a,b,c||Yv.t(),d)}B(Zv,Qv);th("goog-toolbar-select",function(){return new Zv(null)});function $v(){}B($v,zh);ea($v);g=$v.prototype;g.lc=function(){};g.Aa=function(a){var b=a.b,c=b.j("div","goog-inline-block "+Ch(this,a).join(" "));a=b.j("input",{type:"text",value:a.N()||"",disabled:!a.isEnabled()});var d=b.j("div",this.m()+"-inner-box"),e=b.j("div",this.m()+"-clear","\u00d7"),e=b.j("div",this.m()+"-outer-box",[d,e]);b.appendChild(c,e);b.appendChild(d,a);return c};
g.ha=function(a){if(a)a:{a=a.getElementsByTagName("input");for(var b=0;b<a.length;++b){var c=a[b];if(!c.type||"TEXT"==c.type.toUpperCase()){a=c;break a}}a=null}else a=null;return a};g.oh=function(a){return this.ha(a.e())};g.Sf=da;g.Qf=function(a){return a.isEnabled()};g.Jc=da;g.md=function(a,b,c){$v.f.md.call(this,a,b,c);1==b&&(a=this.ha(a.e()))&&(a.disabled=c)};g.kb=da;g.Sb=function(a,b){var c=this.ha(a);c&&(c.value=b)};g.N=function(a){return(a=this.ha(a))?a.value:null};g.m=function(){return"wgui-textinput"};function aw(a,b,c,d){Kh.call(this,a,b||$v.t(),c);this.c=!d;Lh(this,!1);this.lf=!0;(b=this.e())&&this.d.Rf(b,!0);this.ac&=-256;this.la(32,!1);a||this.wd("")}B(aw,Kh);g=aw.prototype;g.n=function(){aw.f.n.call(this);var a=Jh(this);if(a){var b=this.ea||(this.ea=new Og);hh(b,a);R(this).listen(b,Pg,this.va)}a=this.c;b=hc(this.d.m()+"-clear",this.e());this.c=!!a;b&&(this.c?(R(this).listen(b,"click",this.qh),E(b,!0)):(R(this).O(b,"click",this.qh),E(b,!1)))};
g.qh=function(a){a.preventDefault();Oh(this,"");K(this,new H("action",this))};g.Me=function(a){Oh(this,a)};g.N=function(){return this.e()?this.d.N(this.e()):null};g.R=function(){return this.N()};g.Ob=function(){return this.N()||""};function bw(a,b){this.result=b;Qr.call(this,a,new er($(a),b.storeName,b.record));fr(this.G)||cw(this)}B(bw,Qr);function cw(a){F(a.parent.send("query",[{store:a.result.storeName,index:"id",key:a.result.primaryKey}]),function(a){a=a[0].result;if(a[0]){var c=dr(this.result.storeName);bs(this,new er($(this.parent),c,a[0]))}},a)}function dw(a,b){b&&(a.result=b,b.record?bs(a,new er($(a.parent),b.storeName,b.record)):b.storeName&&t(b.primaryKey)&&cw(a))}
bw.prototype.clear=function(){this.Ga()||(bs(this,null),this.result=null)};bw.prototype.toString=function(){return"ydn.crm.sugarcrm.model.ResultRecord:"+this.G};bw.prototype.Ga=function(){return!fr(this.G)&&!this.result};function ew(a,b){Q.call(this,b);this.a=a;this.d=new Q(b);this.c=null;this.h=[];this.k=0}B(ew,Q);g=ew.prototype;g.m=function(){return"search-panel"};
g.A=function(){ew.f.A.call(this);var a=this.b,b=this.e();b.classList.add(this.m());var c=a.j("div","header");b.appendChild(c);this.c=new Su(null,null,a);for(var d=new si(a),e=0;e<$q.length;e++)d.D(new ni($q[e]),!0);e=new Zv("Module",d,null,a);this.c.D(e,!0);d=new aw("");this.c.D(d,!0);this.c.render(c);e.T(!1);c=a.j("div","content");a=a.j("div","content-wrapper",[c]);b.appendChild(a);this.D(this.d,!0);b=d.e().querySelector("input");b.setAttribute("placeholder","Search ...");b.setAttribute("title",
"Search name, email, phone, id, title, description, etc.")};g.n=function(){ew.f.n.call(this);var a=S(this.c,1);R(this).listen(a,"action",this.hk,!0)};function fw(a,b){if(b){for(var c=Gg(a.d),d=0;d<c;d++){var e=S(a.d,d).a;if(e.Ga()){dw(e,b);return}}30<c?(e=S(a.d,0).a,dw(e,b)):(c=new bw(a.a,b),c=new Uu(c,a.b),a.d.D(c,!0))}}
function gw(a,b,c,d){G(os(a.a,b,c,d,!0),function(a){var b=a[0];b.result[0]&&(a=dr(b.store),b=b.result[0],fw(this,{storeName:a,primaryKey:b.id,record:b,value:d,tokens:[{keyPath:c}]}));hw(this)},function(a){hw(this);throw a;},a)}
function iw(a,b){0==a.k&&(a.k=b);var c=100*(a.k-b)/a.k,d=S(a.c,1).e(),d=ic(document,"input",null,d)[0].style,e=c+.1,f=["rgb(255, 255, 255) 0%"];99>c&&(f[1]="rgb(135, 224, 253) "+c.toFixed(1)+"%",f[2]="rgb(255, 255, 255) "+e.toFixed(1)+"%");f.push("rgb(255, 255, 255) 100%");d.background="linear-gradient(to right, "+f.join(", ")+")"}
function hw(a){var b=a.h[0];if(b){b.wc++;iw(a,4*(a.h.length-1)+(4-b.wc));var c=a.a;0==b.wc?gw(a,b.module,"id",b.Oc):1==b.wc?gw(a,b.module,"ydn$emails",b.Oc):2==b.wc?(c=b.Oc.match(/\d/g),3>(c?c.length:0)?hw(a):gw(a,b.module,"ydn$phones",b.Oc)):3==b.wc?G(ps(c,b.module,b.Oc),function(a){a=a[0].fullTextResult;for(var b=a.length||0,c=0;c<b;c++)fw(this,a[c]);hw(this)},function(a){throw a;},a):(a.h.shift(),0<a.h.length&&hw(a))}}
g.hk=function(){for(var a=S(this.c,1).N(),b=Gg(this.d)-1;0<=b;b--)S(this.d,b).a.clear();this.k=0;if(a&&(a=a.trim(),2<=a.length)){b=(b=Uv(S(this.c,0)))?b.Ob():null;this.h.length=0;if(b)this.h[0]={module:b,Oc:a,wc:-1};else for(b=0;b<$q.length;b++)this.h[b]={module:$q[b],Oc:a,wc:-1};hw(this)}};g.B=function(){return hc("content",this.e())};function jw(a,b){Q.call(this,b);this.a=a}B(jw,Q);g=jw.prototype;g.m=function(){return"detail-panel"};g.A=function(){jw.f.A.call(this);var a=this.b,b=this.e();b.classList.add(this.m());b.appendChild(a.j("div","header"));b.appendChild(a.j("div","content"))};g.B=function(){return this.e().querySelector(".content")};g.n=function(){jw.f.n.call(this)};g.clear=function(){this.B().innerHTML="";this.e().querySelector(".header").innerHTML=""};
function kw(a,b){var c=a.a.Re.r(),d=hs(new Date),c=wl.bound([c,d],[c,"\uffff"]);return{store:b,index:"assigned_user_id, "+ir(b),keyRange:c}}
function lw(a){a.e();G(a.a.send("activity-stream"),function(a){var c=this.b,d=c.j("span");if(0<a.length)c=hr(a[a.length-1].date_modified),c=Cv(c.getTime())||c.toLocaleDateString(),d.textContent=a.length+" records updated since "+c;else{d.appendChild(Mc(c,"No activity? Have you "));var e=c.j("a",{href:chrome.extension.getURL("setup.html")},"setup");d.appendChild(e);d.appendChild(Mc(c,"?"))}c=this.e().querySelector(".header");c.innerHTML="";c.appendChild(d);for(d=0;d<a.length;d++){var c=a[d],e=this.b,
f=this.a,h=c._module,k=new er($(f),h,c),l=e.j("div","icon small",c._module.substr(0,2)),m=e.j("span"),n=k.value("modified_user_id"),q=k.value("created_by");n?(n=e.j("a",{href:as(f,"Users",n),target:"_blank"},k.value("modified_user_name")),m.appendChild(n),m.appendChild(Mc(e," "))):q&&(n=e.j("a",{href:as(f,"Users",q),target:"_blank"},k.value("created_by_name")),m.appendChild(n),m.appendChild(Mc(e," ")));m.appendChild(Mc(e,c.date_modified==c.date_entered?"created ":"updated "));f=e.j("a",{href:as(f,
k.module,k.r()),target:"_blank"},jr(k));m.appendChild(f);h=h.replace(/ies$/,"y").replace(/s$/,"");m.appendChild(Mc(e," "+h+""));h=hr(c.date_modified);h=Cv(h.getTime())||"on "+h.toLocaleDateString();m.appendChild(Mc(e," "+h+"."));e=e.j("div",null,[l,m]);e.className="detail-item record-header "+c._module;this.B().appendChild(e)}},function(a){throw a;},a)}
function mw(a,b){var c=kw(a,b);G(a.a.send("values",c),function(a){var c=this.b.j("span");c.textContent=a.length+" upcoming "+b;var f=this.e().querySelector(".header");f.innerHTML="";f.appendChild(c);for(c=0;c<a.length;c++){var f=a[c],h=b,k=this.b,l=this.a,m=$(l),n=new er(m,h,f),q=k.j("span"),h="Calls"==h?"call":"Tasks"==h?"finish":"Meetings"==h?"meet":"Opportunities"==h?"close":"do",h=h.charAt(0).toUpperCase()+h.substr(1)+" ";q.appendChild(Mc(k,h));l=k.j("a",{href:as(l,n.module,n.r()),target:m},jr(n));
q.appendChild(l);n=n.a?hr(n.a[ir(n.module)]):new Date("NaN");n=Cv(n.getTime())||"on "+n.toLocaleDateString();q.appendChild(Mc(k," "+n+"."));k=k.j("div",null,[q]);k.className="detail-item record-header "+f._module;this.B().appendChild(k)}},function(a){throw a;},a)};function nw(a,b){Q.call(this,b);this.a=a;this.c=new Kv(Gv,void 0,b);this.d=new jw(a,b);this.search=new ew(a,b);var c=new Qr(a,new er($(a),"Leads"));this.h=new Ov(c,b)}B(nw,Q);g=nw.prototype;g.m=function(){return"activity-panel"};g.B=function(){return this.e().querySelector(".content")};
g.A=function(){nw.f.A.call(this);var a=this.b,b=this.e();T(b,this.m());var c=a.j("div","content");b.appendChild(c);this.D(this.c,!0);b=a.j("div");c=xr("magnifying-glass");b.appendChild(c);b=new Ev(b);b.qa("Search");this.c.D(b,!0);b.B().classList.add("activity-search");b=a.j("div");c=xr("plus");b.appendChild(c);b=new Ev(b);b.qa("Create a new record");this.c.D(b,!0);b.B().classList.add("new");b=a.j("div");c=xr("rss");b.appendChild(c);b=new Ev(b);b.qa("Activity feed");this.c.D(b,!0);b.B().classList.add("activity-feed");
for(b=0;b<cr.length;b++){var c=cr[b],d=xr(c),d=a.j("div","activity-tab-label",d),d=new Ev(d);d.qa(c);this.c.D(d,!0);d.B().classList.add(c)}this.D(this.search,!0);this.D(this.h,!0);this.D(this.d,!0)};g.n=function(){nw.f.n.call(this);var a=this.a,b=R(this);b.listen(a,"login",this.Xh);b.listen(this.c,"select",this.wj);b.listen(this.c,"unselect",this.xj);E(this.e(),!1);E(this.h.e(),!1);E(this.d.e(),!1);a.isLogin()&&this.Xh()};g.xj=function(){this.d.clear()};
g.wj=function(){var a;a=this.c;a=Ig(a,a.Pa);0==a?(E(this.search.e(),!0),E(this.h.e(),!1),E(this.d.e(),!1)):1==a?(E(this.search.e(),!1),E(this.h.e(),!0),E(this.d.e(),!1)):(E(this.search.e(),!1),E(this.h.e(),!1),E(this.d.e(),!0),2==a?lw(this.d):mw(this.d,cr[a-3]))};g.Xh=function(){var a=this;setTimeout(function(){ow(a)},2E3);setTimeout(function(){pw(a)},3E3)};
function ow(a){G(a.a.send("activity-stream"),function(a){if(0<a.length){var c=hr(a[a.length-1].date_modified);E(this.e(),!0);a=a.length;var d=S(this.c,2);d.B();0<a?(c=Cv(c.getTime())||c.toLocaleDateString(),d.qa(a+" records updated since "+c)):d.qa("")}},function(a){throw a;},a)}
function pw(a,b){var c=b||0,d=cr[c];if(d){var e=kw(a.d,d);G(a.a.send("keys",e),function(a){pw(this,c+1);E(this.e(),!0);a=a.length;var b=cr.indexOf(d),b=S(this.c,b+3);b.B().querySelector(".activity-tab-label");a?b.qa(a+" upcoming "+d):b.qa("No upcoming "+d)},function(a){throw a;},a)}};function qw(a,b){Q.call(this,b);this.a=a}B(qw,Q);g=qw.prototype;g.logger=O("ydn.crm.sugarcrm.ui.Header");g.m=function(){return"sugar-header"};g.B=function(){return this.e().querySelector(".sugar-header-content")};
g.A=function(){qw.f.A.call(this);var a=this.e(),b=this.a,c=this.b;T(a,this.m());var d=c.j("a");d.textContent=$(b);d.href=ms(b);var e=xr("sugarcrm"),e=c.j("div","icon-box",e),d=c.j("div",{"class":"main-title",title:"SugarCRM"},[e,d]);a.appendChild(d);d=[];e=chrome.extension.getURL("option-page.html")+"#credentials";e=chrome.extension.getURL("host-permission.html")+"?"+$(b);e=c.j("a",{className:"maia-button blue",href:e,"data-window-height":"40","data-window-width":"200",target:"host-permission"},"Grant host permission");
e.setAttribute("title","Your permission is required to connect your server from this extension. Without permission request to server will be slow.");d.push(e);d=c.j("div",{"class":"host-permission"},d);a.appendChild(d);var e=c.j("input",{name:"username",type:"text"}),e=c.j("div",null,[e]),f=c.j("input",{name:"password",type:"password"}),f=c.j("div",null,[f]),h=c.j("div","message"),e=c.j("div","login-form",[e,f,h]),f=c.j("div","sugar-header-content");a.appendChild(e);a.appendChild(f);E(d,!b.about.hostPermission);
E(e,!b.isLogin());E(f,!!this.a.about.hostPermission);a=new nw(b,c);this.D(a,!0)};g.n=function(){qw.f.n.call(this);var a=this.e(),b=R(this),c=this.e().querySelector(".host-permission"),a=a.querySelector(".login-form"),a=new Og(a);b.listen(a,Pg,this.fk);c=c.querySelector("a");b.listen(c,"click",bv,!0);b.listen(this.a,"hag",this.dj);b.listen(this.a,"login",this.mj)};g.mj=function(){var a=this.e().querySelector(".login-form");E(a,!this.a.isLogin())};
g.dj=function(){var a=this.e().querySelector(".host-permission"),b=!!this.a.about.hostPermission;E(a,!b);E(this.B(),b)};g.fk=function(a){if(a.a==Tg){var b=this.e().querySelector(".login-form"),c=this.a;a=b.querySelector("input[name=username]").value;var d=b.querySelector("input[name=password]").value,e=b.querySelector(".message");e.textContent="logging in...";G(ns(c,a,d),function(){c.isLogin()?(e.textContent="",E(b,!1)):e.textContent="login failed"},function(a){e.textContent="Error: "+a},this)}};function rw(a,b){Q.call(this,b);this.a=a}B(rw,Q);g=rw.prototype;g.m=function(){return"sugar-panel"};g.B=function(){return this.e().querySelector(".sugar-panel-content")};g.A=function(){rw.f.A.call(this);var a=this.b,b=this.e();T(b,this.m());var c=a.j("div","sugar-panel-head"),a=a.j("div","sugar-panel-content");b.appendChild(c);b.appendChild(a)};g.n=function(){rw.f.n.call(this);R(this).listen(this.a,["gdata-change"],this.ik)};g.ik=function(){var a=this.a,a=!(!a.c||!a.c.a);E(this.B(),a)};g.logger=O("ydn.crm.sugarcrm.ui.SimpleSugarPanel");function sw(){J.call(this);this.b=this.a=null}B(sw,J);sw.prototype.l=function(){this.a&&(this.a.u(),this.b=this.a=null)};sw.prototype.e=function(){return this.b};sw.prototype.c=function(a){var b=this.e();this.getState()==tw?(a.preventDefault(),b.textContent="Error reported, thanks.",b.removeAttribute("href"),b.removeAttribute("title"),b.classList.remove("error")):K(this,a)};var tw="e";sw.prototype.getState=function(){var a=this.e();return a.classList.contains("error")?tw:a.href?"n":"v"};
function uw(a,b,c){a=a.e();a.classList.remove("error");c?a.href=c:a.removeAttribute("href");b?(a.textContent=b,E(a,!0)):E(a,!1);a.removeAttribute("title")}function vw(a,b){var c=a.e();c.classList.add("error");c.href="#error";c.textContent="error";b&&b instanceof Error&&(b=b.name+": "+b.message);c.setAttribute("title","Click to report error"+(b?" for "+b:""))};function ww(a,b){Q.call(this);this.a=a;this.parent=b||null;this.c=new sw}B(ww,Q);g=ww.prototype;g.logger=O("ydn.crm.ui.GmailCmd");g.m=function(){return"gmail-cmd-panel"};g.A=function(){ww.f.A.call(this);var a=this.e(),b=this.b;a.classList.add(this.m());var b=b.j("a",{"class":"archive"},"."),c=this.c;c.b=b;c.a=new zf(c);c.a.listen(b,"click",c.c,!0);a.appendChild(b)};
function xw(a,b){var c=as(a.a,"Emails",b.id);uw(a.c,"View",c);c=a.c.e();c.setAttribute("target","gmail");c.setAttribute("title","View archived email in SugarCRM")}function yw(a){uw(a.c,"Archive","#archive");a.c.e().setAttribute("title","Archive this email message to SugarCRM")}
function zw(a){uw(a.c,".");setTimeout(function(){uw(a.c,"..");var b=Aw(a.e());b.jg?(uw(a.c,"..."),G(a.a.send("query",[{store:"Emails",index:"message_id",key:b.jg}]),function(b){(b=b[0]&&b[0].result?b[0].result[0]:null)?xw(a,b):yw(a)},function(b){yw(a);throw b;})):1<b.ag.length?yw(a):vw(a.c,"gmail message cannot be parsed")},100)}g.n=function(){ww.f.n.call(this);R(this).listen(this.c,"click",this.Pi);zw(this)};
function Aw(a){var b="",c="",d="",e="",f="",h=Jc(a,"TR");if(b=h.children[0].querySelector("span[email]"))b=b.getAttribute("email");else return lq.log(ag,"cannot sniff sender email",void 0),null;if(a=h.children[1].querySelector("span[alt]"))a=a.getAttribute("alt"),a=new Date(a.replace(" at",""));else return lq.log(ag,"cannot sniff date sent",void 0),null;var k=h.nextElementSibling;if(!k||"TR"!=k.tagName)return lq.log(ag,"to email address TR expect after title TR",void 0),null;for(var l=k.querySelectorAll("span[email]"),
k=0;k<l.length;k++)c&&(c+=", "),c+=l[k].getAttribute("email");for(var h=Jc(h,"TABLE"),m=h.parentElement.nextElementSibling,k=0;m&&10>k;k++)if(l=m.querySelector("div[style]")){d=l.parentElement.className.split(/\s/);k=d.map(function(a){return a.length});k=k.indexOf(Math.max.apply(Math,k));10<d[k].length&&(e=d[k].substring(1),"m"!=d[k].charAt(0)&&lq.log(eg,"not start with m? "+d[k],void 0));d=l.innerHTML;break}else m=m.nextElementSibling;h=Jc(h.parentElement,"TABLE");for(k=0;h&&10>k&&"presentation"!=
h.getAttribute("role");k++)h=Jc(h,"TABLE");"presentation"==h.getAttribute("role")?(h=h.querySelector("h2"))?f=h.textContent:lq.log(ag,"email subject cannot be sniff",void 0):lq.log(ag,"expect a presentation role TABLE",void 0);h=ct(Xs.t());return{Ci:b,Yj:c,bh:a,ag:d,Bj:h,jg:e,subject:f}}
g.Pi=function(a){if(ua(a.target.href)){a.preventDefault();uw(this.c,"archiving...");var b=a=void 0,c=this.parent?Bw(this.parent):null;c&&(a=c.module,b=c.id);(c=Aw(this.e()))?G(qs(this.a,c,a,b),function(a){xw(this,a)},function(a){vw(this.c,a)},this):vw(this.c,"Cannot gather email message")}};function Cw(a){this.b=a;this.a=[];a=document.body;(new MutationObserver(this.c.bind(this))).observe(a,{childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:["data-tooltip"]})}Cw.prototype.logger=O("ydn.crm.ui.GmailCmdInjector");
Cw.prototype.c=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c].target;if("Show details"==d.getAttribute("data-tooltip")){d=Jc(d,"TABLE");if(!d)break;d=Jc(d.parentElement,"TABLE");if(!d)break;d=d.querySelector('div[data-tooltip="Reply"]');if(!d)break;var e;a:{for(e=0;e<this.a.length;e++)if(!document.body.contains(this.a[e].e())){this.a[e].J&&this.a[e].W();e=this.a[e];break a}e=new ww(this.b);this.a.push(e)}var f=document.createElement("span");f.setAttribute("data-sugarcrm",$(this.b));d.parentElement.insertBefore(f,
d);e.render(f)}}};function Dw(a,b){Q.call(this,b);this.a=a;for(var c=[],d=0;d<br.length;d++){var e=br[d];c[d]={label:e,name:e}}this.c=new wr({className:"menu"},[{name:"add",label:"Add to",children:c},null,{label:"Sync",name:"sync"}])}B(Dw,Q);g=Dw.prototype;g.logger=O("ydn.crm.ui.gmail.ContactPanel");
g.A=function(){Dw.f.A.call(this);var a=this.e();a.classList.add("gmail-contact-panel");var b=this.b,c=xr("google","icons-small"),c=b.j("div","badge-icon google",c);c.setAttribute("title","Gmail contact");var d=b.j("a","title center");d.setAttribute("title","Open in Gmail contact");d.setAttribute("target","gmail");b=b.j("div","head flex-bar",[c,d]);this.c.render(b);a.appendChild(b)};
g.n=function(){Dw.f.n.call(this);R(this).listen(this.a,["context-change"],this.mk);var a=this.e().getElementsByClassName("more-menu")[0];R(this).listen(a,"click",this.nk)};g.mk=function(){this.refresh()};
g.refresh=function(){var a=this.a,b=a.b;if(b){var c=this.e().querySelector(".head").querySelector(".title"),d;d=b.getData();d=Ab(d,"gd$name","gd$fullName","$t")||"";c.textContent=d;c.href="#contact/"+zq(b);E(this.e(),!0);b=!!a.zb();Br(this.c,"add",!b);b?(Br(this.c,"sync",!0),xs(a)?Cr(this.c,"Remove sync"):Cr(this.c,"Sync")):(Br(this.c,"sync",!1),Cr(this.c,"Sync"))}else E(this.e(),!1)};g.nk=function(a){if(a=zr(a))"sync"==a?(a=this.a,a.zb()?xs(a)?Ew(this):Fw(this):Ew(this)):Gw(this,a)};
function Fw(a){a=a.a;var b=Is("Linking gmail contact...");G(ss(a),function(){Js(b,"Linked ")},function(a){window.console.error(a.stack||a);Js(b,"Linked failed "+(a.message||"."),"e")})}function Ew(a){a=a.a;var b=a.zb(),c=" all records.";if(b)var d=b.module,b=b.r(),c=d+" record "+b;var e=Is("Removing gmail contact link to "+c);G(ts(a),function(){Js(e,"Removed link from "+c)},function(a){window.console.error(a.stack||a);Js(e,"Removing link failed "+(a.message||"."),"e")})}
function Gw(a,b){var c=a.a,d=Is("Adding... to "+b),e;c.b?(e=us(c,b),e=F(e,function(){Js(d,"Linking GData and SugarCRM...");return ss(c)},a)):e=As(c,b);G(e,function(){Js(d,"Added.")},function(a){a=a instanceof Error?a.name+" "+a.message:x(a)?cl(a):a;Js(d,a,"","e");throw Error(a);},a)};function Hw(a,b){rw.call(this,a,b);new Cw(a)}B(Hw,rw);Hw.prototype.A=function(){Hw.f.A.call(this);var a=this.b;this.e().querySelector(".sugar-panel-head");this.B();var b=this.a,c=new Qr(b,new er($(b),"Leads")),c=new Ov(c,a);this.D(c,!0);c=new Dw(b,a);this.D(c,!0);b=new Qr(b,new er($(b),"Leads"));a=new yv(b,a);this.D(a,!0)};Hw.prototype.logger=O("ydn.crm.sugarcrm.ui.ContextSugarPanel");function Bw(a){for(var b=0;b<Gg(a);b++){var c=S(a,b).a;if(fr(c.G))return{module:Sr(c),id:c.r()}}return null};function Iw(a){this.a=this.b=null;this.o=(this.c=!!a)?"&#x25BC;":"&#x25B2;";this.d=this.c?"&#x25B2;":"&#x25BC;";this.g=this.i.bind(this)}
Iw.prototype.render=function(a){this.b=document.createElement("div");this.a=document.createElement("span");var b=document.createElement("div");this.b.className="status-base";b.className="status-panel";this.a.className="status-bar";var c=document.createElement("span"),d=document.createElement("a"),e=document.createElement("span"),f=document.createElement("span");f.className="status-detail-button";f.innerHTML=this.d;f.setAttribute("title","Show previous messages");this.a.appendChild(c);this.a.appendChild(d);
this.a.appendChild(e);c=document.createElement("div");c.className="status-message";c.appendChild(this.a);c.appendChild(f);this.b.appendChild(c);this.b.appendChild(b);a.appendChild(this.b);f.onclick=this.h.bind(this)};Iw.prototype.h=function(){this.b.querySelector(".status-panel").classList.contains("open")?Jw(this,!1):Jw(this,!0)};
function Jw(a,b){var c=a.b.querySelector(".status-detail-button");c.innerHTML=b?a.o:a.d;var d=a.b.querySelector(".status-panel");if(b){d.classList.add("open");c.classList.add("open");c.setAttribute("title","Hide message panel");c=a.b.querySelector(".status-panel");c.innerHTML="";for(var d=document.createDocumentFragment(),e=Hs.a.length-1;0<=e;e--){var f=Hs.a[e];if(!f)break;var h=document.createElement("div");if(f.title){var k=document.createElement("span");k.textContent=f.title;h.appendChild(k)}f.rd&&
(k=document.createElement("a"),k.textContent=f.eg,k.href=f.rd,f.Ae&&(k.setAttribute("title",f.Ae),k.setAttribute("target","_blank")),h.appendChild(k));f.update&&(k=document.createElement("span"),k.textContent=f.update,h.appendChild(k));d.appendChild(h)}c.appendChild(d);a.c&&(c.style.marginTop=-18-c.clientHeight+"px");document.body.addEventListener("click",a.g,!0)}else d.classList.remove("open"),c.classList.remove("open"),c.setAttribute("title","Show previous messages"),d.innerHTML="",document.body.removeEventListener("click",
a.g,!0)}Iw.prototype.i=function(a){var b=a.target,c=this.b.querySelector(".status-panel");b&&b instanceof Element&&b!=c&&!c.contains(b)&&(c.classList.contains("open")&&(a.preventDefault(),a.stopPropagation()),Jw(this,!1))};function Kw(a){Q.call(this,a)}B(Kw,Q);g=Kw.prototype;g.m=function(){return"sidebar"};
g.A=function(){Kw.f.A.call(this);var a=this.e(),b=this.b;a.classList.add(this.m());var c=b.j("div","head"),d=b.j("div","content");a.appendChild(c);a.appendChild(d);a=b.j("div","no-sugar-panel");b=b.createElement("a");b.textContent="Setup SugarCRM";b.href=chrome.extension.getURL("setup.html")+"#modal";b.className="sugarcrm-link maia-button blue";b.setAttribute("data-window-height","600");b.setAttribute("data-window-width","800");a.appendChild(b);E(a,!1);c.appendChild(a)};g.B=function(){return this.e().querySelector(".content")};
function Lw(a){return a.e().querySelector(".head")}g.n=function(){Kw.f.n.call(this);var a=R(this),b=Lw(this).querySelector("a.sugarcrm-link");a.listen(b,"click",bv,!0)};g.zc=function(){Xs.t().isLogin()?E(this.B(),!0):E(this.B(),!1)};g.logger=O("ydn.crm.ui.SugarListPanel");
function Mw(a,b){var c=Yq("sugarcrm",b).send("details");Xs.t();return F(c,function(a){for(var c=0;c<a.modulesInfo.length;c++){var f=a.modulesInfo[c],h="",k="",l=void 0;for(l in f.module_fields){var m=f.module_fields[l];0<="created_by created_by_name date_entered date_modified deleted modified_user_id modified_by_name id".split(" ").indexOf(l)&&(m.calculated=!0);if(0<=["salutation","name","last_name","first_name","full_name"].indexOf(l))m.group="name";else if(/^email\d?$/.test(l))m.group="email";else if(/^phone?/.test(l))m.group=
"phone";else if(!m.group&&ta(l,h)){m.group=k;continue}h=l;k=m.group}for(l in f.link_fields)h=f.link_fields[l],"contact"!=l||h.module||(h.module="Contacts")}a=new rs(a.about,a.modulesInfo,0,a.serverInfo);Nw(this,b)||this.kf(a)},a)}g.kf=function(a){a=new rw(a,this.b);this.D(a,!0)};function Nw(a,b){for(var c=0;c<Gg(a);c++){var d=S(a,c);if(d instanceof rw&&$(d.a)==b)return!0}return!1}
function Ow(a,b){var c=Lw(a).querySelector(".no-sugar-panel");c.querySelector("a");if(Xs.t().isLogin()){0==b.length?E(c,!0):E(c,!1);for(var c=[],d=Gg(a)-1;0<d;d--){var e=S(a,d);e instanceof rw&&!(0<=b.indexOf($(e.a)))&&(a.logger.log(dg,"disposing sugar panel "+$(e.a),void 0),e.a.u(),a.removeChild(e,!0),e.u())}for(d=0;d<b.length;d++)Nw(a,b[d])||(a.logger.log(dg,"adding sugar panel "+b[d],void 0),c.push(Mw(a,b[d])));yo(c)}else E(c,!1),Ge(!1)}g.T=function(a){E(this.e(),a)};function Pw(a,b){Q.call(this,b);this.d=null;this.h=a;this.c=new xf(this.Zj,500,this)}B(Pw,Kw);g=Pw.prototype;g.logger=O("ydn.crm.gmail.ContextSidebar");
g.A=function(){Pw.f.A.call(this);var a=this.b,b=this.e();b.classList.add("context-sidebar");var c=b.querySelector(".head"),d=a.j("div","sidebar-status"),e=new Iw(!0);e.render(d);Hs.b.push(e);b.appendChild(d);b=a.j("div","toolbar flex-bar");d=a.j("input","target-email");d.setAttribute("list","all-emails");b.appendChild(d);d=xr("search");a=a.j("span","search svg-button");a.appendChild(d);b.appendChild(a);c.appendChild(b);document.getElementById("all-emails")||(c=document.createElement("datalist"),c.id=
"all-emails",document.body.appendChild(c))};g.n=function(){Pw.f.n.call(this);var a=R(this),b=this.e().querySelector(".toolbar"),c=b.querySelector("input"),b=b.querySelector(".search");a.listen(c,"change",this.Jh);a.listen(b,"click",this.Jh)};g.Jh=function(){var a=this.e().querySelector("input.target-email").value,b=0<a.indexOf("@")?a:void 0,a=b?void 0:a,c=ct(Xs.t()),b=new Kq(c,b,a);b.kind="s";Qw(this,b)};
g.Zj=function(){for(var a=document.querySelectorAll("span[email]"),b=[],c=a.length-1;0<=c;c--){var d=a[c].getAttribute("email");-1==b.indexOf(d)&&-1==d.indexOf("daemon@")&&-1==d.indexOf("noreply@")&&b.push(d)}a=document.getElementById("all-emails");a.innerHTML="";for(c=0;c<b.length;c++)d=document.createElement("option"),d.value=b[c],a.appendChild(d)};g.l=function(){this.c.u();this.c=null;Pw.f.l.call(this)};
g.kf=function(a){var b=new Hw(a,this.b);this.D(b,!0);!this.d&&a.isLogin()&&(this.logger.log(eg,"compose template initialized.",void 0),a=this.d=new Bs(a),b=this.h,a.b&&a.L.listen(a.b,"nc",a.g),b&&(a.b=b,a.L.listen(b,"nc",a.g)))};function Qw(a,b){for(var c=Gg(a),d=0;d<c;d++){var e=S(a,d);e instanceof Hw&&(e.a.update(b),yf(a.c))}}g.zc=function(){Pw.f.zc.call(this)};function Rw(){J.call(this);this.L=new zf(this);this.b=new tf(400);ef(this.b,vf,this.i,!0,this);this.a=0;this.c="";var a=this.history=new Sw,b=Vk(new Kk(document.location.href))+"/";a.Sj=b;ef(this.history,Tw,this.g,!1,this);this.d=null}B(Rw,J);Rw.prototype.logger=O("ydn.crm.gmail.GmailObserver");
Rw.prototype.g=function(a){a.c!=this.d&&(this.d=a.c,this.c=location.href,a=a.c||location.hash,"#"==a.charAt(0)&&(a=a.substr(1)),a=/^contact(\/\[w\W]+)?\/[a-f\d]{2,18}$/.test(a)?"cd":/^contacts(\/\[w\W]+)?/.test(a)?"ct":/compose=new$/.test(a)?Xg:/^(label\/)?[\w\+]+$/.test(a)?"in":/^(label\/)?[\w\+]+\/[a-f\d]{10,18}$/.test(a)?"em":"un","em"==a&&uf(this.b),K(this,new Uw(a,this)))};
function Vw(a,b){if(!a)return null;var c=a.querySelector("img[jid]");if(!c){if(b&&(c=a.querySelector("span[title]"))){var d=c.getAttribute("title").trim();if(0<d.length){var e=document.querySelector('span[name="'+d+'"][email]');if(e)return c=ct(Xs.t()),e=e.getAttribute("email"),new Kq(c,e,d)}}return null}for(d=c.getAttribute("jid");c&&"TD"!=c.tagName;)c=c.parentElement;e=c.nextElementSibling.querySelector("span[title]").getAttribute("title");c=ct(Xs.t());return new Kq(c,d,e)}
Rw.prototype.setEnabled=function(a){this.history.setEnabled(a)};Rw.prototype.i=function(){this.a++;this.c!=location.href&&(P(this.logger,"url already changed"),this.b.stop());40<this.a&&(P(this.logger,"sniff give up after "+this.a),this.b.stop());var a;if(a=(a=document.querySelector('table[role="presentation"]'))?a.querySelector("tr").children[2].querySelector("table"):null){var b=Vw(a,5<this.a);b&&(this.b.stop(),this.a=0);K(this,new Ww(a,b,this))}};var Wg="pc";
function Uw(a,b){H.call(this,Wg,b);this.c=a}B(Uw,H);function Ww(a,b,c){H.call(this,"cc",c);this.i=a;this.c=b}B(Ww,H);var Xw;function it(){if(!Xw){var a=chrome.runtime.getManifest();Xw="Email Tracker"==a.short_name?"Email Tracker":"Email Tracker for Gmail"==a.short_name?"Email Tracker for Gmail":"SugarCRM"==a.short_name?"SugarCRM":""}return Xw};function Yw(){this.b=this.c=null;this.L=new zf(this);this.a=null}g=Yw.prototype;g.logger=O("ydn.crm.gmail.Tracker");function Zw(a,b){a.c&&a.L.listen(a.c,"nc",a.Zh);b&&(a.c=b,a.L.listen(b,"nc",a.Zh))}function $w(a){if(!a.b){var b=Xs.t();if(!b.g){var c=new Ms;c.update(b.a.Id.$t);b.g=hq(Os(c))}a.b="https://imgsrv-dot-yathit-app.appspot.com/t/"+b.g+"/"+qa()+".gif"}return a.b}
function ax(a,b){var c=Ng(b),d=c.querySelector("img.tk-ln");d||(d=document.createElement("img"),d.src=$w(a),d.className="tk-ln",c.insertBefore(d,c.firstChild),c=Mg(b),c={path:Vk(new Kk($w(a))),recipients:c,subject:Kg(b).querySelector('input[name="subjectbox"]').value},G(Tq(Wq()).send("request",{path:"track",method:"PUT",body:JSON.stringify(c)}),function(a){rg(this.logger,"sent track: "+a.status)},function(a){window.console.log(a.stack||a)},a))}g.Kh=function(a){this.a=Ih(a.target,16)};
function bx(a){for(var b=0;b<Gg(a);b++){var c=S(a,b);if(c instanceof Qu)return c}return null}g.Ch=function(a){a=a.target;this.L.O(a,"es",this.Dh);this.L.O(a,"cc",this.Ch);this.L.O(bx(a),"action",this.Kh)};g.Dh=function(a){a=a.target;var b;(b=bx(a))?b=Ih(b,16):(window.console.warn("Tracking button not found"),b=!1);b&&ax(this,a)};
g.Zh=function(a){a=a.c;var b=xr("visibility"),b=new Qu(b);b.qa("Track this email");var c;ha(this.a)?c=this.a:(c=Xs.t(),c=Ab(c.i||$s,["tracking","user-default"]),c="always"==c?!0:"do-not-track"==c?!1:"disable"==c?!1:"Email Tracker"==it()?!0:!1);Sh(b,c);a.D(b,!0);b.e().classList.add("tracking-button");this.L.listen(a,"es",this.Dh);this.L.listen(a,"cc",this.Ch);this.L.listen(b,"action",this.Kh)};var Tw="navigate";function cx(a){H.call(this,Tw);this.c=a}B(cx,H);function Sw(a){J.call(this);this.a=a||window;ef(this.a,"popstate",this.De,!1,this);ef(this.a,"hashchange",this.De,!1,this)}B(Sw,J);g=Sw.prototype;g.Lf=!1;g.Sj="/";g.setEnabled=function(a){a!=this.Lf&&(this.Lf=a)&&K(this,new cx(this.getToken()))};g.getToken=function(){var a=this.a.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)};g.setToken=function(a,b){a!=this.getToken()&&(this.a.history.pushState(null,b||this.a.document.title||"","#"+a),K(this,new cx(a)))};
g.l=function(){nf(this.a,"popstate",this.De,!1,this);nf(this.a,"hashchange",this.De,!1,this)};g.De=function(){this.Lf&&K(this,new cx(this.getToken()))};function dx(a,b){rw.call(this,a,b)}B(dx,rw);dx.prototype.A=function(){dx.f.A.call(this);var a=this.b,b=this.e().querySelector(".sugar-panel-head"),c=this.B();E(c,!1);(new qw(this.a,a)).render(b)};dx.prototype.logger=O("ydn.crm.sugarcrm.ui.SugarPanel");function ex(a){Q.call(this,a)}B(ex,Kw);g=ex.prototype;g.logger=O("ydn.crm.ui.SidebarPanel");
g.A=function(){ex.f.A.call(this);var a=this.b,b=this.e(),c=b.querySelector(".head"),d=a.j("div","setup-panel"),e=a.createElement("a");e.textContent="Setup";e.href=chrome.extension.getURL("setup.html")+"#modal";e.className="maia-button blue";e.setAttribute("data-window-height","600");e.setAttribute("data-window-width","800");d.appendChild(e);E(d,!1);e=a.j("div","invalid-login-panel");c.appendChild(d);c.appendChild(e);a=a.j("div","sidebar-status");c=new Iw;c.render(a);Hs.b.push(c);b.insertBefore(a,
b.firstElementChild)};g.n=function(){ex.f.n.call(this);var a=R(this),b=Lw(this).querySelector("div.setup-panel a");a.listen(b,"click",bv,!0)};g.kf=function(a){a=new dx(a,this.b);this.D(a,!0)};g.zc=function(){ex.f.zc.call(this);var a=Xs.t(),b=Lw(this).querySelector(".setup-panel");a.isLogin()?(E(b,!1),b=Lw(this).querySelector(".invalid-login-panel"),Ys(a)?E(b,!1):(b.innerHTML=Fd(Sd({ok:ct(a)})),E(b,!0))):E(b,!0)};function fx(){var a=av("hub-template").content,b=document.createElement("div");b.appendChild(a.cloneNode(!0));this.a=b.firstElementChild;this.a.querySelector("a[name=option-page-url]").href=chrome.extension.getURL("option-page.html");this.b=new ex;a=ht("gc")||ht("su");E(this.a,a)}
fx.prototype.c=function(){this.a.classList.toggle("open");var a=this.a.querySelector(".hud-button").children[1];this.a.classList.contains("open")?(a.classList.remove("arrow-drop-left"),a.classList.add("arrow-drop-right")):(a.classList.add("arrow-drop-left"),a.classList.remove("arrow-drop-right"))};
fx.prototype.render=function(){document.body.appendChild(this.a);var a=this.a.querySelector(".hud-popup"),b=this.a.querySelector(".hud-button");ef(b,"click",this.c,!1,this);a=a.querySelector(".popup-content");this.b.render(a);this.a.querySelector(".logo-box").appendChild(xr("ydn-logo"));this.a.querySelector(".arrow-box").appendChild(xr("arrow-drop-right"))};function gx(a){var b=Xs.t();b.isLogin()&&!Ys(b)?a.a.classList.add("invalid"):a.a.classList.remove("invalid");a.b.zc()};function hx(a,b){var c;if(!(c=b)){c=document.createElement("div");c.id="root-panel";c.className="inj ydn-crm";document.body.appendChild(c);E(c,!1);var d=document.createElement("div");d.className="container";c.appendChild(d);for(var e=0;3>e;e++){var f=document.createElement("div");d.appendChild(f)}d=document.createElement("div");e=document.createElement("a");e.textContent="Setup";e.href=chrome.extension.getURL("setup.html");e.className="setup-link";d.appendChild(e);c.firstElementChild.appendChild(d);
E(d,!1)}this.a=c;E(this.a,!1);ef(a,"cc",this.ck,!1,this);ef(a,Wg,this.dk,!1,this)}g=hx.prototype;g.logger=O("ydn.crm.inj.AppRenderer");g.e=function(){return this.a};g.of=function(){};g.dk=function(){this.of(null)};g.ck=function(a){this.of(a.i)};function ix(a,b){hx.call(this,a,b);this.b=!1}B(ix,hx);
ix.prototype.of=function(a){if(!a)this.b=!1,E(this.a,!1);else if(!this.b){for(var b,c=a,d=0;4>d;d++)if(c&&c.parentElement&&(c=c.parentElement,c.nextElementSibling&&"DIV"==c.nextElementSibling.tagName)){var c=c.parentElement,d=c.lastElementChild,e=!!d.querySelector("a[href]");b=document.createElement("div");e&&c.parentElement.contains(d)?c.parentElement.insertBefore(b,d):c.appendChild(b);break}b||(this.logger.log(ag,"usual root position is not available, locating on second best position",void 0),c=
a.ownerDocument,b=c.createElement("td"),b.setAttribute("colspan","2"),c=c.createElement("tr"),c.className="widget-topraw",c.appendChild(b),(a.querySelector("tbody")||a).appendChild(c));a=this.a;a.parentElement&&a.parentElement.removeChild(a);b.appendChild(a);this.b=!0;E(a,!0)}};function jx(a,b){this.a=new Pw(b);var c=new ix(a);this.a.render(c.a.firstElementChild.children[1]);this.b=new fx;this.L=new zf(this);this.L.listen(a,"cc",this.c);this.L.listen(a,Wg,this.d)}jx.prototype.c=function(a){Qw(this.a,a.c)};jx.prototype.init=function(){this.b.render()};jx.prototype.d=function(a){"em"==a.c&&Qw(this.a,null)};function kx(a,b){Ys(b)?(a.a.zc(),gx(a.b),lx(a)):(a.a.zc(),gx(a.b),Ow(a.a,[]),Ow(a.b.b,[]))}
function lx(a){F(Yq().send("list-sugarcrm-domain"),function(a){Ow(this.a,a);Ow(this.b.b,a)},a)};function mx(){Zu();Xq("gmail");Is("Starting 0.16.7...");this.b=new Rw;this.c=new Vg(this.b);this.a=this.d=null}mx.prototype.logger=O("ydn.crm.inj.App");mx.prototype.g=function(a){var b=Xs.t();"list-sugarcrm-domains"==a.type?this.a&&lx(this.a):"login"==a.type?Ys(b)||(bt(b),this.a&&kx(this.a,b)):"logout"==a.type&&ct(b)&&(bt(b),nx(this))};
function nx(a){var b=Xs.t();G(Zs(b),function(){V(this.logger,"initiating UI");Ys(b)?this.b.setEnabled(!0):(P(this.logger,"user not login"),this.b.setEnabled(!1));this.a&&kx(this.a,b)},function(a){window.console.error(a)},a)}mx.prototype.init=function(){W(this.logger,"init "+this);ht("su")&&(this.a=new jx(this.b,this.c),this.a.init());ht("tk")&&(this.d=new Yw,Zw(this.d,this.c));ef(Wq(),["list-sugarcrm-domains","logout","login"],this.g,!1,this);setTimeout(function(){},6E4*(.5+Math.random()));nx(this)};
mx.prototype.toString=function(){return"inj.Main:0.16.7"};ba("runInjApp",function(){uq();var a=new mx;window.setTimeout(function(){a.init()},500);return a});function ox(a){this.b=a||"about-template";this.a=document.createElement("div")}ox.prototype.render=function(a){var b=av(this.b).content;this.a.appendChild(b.cloneNode(!0));this.a.querySelector("span[name=version]").textContent="0.16.7";a.appendChild(this.a)};ox.prototype.c=function(){};ox.prototype.toString=function(){return"About"};function px(a){this.a=document.createElement("div");this.c=!!a}px.prototype.render=function(a){var b=av("gdata-credentail-template").content;this.a.appendChild(b.cloneNode(!0));a.appendChild(this.a);this.a.querySelector("a[name=gdata-token-revoke]").addEventListener("click",this.b.bind(this),!0);this.c&&(this.a.querySelector("h3").style.display="none")};
px.prototype.b=function(a){a.preventDefault();var b=this.a.querySelector("a[name=gdata-token-revoke]");window.confirm("Are you sure you want to revoke your Google offline access token in YDN server?")&&G(Yq().send("gdata-token-revoke"),function(){b.textContent="Done";b.setAttribute("title","successfully revoked");b.removeAttribute("href")},function(){b.setAttribute("title","Fail to revoke, click here to manage in your Google account");b.textContent="Manage";b.classList.add("error");b.href="https://security.google.com/settings/security/permissions"},
this);return!0};px.prototype.refresh=function(a,b){F(Yq().send("gdata-token",window.location.href),function(c){var d=this.a.querySelector(".authorize"),e=this.a.querySelector(".display");c.has_token?(e.querySelector("span[name=email]").textContent=c.owner_email,e.querySelector("span[name=scopes]").textContent=c.Scopes.join(", "),e.style.display="",d.style.display="none",a&&a.call(b,!0)):(d.querySelector("a").href=c.authorize_url,e.style.display="none",d.style.display="",a&&a.call(b,!1))},this)};function qx(a){this.data=a||null;this.a=null}function rx(a){return a.data?a.data.domain:null}qx.prototype.isLogin=function(){return this.data?!!this.data.isLogin:!1};function sx(a){a=rx(a);return Tq(Wq(),"sugarcrm",a)}function tx(a,b,c){chrome.permissions.contains({origins:["http://"+a.data.domain+"/*","https://"+a.data.domain+"/*"]},function(a){b&&b.call(c,a)})}
function ux(a,b,c){a=rx(a);console.assert(!!a);chrome.permissions.request({origins:["http://"+a+"/*","https://"+a+"/*"]},function(a){b.call(c,a)})}
function vx(a,b){b=b.trim();var c=b.replace(/^https?:\/\//,""),c=c.replace(/\/.*/,"");if(3>b.length||!/\./.test(b))return He(Error("Invalid instance "+b));if(a.data&&a.data.domain==c)return Ge(a.a);a.data||(a.data={domain:c,isLogin:!1});return F(Yq().send("sugar-server-info",b),function(a){var e=/^http/.test(b)?b:null;a.baseUrl&&(e=a.baseUrl);this.data={baseUrl:e,domain:c,isLogin:!1};return this.a=a},a)}
qx.prototype.getInfo=function(){return this.data&&this.data.domain?this.a?Ge(this.a):F(Yq().send("sugar-server-info",this.data.domain),function(a){this.a=a},this):Ge(null)};function wx(a,b,c,d){vx(a,b);window.console.assert(!!a.data,"Not initialized");c&&(a.data.userName=c);d&&(b=new Ms,b.update(d),a.data.password=hq(Os(b)),a.data.a=!0);return F(Yq().send("new-sugarcrm",a.data),function(a){this.data=a},a)}
function xx(a){return{origins:["http://"+a.data.domain+"/*","https://"+a.data.domain+"/*"]}}function yx(){return F(Yq().send("list-sugarcrm"),function(a){for(var b=[],c=0;c<a.length;c++)b[c]=new qx(a[c]);return b})};function zx(a,b){this.b=a;this.a=document.createElement("div");this.d=!!b;this.c=!1}g=zx.prototype;
g.render=function(a){var b=av("sugarcrm-template").content;this.a.appendChild(b.cloneNode(!0));this.a.querySelector("a[name=remove]").addEventListener("click",this.Vj.bind(this),!0);this.a.querySelector("#grant-host-permission > button").onclick=this.ej.bind(this);this.a.querySelector("input[name=domain]").onblur=this.Ej.bind(this);this.a.querySelector("input[name=baseurl]").value="";this.a.querySelector("button").onclick=this.$h.bind(this);var c=this;this.a.addEventListener("keypress",function(a){13==
a.keyCode&&c.$h()},!1);this.d&&(this.a.querySelector("h3").style.display="none");a.appendChild(this.a);this.refresh()};
g.Ej=function(){var a=this.a.querySelector('input[name="domain"]'),b=a.nextElementSibling;b.textContent="";b.className="";(a=a.value.trim())&&G(vx(this.b,a),function(a){var d=this.a.querySelector("input[name=baseurl]");d.value="";b.textContent="SugarCRM "+a.flavor+" "+a.version;b.className="";a.baseUrl&&(d.value=a.baseUrl);b.removeAttribute("title")},function(a){b.textContent=a.name;b.className="error";b.setAttribute("title",a.message||"")},this)};
g.ej=function(a){a.preventDefault();ux(this.b,function(a){a&&(this.a.querySelector("#grant-host-permission").style.display="none")},this)};g.Vj=function(a){a.preventDefault();a=a.target;var b=rx(this.b);F(Yq().send("remove-sugar",b),function(){this.a.style.display="none";window.location.reload()},this);a.href="";a.onclick=null;a.textContent="removing..."};
g.refresh=function(){this.a.querySelector("h3").textContent=rx(this.b)?"SugarCRM":"Add a new SugarCRM instance";var a=this.b.data,b=this.a.querySelector("div[name=login-panel]"),c=this.a.querySelector("div[name=info-panel]"),d=this.a.querySelector("div[name=remove-panel]"),e=this.a.querySelector("#grant-host-permission");window.console.log("refreshing",a);if(a){if(a.isLogin){var f=c.querySelector("a[name=instance]");f.textContent=a.baseUrl;f.href=a.baseUrl;f.target=a.domain;c.querySelector("span[name=user]").textContent=
a.userName;F(this.b.getInfo(),function(a){var b=c.querySelector("span[name=instance-info]");!a||a instanceof Error||(b.textContent=a.version+" "+a.flavor);Ax(this)},this);tx(this.b,function(a){e.style.display=a?"none":""},this);b.style.display="none";c.style.display=""}else b.querySelector("#sugarcrm-domain").value=a.baseUrl,b.querySelector("#sugarcrm-username").value=a.userName,b.style.display="",e.style.display="none",c.style.display="none";d.style.display=""}else b.style.display="",c.style.display=
"none",d.style.display="none"};
function Ax(a){t(void 0)&&(a.c=void 0);var b=a.a.querySelector("div[name=stats-panel]");a.c&&a.b.isLogin()?(F(sx(a.b).send("stats"),function(a){var d=b.querySelector("ul");d.innerHTML="";console.log(a);for(var e=0;e<a.length;e++){var f=a[e],h=document.createElement("li"),k=document.createElement("span");k.textContent=f.count+" "+f.module;h.appendChild(k);k=new Date(f.updated);if(k.getTime()){var l=document.createElement("span");l.textContent=", checked on "+k.toLocaleString();l.setAttribute("title",
"Last synchronized time");h.appendChild(l)}f=new Date(f.modified);f.getTime()&&(k=document.createElement("span"),k.textContent=", last updated on "+f.toLocaleString(),k.setAttribute("title","Last updated time in server"),h.appendChild(k));d.appendChild(h)}},a),E(b,!0)):E(b,!1)}
g.$h=function(){var a=this.a,b=a.querySelector(".message");b.textContent="";var c=a.querySelector('input[name="domain"]').value,d=a.querySelector('input[name="username"]').value,e=a.querySelector('input[name="password"]').value;(a=a.querySelector('input[name="baseurl"]').value)&&(c=a);var f=this.a.querySelector("button");f.textContent="logging in...";f.setAttribute("disabled","1");var h=this.b;chrome.permissions.request(xx(this.b),function(a){console.log("grant "+a);G(wx(h,c,d,e),function(){window.location.reload()},
function(a){f.removeAttribute("disabled");f.textContent="Login";b.textContent=a.name+": "+a.message},this)})};function Bx(){this.a=document.createElement("div");this.b=new zx(new qx);this.b.c=!0;this.g=!1;this.d=new px}Bx.prototype.render=function(a){var b=av("sugarcrm-home-template").content;this.a.appendChild(b.cloneNode(!0));this.d.render(this.a.querySelector("#gdata"));this.b.render(this.a.querySelector("#sugarcrm-widget"));a.appendChild(this.a)};
Bx.prototype.c=function(){this.g||(this.d.refresh(),G(yx(),function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.isLogin()){this.g=!0;a=this.b;a.b=c;a.refresh();break}}},function(a){Is("listing sugarcrm model fail "+(a.message||a))},this))};Bx.prototype.toString=function(){return"Dashboard"};function Cx(){}function Dx(a,b){return F(Ex(b.path),function(a){for(var d=0,e=[],f="",h=NaN,k=0;k<a.length;k++){var l=a[k];if(l.Created>b.created){d++;var m=l.Created-b.created;if(isNaN(h)||h>m)h=m}l.City&&-1==e.indexOf(l.City)&&e.push(l.City);if(!f||f<l.Created)f=new Date(l.Created)}return{path:b.path,recipients:b.recipients.join(", "),subject:b.subject,opens:d,clicks:0,sentDate:new Date(b.created),cities:e.length+", "+e.join(", "),numCities:e.length,timeToOpen:h,lastOpen:f}},a)}
function Fx(a){return G(Yq().send("tracking-query",{storeName:"BeaconTrack"}),function(a){for(var c=[],d=0;d<a.length;d++)c[d]=Dx(this,a[d]);return yo(c)},function(a){window.console.error("Error tracking fetching "+(a.message||a))},a)};function Gx(a,b,c){Ie.call(this);this.d=a;this.c=b;this.a=c;this.b=z(this.Oj,this)}B(Gx,Ie);g=Gx.prototype;g.Oe=!1;g.Y=null;g.Cf=function(){this.Y?this.Oe=!0:Hx(this)};g.stop=function(){this.Y&&(p.clearTimeout(this.Y),this.Y=null,this.Oe=!1)};g.l=function(){Gx.f.l.call(this);this.stop()};g.Oj=function(){this.Y=null;this.Oe&&(this.Oe=!1,Hx(this))};function Hx(a){a.Y=wf(a.b,a.c);a.d.call(a.a)};function Ix(){}B(Ix,Cx);function Ex(a){a={storeName:"AccessTokenRecord",keyRange:Al(a).toJSON()};return Yq().send("tracking-query",a)};var Jx={fi:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},ei:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},Kx=Jx,Kx=Jx;var Lx={Lg:".",Ng:",",Pg:"%",jf:"0",si:"+",mi:"-",Mg:"E",Qg:"\u2030",ff:"\u221e",oi:"NaN",Kg:"#,##0.###",wi:"#E0",ri:"#,##0%",gi:"\u00a4#,##0.00",ii:"USD"},Mx=Lx,Mx=Lx;var Nx={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[0,"Ft",
"Ft"],IDR:[0,"Rp","Rp"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],LVL:[2,"Ls","Ls"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u0440\u0443\u0431.",
"\u0440\u0443\u0431."],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u20b4","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};function Ox(a,b,c){this.o=b||Mx.ii;this.S=c||Px;this.P=40;this.a=1;this.pa=0;this.d=3;this.v=this.b=0;this.M=!1;this.p=this.g="";this.c="-";this.i="";this.k=1;this.F=3;this.w=this.K=!1;this.h=Qx;if("number"==typeof a)switch(a){case 1:Rx(this,Mx.Kg);break;case 2:Rx(this,Mx.wi);break;case 3:Rx(this,Mx.ri);break;case 4:a=Mx.gi;b=["0"];c=Nx[this.o][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));Rx(this,a);break;case 5:Sx(this,1);break;case 6:Sx(this,2);break;
default:throw Error("Unsupported pattern type.");}else Rx(this,a)}var Px=0,Qx=0;
function Rx(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.g=Tx(a,b,c);for(var d=c[0],e=-1,f=0,h=0,k=0,l=-1,m=b.length,n=!0;c[0]<m&&n;c[0]++)switch(b.charAt(c[0])){case "#":0<h?k++:f++;0<=l&&0>e&&l++;break;case "0":if(0<k)throw Error('Unexpected "0" in pattern "'+b+'"');h++;0<=l&&0>e&&l++;break;case ",":l=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+h+k;break;case "E":if(a.w)throw Error('Multiple exponential symbols in pattern "'+b+'"');a.w=!0;a.v=0;c[0]+1<
m&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.M=!0);for(;c[0]+1<m&&"0"==b.charAt(c[0]+1);)c[0]++,a.v++;if(1>f+h||1>a.v)throw Error('Malformed exponential pattern "'+b+'"');n=!1;break;default:c[0]--,n=!1}0==h&&0<f&&0<=e&&(h=e,0==h&&h++,k=f-h,f=h-1,h=1);if(0>e&&0<k||0<=e&&(e<f||e>f+h)||0==l)throw Error('Malformed pattern "'+b+'"');k=f+h+k;a.d=0<=e?k-e:0;0<=e&&(a.b=f+h-e,0>a.b&&(a.b=0));a.a=(0<=e?e:k)-f;a.w&&(a.P=f+a.a,0==a.d&&0==a.a&&(a.a=1));a.F=Math.max(0,l);a.K=0==e||e==k;d=c[0]-d;a.p=Tx(a,b,c);c[0]<b.length&&
b.charAt(c[0])==Ux?(c[0]++,a.c=Tx(a,b,c),c[0]+=d,a.i=Tx(a,b,c)):(a.c=a.g+a.c,a.i+=a.p)}function Sx(a,b){a.h=b;Rx(a,Mx.Kg);a.b=0;a.d=2;if(0<a.b)throw Error("Can't combine significant digits and minimum fraction digits");a.pa=2}
Ox.prototype.parse=function(a,b){var c=b||[0];if(this.h!=Qx)throw Error("Parsing of compact numbers is unimplemented");var d=NaN;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.g,c[0])==c[0],f=a.indexOf(this.c,c[0])==c[0];e&&f&&(this.g.length>this.c.length?f=!1:this.g.length<this.c.length&&(e=!1));e?c[0]+=this.g.length:f&&(c[0]+=this.c.length);if(a.indexOf(Mx.ff,c[0])==c[0])c[0]+=Mx.ff.length,d=Infinity;else{var d=a,h=!1,k=!1,l=!1,m=1,n=Mx.Lg,q=Mx.Ng,r=Mx.Mg;if(this.h!=Qx)throw Error("Parsing of compact style numbers is not implemented");
for(var s="";c[0]<d.length;c[0]++){var y=d.charAt(c[0]),A=Vx(y);if(0<=A&&9>=A)s+=A,l=!0;else if(y==n.charAt(0)){if(h||k)break;s+=".";h=!0}else if(y==q.charAt(0)&&("\u00a0"!=q.charAt(0)||c[0]+1<d.length&&0<=Vx(d.charAt(c[0]+1)))){if(h||k)break}else if(y==r.charAt(0)){if(k)break;s+="E";k=!0}else if("+"==y||"-"==y)s+=y;else if(y==Mx.Pg.charAt(0)){if(1!=m)break;m=100;if(l){c[0]++;break}}else if(y==Mx.Qg.charAt(0)){if(1!=m)break;m=1E3;if(l){c[0]++;break}}else break}d=parseFloat(s)/m}if(e){if(a.indexOf(this.p,
c[0])!=c[0])return NaN;c[0]+=this.p.length}else if(f){if(a.indexOf(this.i,c[0])!=c[0])return NaN;c[0]+=this.i.length}return f?-d:d};function Wx(a,b){var c=Math.pow(10,a.d),d=0>=a.pa?Math.round(b*c):Math.round(Xx(b*c,a.pa,a.d)),e;isFinite(d)?(e=Math.floor(d/c),c=Math.floor(d-e*c)):(e=b,c=0);return{yh:e,Bi:c}}
function Yx(a,b,c,d){if(a.b>a.d)throw Error("Min value must be less than max value");b=Wx(a,b);var e=Math.pow(10,a.d),f=b.yh,h=b.Bi,k=0<a.b||0<h||!1;b=a.b;k&&(b=a.b);for(var l="",m=f;1E20<m;)l="0"+l,m=Math.round(m/10);var l=m+l,n=Mx.Lg,q=Mx.Ng,m=Mx.jf.charCodeAt(0),r=l.length;if(0<f||0<c){for(f=r;f<c;f++)d.push(String.fromCharCode(m));for(f=0;f<r;f++)d.push(String.fromCharCode(m+1*l.charAt(f))),1<r-f&&0<a.F&&1==(r-f)%a.F&&d.push(q)}else k||d.push(String.fromCharCode(m));(a.K||k)&&d.push(n);a=""+(h+
e);for(c=a.length;"0"==a.charAt(c-1)&&c>b+1;)c--;for(f=1;f<c;f++)d.push(String.fromCharCode(m+1*a.charAt(f)))}function Zx(a,b,c){c.push(Mx.Mg);0>b?(b=-b,c.push(Mx.mi)):a.M&&c.push(Mx.si);b=""+b;for(var d=Mx.jf,e=b.length;e<a.v;e++)c.push(d);c.push(b)}function Vx(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=Mx.jf.charCodeAt(0);return b<=a&&a<b+10?a-b:-1}var Ux=";";
function Tx(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var h=b.charAt(c[0]);if("'"==h)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=h;else switch(h){case "#":case "0":case ",":case ".":case Ux:return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.o;else switch(a.S){case Px:d+=Nx[a.o][1];break;case 2:var h=a.o,k=Nx[h],d=d+(h==k[1]?h:h+" "+k[1]);break;case 1:d+=Nx[a.o][2]}break;case "%":if(1!=a.k)throw Error("Too many percent/permill");a.k=100;d+=Mx.Pg;
break;case "\u2030":if(1!=a.k)throw Error("Too many percent/permill");a.k=1E3;d+=Mx.Qg;break;default:d+=h}}return d}var $x={prefix:"",Uh:"",Bf:0};function ay(a,b){var c=1==a.h?Kx.fi:Kx.ei;if(3>b)return $x;b=Math.min(14,b);c=c[Math.pow(10,b)];if(!c)return $x;c=c.other;return c&&"0"!=c?(c=/([^0]*)(0+)(.*)/.exec(c))?{prefix:c[1],Uh:c[3],Bf:b-(c[2].length-1)}:$x:$x}function by(a){for(var b=0;1<=(a/=10);)b++;return b}
function Xx(a,b,c){if(!a)return a;b=b-by(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};function cy(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"}var dy=cy,dy=cy;function ey(a){a=a+"";var b=a.indexOf(".");return-1==b?0:a.length-b-1}function fy(a,b){var c,d=a|0;c=void 0===b?Math.min(ey(a),3):b;return 1==d&&0==c?"one":"other"}var gy=fy,gy=fy;function hy(a){this.a=[];this.d=[];this.c=new Ox(1);a&&(a=iy(this,a),this.d=jy(this,a))}var ky=RegExp("'([{}#].*?)'","g"),ly=RegExp("''","g");
function my(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var h=b[f].value,k=a,l=e,m=c[h];t(m)?(k.a.push(m),l.push(k.b(k.a))):l.push("Undefined parameter - "+h);break;case 2:h=b[f].value;k=e;l=h.Pd;t(c[l])?(l=h[c[l]],t(l)||(l=h.other),my(a,l,c,d,k)):k.push("Undefined parameter - "+l);break;case 0:h=b[f].value;ny(a,h,c,gy,d,e);break;case 1:h=b[f].value;ny(a,h,c,dy,d,e);break;default:Wa("Unrecognized block type: "+b[f].type)}}
function ny(a,b,c,d,e,f){var h=b.Pd,k=b.Tg,l=+c[h];if(isNaN(l))f.push("Undefined or invalid parameter - "+h);else if(k=l-k,h=b[c[h]],t(h)||(d=a.c.ia?d(k,a.c.ia()):d(k),h=b[d],t(h)||(h=b.other)),b=[],my(a,h,c,e,b),c=b.join(""),e)f.push(c);else{a=a.c;if(isNaN(k))a=Mx.oi;else{e=[];h=d=k;a.h==Qx?b=$x:(d=Math.abs(d),h=Math.abs(h),b=ay(a,1>=d?0:by(d)).Bf,Wx(a,h/Math.pow(10,b)),d=Wx(a,d/Math.pow(10,b)),b=ay(a,b+by(d.yh)));k/=Math.pow(10,b.Bf);e.push(b.prefix);d=0>k||0==k&&0>1/k;e.push(d?a.c:a.g);if(isFinite(k))if(k=
k*(d?-1:1)*a.k,a.w)if(0==k)Yx(a,k,a.a,e),Zx(a,0,e);else{h=Math.log(k)/Math.log(10);h=Math.floor(h+2E-15);k/=Math.pow(10,h);l=a.a;if(1<a.P&&a.P>a.a){for(;0!=h%a.P;)k*=10,h--;l=1}else 1>a.a?(h++,k/=10):(h-=a.a-1,k*=Math.pow(10,a.a-1));Yx(a,k,l,e);Zx(a,h,e)}else Yx(a,k,a.a,e);else e.push(Mx.ff);e.push(d?a.i:a.p);e.push(b.Uh);a=e.join("")}f.push(c.replace(/#/g,a))}}
function iy(a,b){var c=a.a,d=z(a.b,a);b=b.replace(ly,function(){c.push("'");return d(c)});return b=b.replace(ky,function(a,b){c.push(b);return d(c)})}function oy(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var h=f.index;"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,h),d.push(f),b=h+1)):(0==c.length&&(b=a.substring(b,h),""!=b&&d.push({type:0,value:b}),b=h+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d}
var py=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,qy=/^\s*(\w+)\s*,\s*selectordinal\s*,/,ry=/^\s*(\w+)\s*,\s*select\s*,/;
function jy(a,b){for(var c=[],d=oy(b),e=0;e<d.length;e++){var f={};if(0==d[e].type)f.type=4,f.value=d[e].value;else if(1==d[e].type){var h=d[e].value;switch(py.test(h)?0:qy.test(h)?1:ry.test(h)?2:/^\s*\w+\s*/.test(h)?3:5){case 2:f.type=2;f.value=sy(a,d[e].value);break;case 0:f.type=0;f.value=ty(a,d[e].value);break;case 1:f.type=1;f.value=uy(a,d[e].value);break;case 3:f.type=3;f.value=d[e].value;break;default:Wa("Unknown block type for pattern: "+d[e].value)}}else Wa("Unknown part of the pattern.");
c.push(f)}return c}function sy(a,b){var c="";b=b.replace(ry,function(a,b){c=b;return""});var d={};d.Pd=c;for(var e=oy(b),f=0;f<e.length;){var h=e[f].value;f++;if(1==e[f].type)var k=jy(a,e[f].value);else Wa("Expected block type.");d[h.replace(/\s/g,"")]=k;f++}return d}
function ty(a,b){var c="",d=0;b=b.replace(py,function(a,b,e){c=b;e&&(d=parseInt(e,10));return""});var e={};e.Pd=c;e.Tg=d;for(var f=oy(b),h=0;h<f.length;){var k=f[h].value;h++;if(1==f[h].type)var l=jy(a,f[h].value);else Wa("Expected block type.");e[k.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=l;h++}return e}
function uy(a,b){var c="";b=b.replace(qy,function(a,b){c=b;return""});var d={};d.Pd=c;d.Tg=0;for(var e=oy(b),f=0;f<e.length;){var h=e[f].value;f++;if(1==e[f].type)var k=jy(a,e[f].value);else Wa("Expected block type.");d[h.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=k;f++}return d}hy.prototype.b=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};function vy(a,b,c){a=new hy(a);b={COUNT:b,TEXT:c};if(0==a.d.length)a="";else{c=[];my(a,a.d,b,!1,c);for(b=c.join("");0<a.a.length;)b=b.replace(a.b(a.a),a.a.pop());a=b}return a};function wy(){this.a=[]}B(wy,ii);ea(wy);wy.prototype.m=function(){return"goog-filterobsmenuitem"};function xy(a,b,c,d){ni.call(this,a,b,c,d||new wy)}B(xy,ni);xy.prototype.n=function(){xy.f.n.call(this)};th("goog-filterobsmenuitem",function(){return new xy(null)});function yy(){this.a=[]}B(yy,ii);ea(yy);yy.prototype.m=function(){return"goog-tristatemenuitem"};function zy(a,b,c,d,e){ni.call(this,a,b,c,d||new yy);this.la(16,!0);this.h=e||!1}B(zy,ni);zy.prototype.c=0;zy.prototype.h=!1;function Ay(a,b){if(K(a,0!=b?"check":"uncheck")){Rh(a,16,0!=b);a.c=b;var c=a.d;Eh(a,c.m()+"-partially-checked",1==a.c);Eh(a,c.m()+"-fully-checked",2==a.c)}}zy.prototype.Ha=function(a){switch(this.c){case 0:Ay(this,this.h?1:2);break;case 1:Ay(this,2);break;case 2:Ay(this,0)}var b=this.d.m()+"-checkbox";a=a.target&&ph(a.target,b);return K(this,a?"change":"action")};
th("goog-tristatemenuitem",function(){return new zy(null)});function By(a){var b=null;try{b=a.cssRules||a.rules}catch(c){if(15==c.code)throw c.styleSheet=a,c;}return b}
function Cy(a){var b=[];a=a||document.styleSheets;var c=t(void 0)?void 0:!1;if(a.imports&&a.imports.length)for(var d=0,e=a.imports.length;d<e;d++)mb(b,Cy(a.imports[d]));else if(a.length)for(d=0,e=a.length;d<e;d++)mb(b,Cy(a[d]));else{var f=By(a);if(f&&f.length)for(var d=0,e=f.length,h;d<e;d++)h=f[d],h.styleSheet&&mb(b,Cy(h.styleSheet))}!(a.type||a.rules||a.cssRules)||a.disabled&&!c||b.push(a);return b}function Dy(a,b){a.deleteRule?a.deleteRule(b):a.removeRule(b)};function Ey(a,b,c,d,e,f,h){Ie.call(this);this.$f=a;this.Ge=b;this.ah=e||Fy;this.Mc=d||75;this.Nd=f||Gy;this.yf=c||this.Ge;this.b=h||Hy.t()}B(Ey,J);var Fy="text",Gy="left";g=Ey.prototype;g.$f="";g.Ge="";g.yf="";g.Nd=Gy;g.ah=Fy;g.Mc=-1;g.gh=null;g.r=function(){return this.Ge};g.l=function(){delete this.$f;delete this.Ge;delete this.ah;delete this.Nd;delete this.b;delete this.c;this.gh=this.a=null;Ey.f.l.call(this)};function Iy(a,b){J.call(this);this.c=a||[];this.b=b||[];Jy(this)}B(Iy,J);Iy.prototype.d=yg.t();Iy.prototype.a=null;Iy.prototype.Fa=function(){return this.c};function Ky(a,b){if("[object Array]"===Object.prototype.toString.call(b[0])){var c=[];C(b,function(a){a=tb(a,function(a,b){return this.Fa()[b].r()},this);c.push(a)},a);a.b=c}else a.b=b;Jy(a)}function Jy(a){a.a=new Mf;C(a.b,function(a){var c=zg(this.d);this.a.set(c,a)},a)}
Iy.prototype.l=function(){C(this.c,function(a){a.u()});this.b=this.c=null;delete this.c;delete this.b;this.a&&this.a.clear();this.a=null;delete this.a;Iy.f.l.call(this)};function Ly(a,b){Ie.call(this);this.tc=b||[];this.vg=a||zg(yg.t());this.a=!1}B(Ly,Ie);Ly.prototype.Yb=function(a){this.a=a};Ly.prototype.l=function(){this.tc=null;delete this.tc;delete this.vg;delete this.a;Ly.f.l.call(this)};function My(a,b){J.call(this);this.g=[];this.c=!1;this.a=new Iy(a,b);a&&b&&Ny(this)}B(My,J);My.prototype.Fa=function(){return this.a?this.a.Fa():null};function Oy(a,b){a.a.c=b}function Ny(a){var b=a.a.a;a.b=[];Kf(b.Cc(!0),function(a){this.b.push(new Ly(a,b.get(a)))},a)}function Py(a,b){a.b=b;a.c=!0;Ry(a)}function Sy(a,b,c){a.g.push(b.vg);b.Yb(c);K(a,c?new Ty("rowview-select",a):new Ty("rowview-unselect",a))}function Ry(a){K(a,new Uy("dataview-changed",a))}
function Vy(a,b,c){pb(a.b,function(a,e){return a.tc[c]>e.tc[c]?b===Wy?-1:1:a.tc[c]<e.tc[c]?b===Wy?1:-1:0});Py(a,a.b)}My.prototype.l=function(){C(this.b,function(a){a.u()});this.b=null;delete this.b;this.a&&this.a.u();delete this.a;this.d=null;delete this.d;delete this.g;delete this.c;My.f.l.call(this)};function Uy(a,b){H.call(this,a,b)}B(Uy,H);function Ty(a,b){H.call(this,a,b)}B(Ty,H);function Xy(a,b){H.call(this,a,b)}B(Xy,H);function Yy(a){Q.call(this,a)}B(Yy,Q);g=Yy.prototype;g.cd=-1;g.xa=null;g.Le=null;g.He=null;g.l=function(){this.xa=this.Le=this.He=null;Yy.f.l.call(this)};g.n=function(){T(this.e(),"pear-grid-cell");Yy.f.n.call(this);this.zf();var a=this.xa.c;a&&C(a,function(a){T(this.e(),a)},this);a=this.r();this.e().id=a};g.zf=function(){};function Zy(a){a.Le=a.Le||a.getParent();return a.Le}function $y(a){var b;(b=a.He)||(b=Zy(a).Ie);a.He=b;return a.He};function Hy(){}ea(Hy);function az(a,b){Q.call(this,a);b||Hy.t()}B(az,Yy);g=az.prototype;g.B=function(){return this.c};g.N=function(){var a=String,b=Zy(this);return a(b.a.tc[this.xa.yf])};g.Qc=function(a){a?T(this.e(),"pear-grid-cell-data-highlight"):rh(this.e(),"pear-grid-cell-data-highlight")};g.n=function(){az.f.n.call(this);bz(this);var a={ee:this.xa.gh,L:null},b=a.L||this;a&&a.ee&&a.ee.call(b,this)};g.zf=function(){T(this.e(),"pear-grid-cell-data");T(this.e(),"col"+this.cd)};
g.W=function(){az.f.W.call(this);xc(this.c);this.c=null};function bz(a){var b=a.b.j("div"," pear-grid-cell-data-content  overflowhidden",a.N());T(b,a.xa.Nd===Gy?"pear-grid-cell-data-left":"pear-grid-cell-data-right");a.b.appendChild(a.e(),b);a.c=b}g.l=function(){xc(this.c);this.c=null;az.f.l.call(this)};function cz(a,b,c){Q.call(this,c);this.ud=b;this.Ie=a}B(cz,Q);g=cz.prototype;g.Ie=null;g.ud=-1;g.vd=-1;g.n=function(){cz.f.n.call(this);var a=this.e();dz(this);T(a,"pear-grid-row")};g.Kd=function(a,b){this.D(a,b)};g.getHeight=function(){return this.ud};g.hc=function(){return 0};function dz(a){var b;b=a.hc();Xc(a.e(),0,b)}g.l=function(){this.Ie=null;delete this.ud;delete this.vd;cz.f.l.call(this)};function ez(){J.call(this);this.a=fz;this.k=this.startTime=null}B(ez,J);var fz=0;ez.prototype.i=function(){this.xb("begin")};ez.prototype.d=function(){this.xb("end")};ez.prototype.onStop=function(){this.xb("stop")};ez.prototype.xb=function(a){K(this,a)};var Cb={},gz=null;function hz(a){a=ka(a);delete Cb[a];Bb()&&gz&&gz.stop()}function iz(){gz||(gz=new xf(function(){jz()},20));var a=gz;0!=a.Hc||yf(a)}function jz(){var a=qa();xb(Cb,function(b){kz(b,a)});Bb()||iz()};function lz(a,b,c,d){ez.call(this);if(!u(a)||!u(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.c=a;this.p=b;this.o=c;this.h=d;this.b=[]}B(lz,ez);g=lz.prototype;g.gb=0;
function Yi(a){if(a.a==fz)a.gb=0,a.b=a.c;else if(1==a.a)return;hz(a);var b=qa();a.startTime=b;-1==a.a&&(a.startTime-=a.o*a.gb);a.k=a.startTime+a.o;a.gb||a.i();a.xb("play");-1==a.a&&a.xb("resume");a.a=1;var c=ka(a);c in Cb||(Cb[c]=a);iz();kz(a,b)}g.stop=function(a){hz(this);this.a=fz;a&&(this.gb=1);mz(this,this.gb);this.onStop();this.d()};g.l=function(){this.a==fz||this.stop(!1);this.xb("destroy");lz.f.l.call(this)};g.destroy=function(){this.u()};
function kz(a,b){a.gb=(b-a.startTime)/(a.k-a.startTime);1<=a.gb&&(a.gb=1);mz(a,a.gb);1==a.gb?(a.a=fz,hz(a),a.xb("finish"),a.d()):1==a.a&&a.ng()}function mz(a,b){ja(a.h)&&(b=a.h(b));a.b=Array(a.c.length);for(var c=0;c<a.c.length;c++)a.b[c]=(a.p[c]-a.c[c])*b+a.c[c]}g.ng=function(){this.xb("animate")};g.xb=function(a){K(this,new nz(a,this))};function nz(a,b){H.call(this,a);this.x=b.b[0];this.y=b.b[1];this.state=b.a}B(nz,H);function oz(a,b,c,d,e){lz.call(this,b,c,d,e);this.v=a}B(oz,lz);oz.prototype.g=da;oz.prototype.ng=function(){this.g();oz.f.ng.call(this)};oz.prototype.d=function(){this.g();oz.f.d.call(this)};oz.prototype.i=function(){this.g();oz.f.i.call(this)};function pz(a,b,c,d,e){oz.apply(this,arguments)}B(pz,oz);pz.prototype.g=function(){this.v.style.marginLeft=this.b[0]+"px"};function qz(a,b,c){Q.call(this,c);b=b||{};this.k=v(a)?document.getElementById(a):a;this.w=w(b.minWidth)?b.minWidth:0;this.M=w(b.maxWidth)?b.maxWidth:0;this.F=w(b.minHeight)?b.minHeight:0;this.K=w(b.maxHeight)?b.maxHeight:0;this.c=b.handles||rz;this.p={};this.h={};this.c&2&&sz(this,2,["e","handle"]);this.c&4&&sz(this,4,["s","handle"]);this.c&8&&sz(this,8,["w","handle"]);this.c&16&&sz(this,16,["n","handle"]);this.c&32&&sz(this,32,["nw","corner","handle"]);this.c&64&&sz(this,64,["ne","corner","handle"]);
this.c&128&&sz(this,128,["se","corner","handle"]);this.c&256&&sz(this,256,["sw","corner","handle"]);this.v=this.ca=this.d=null}B(qz,Q);var rz=511;function sz(a,b,c){var d=a.b.j("div");C(c,function(a){T(d,"pear-ui-resizable-"+a)},a);a.k.appendChild(d);c=new Mi(d);c.dh=function(){};R(a).listen(c,"start",a.Yi).listen(c,"drag",a.Zi).listen(c,"end",a.Xi);a.p[b]=c;a.h[b]=d;R(a).listen(d,"mousedown",a.th)}g=qz.prototype;g.th=function(a){a.preventDefault()};
g.Yi=function(a){var b=a.b;a=tz(this,b);var b=Zc(b.target),c=pd(this.k),d;Wc(this.k);d=Zc(this.k);sd(this.k);this.S=this.rb=this.mb=this.lb=0;a&64?this.mb=this.lb=d.x:(this.lb=d.x-(this.M-c.width),this.mb=d.x+(c.width-this.w));a&256?this.S=this.rb=d.y:(this.rb=d.y-(this.K-c.height),this.S=d.y+(c.height-this.F));this.d=new bc(b.x,b.y);this.ca=d;this.v=new dc(c.width,c.height);K(this,new uz("start_resize",this,null))};
g.Zi=function(a){var b=a.b,c=tz(this,b),d=this.k,e=pd(d),f;Wc(d);f=Zc(this.k);c&194&&(e.width=this.v.width+b.Ab-this.d.x);c&388&&(e.height=this.v.height+b.Bb-this.d.y);c&296&&(e.width=this.v.width-b.Ab+this.d.x,f.x=this.ca.x+b.Ab-this.d.x);c&112&&(e.height=this.v.height-b.Bb+this.d.y,f.y=this.ca.y+b.Bb-this.d.y);b=new dc(Math.max(e.width,0),Math.max(e.height,0));0<this.w&&(b.width=Math.max(b.width,this.w),f.x=c&376&&b.width===this.w?this.mb:f.x);0<this.M&&(b.width=Math.min(b.width,this.M),f.x=c&376&&
b.width===this.M?this.lb:f.x);0<this.F&&(b.height=Math.max(b.height,this.F),f.y=c&376&&b.height===this.F?this.S:f.y);0<this.K&&(b.height=Math.min(b.height,this.K),f.y=c&376&&b.height===this.K?this.rb:f.y);c=b.clone();K(this,new uz("resize",this,c));d.style.width=Yc(b.width,!0);gd(d,b.height);c=rd(d,"margin");f.x=f.x-c.left;f.y=f.y-c.top;"absolute"===Wc(d)&&Xc(d,f);ja(d.resize)&&d.resize(e);a.preventDefault();return!1};g.Xi=function(a){a.preventDefault();K(this,new uz("end_resize",this,null))};
function tz(a,b){for(var c in a.p){var d=Sa(c);if(a.p[d]===b)return d}return 0}g.l=function(){qz.f.l.call(this);for(var a in this.p){var b=Sa(a);this.p[b].u()}this.p={};for(a in this.h)b=Sa(a),nf(this.h[b],"mousedown",this.th),xc(this.h[b]);this.h={}};function uz(a,b,c){H.call(this,a,b);this.c=c}B(uz,H);function vz(a){Q.call(this,a)}B(vz,Yy);g=vz.prototype;g.La=null;g.vc=null;g.Zb=null;g.$b=null;g.Lb=null;g.vb=null;g.xd=0;g.jb=null;function wz(a){a.xd=a.xd||xz;return a.xd}function yz(a,b){a.xd=b||xz;b===Wy?(E(a.Zb,!0),E(a.$b,!1)):b===zz?(E(a.Zb,!1),E(a.$b,!0)):(E(a.Zb,!1),E(a.$b,!1));a.ad()}g.N=function(){return""};
g.n=function(){vz.f.n.call(this);var a=$y(this);this.vb=pc("div","pear-grid-cell-header-indicators");this.e().appendChild(this.vb);a.C.Fd&&(this.La=this.b.j("div","pear-grid-cell-header-slidemenu"),this.b.appendChild(this.e(),this.La),Az(this,!0));if(a.C.Xc){var b=this.vb;this.vc=pc("div","pear-grid-cell-header-sort");b.appendChild(this.vc);this.Zb=pc("div",{"class":"fa fa-arrow-circle-down",style:"display:none"});this.vc.appendChild(this.Zb);this.$b=pc("div",{"class":"fa fa-arrow-circle-up",style:"display:none"});
this.vc.appendChild(this.$b)}a.C.$e&&(this.jb=new qz(this.e(),{handles:2}),Cf(Cf(R(this),this.jb,"resize",this.sj,this),this.jb,"end_resize",this.rj,this));a=pc("div","pear-grid-cell-header-content",this.xa.$f);b=this.xa.Nd;T(a,b===Gy?"pear-grid-cell-header-left":"pear-grid-cell-header-right");"right"===b?this.Lb=this.e().appendChild(a):b===Gy&&(this.Lb=this.e().insertBefore(a,this.vb));this.ad();Bz(this,!0)};
g.zf=function(){T(this.e(),"pear-grid-cell-header");T(this.e(),"col"+this.cd);T(this.e(),"overflowhidden")};function Bz(a,b){var c=R(a),d=a.e();b?c.listen(d,"mouseenter",a.sh).listen(d,"mousedown",a.vh).listen(d,"mouseleave",a.se).listen(a.Lb,["mouseenter","mouseleave"],function(a){a.preventDefault()}):c.O(d,"mouseenter",a.sh).O(d,"mousedown",a.vh).O(d,"mouseleave",a.se).O(a.Lb,["mouseenter","mouseleave"],function(a){a.preventDefault()})}
function Az(a,b){var c=R(a),d=a.e();b?c.listen(d,"mouseleave",a.se).listen(a.La,"mouseenter",function(a){a.preventDefault()}):c.O(d,"mouseleave",a.se).O(a.La,"mouseenter",function(a){a.preventDefault()})}
g.ad=function(){var a=kd(this.e()),b=pd(this.e()),c=kd(this.vb),d,e,f=0,h=$y(this);h.C.Fd&&(d=kd(this.La),e=rd(this.La,"margin"),0>e.left&&(f+=d.width));h.C.$e&&(d=kd(this.jb.h[2]),0<d.width&&(f+=d.width),this.jb.w=f+10);d=rd(this.vb,"padding");f=f+c.width+(a.width-b.width)+d.right+d.left;this.Lb.style.width=Yc(a.width-f,!0)};function Cz(a,b){if(b&&a.c)a.c=!0;else{a.c=b;var c=0,d=kd(a.La).width,c=a.La&&b?c+d:c+0,c=new pz(a.La,[0],[-1*c],300);ef(c,"animate",a.ad,!1,a);Yi(c);a.ad()}}
g.vh=function(a){if(!a.d){var b;!(b=!Se(a))&&(b=this.jb)&&(b=this.jb.h[2]===a.target);b||$y(this).C.Xc&&K(this,"action");a.preventDefault()}};g.sh=function(){$y(this).C.Fd&&Cz(this,!0)};g.se=function(a){var b;if(b=a.target===this.e())b=$y(this).C.Fd;b&&!this.d&&Cz(this,!1);a.preventDefault()};g.sj=function(a){a.preventDefault();var b=this.cd,c=$y(this);a=a.c.width;var d=c.d.Fa();a=d[b].Mc+(a-d[b].Mc);c.d.Fa()[b].Mc=a||c.C.hi;this.ad();Dz(c);Ez(c);Fz(c,"on-column-resize")};
g.rj=function(a){a.preventDefault();a=$y(this);fd(this.e(),"","");Xc(this.e(),"","");Gz(a);Ez(a)};g.l=function(){Bz(this,!1);Az(this,!1);this.jb&&this.jb.u();this.jb=null;this.vc&&xc(this.vc);this.vc=null;this.Zb&&xc(this.Zb);this.Zb=null;this.$b&&xc(this.$b);this.$b=null;this.La&&xc(this.La);this.La=null;this.vb&&xc(this.vb);this.vb=null;this.Lb&&xc(this.Lb);this.Lb=null;delete this.xd;vz.f.l.call(this)};function Hz(a,b,c,d,e){Ie.call(this);this.b=a;this.c=b;this.g=c||Iz;this.i=d||"action";e||ec();this.d=!1;this.a=new zf}B(Hz,Ie);function Iz(a,b){var c=b.target,c=c&&c.R()||"";a.Me&&a.Me(c);a.hb&&a.hb(c)}Hz.prototype.s=null;Hz.prototype.e=function(){return this.s};Hz.prototype.render=function(a,b){T(a,"goog-split-behavior");this.b.render(a);this.c.render(a);var c=this.b,d=this.c;ja(c.oe)&&ja(d.oe)&&(c.oe(2),d.oe(1));this.s=a;Jz(this,null!=b?!!b:!0);return this};
function Jz(a,b){a.d!=b&&((a.d=b)?a.a.listen(a.c,a.i,z(a.g,a,a.b)):a.a.removeAll())}Hz.prototype.l=function(){Jz(this,!1);Le(this.a);Le(this.b);Le(this.c);Hz.f.l.call(this)};th("goog-split-behavior",function(){return new Hz(null,null)});function Kz(a,b,c){cz.call(this,a,b,c)}B(Kz,cz);Kz.prototype.Kd=function(a){Kz.f.Kd.call(this,a,!0)};function Lz(a,b){var c;Fg(a,function(a){c||b!==a.xa.r()||(c=a)});return c}Kz.prototype.n=function(){Kz.f.n.call(this);T(this.e(),"pear-grid-row-header")};Kz.prototype.l=function(){Kz.f.l.call(this)};function Mz(a,b,c){cz.call(this,a,b,c);this.d=!1}B(Mz,cz);g=Mz.prototype;g.Cg=0;g.hc=function(){return this.Cg};function Nz(a,b){a.Cg=b;a.J&&Sc(a.e(),"top",a.Cg+"px")}g.Q=function(){return!0};g.isEnabled=function(){return!0};g.Qc=function(a){a?T(this.e(),"pear-grid-row-highlight"):(rh(this.e(),"pear-grid-row-highlight"),Oz(this))};function Oz(a){Fg(a,function(a){a.Qc&&a.Qc(!1)})}function Pz(a,b){b?(a.d=!0,T(a.e(),"pear-grid-row-select")):(rh(a.e(),"pear-grid-row-select"),a.d=!1)}
g.n=function(){cz.f.n.call(this);var a=this.e();T(a,"pear-grid-row-data");var b=0==this.vd%2;this.Ie.C.Jg&&T(a,b?"pear-grid-row-data-even":"pear-grid-row-data-odd");dz(this);a=this.a.vg;if(this.i&&this.i.o){var b=this.i.o,c=this.ia;c in b&&delete b[c];Db(this.i.o,a,this)}this.ia=a;this.e().id=this.r()};g.W=function(){Mz.f.W.call(this)};function Qz(a){Fg(a,function(a){rh(a.e(),"bottom-border")});a.removeChild(a.c,!0);a.c.u()}function Rz(a){Fg(a,function(a){T(a.e(),"bottom-border")})}
g.l=function(){this.c&&this.c.u();Mz.f.l.call(this)};function Sz(a){Q.call(this,a)}B(Sz,Q);Sz.prototype.A=function(){Tz.f.A.call(this);this.e().className="pear-grid-header"};function Uz(a){Ie.call(this);this.c=a}B(Uz,Ie);Uz.prototype.l=function(){this.b&&this.a&&(this.a.close(),this.a.u(),bz(this.b),this.c.c.focus(),this.b=null);this.b=null;this.a&&this.a.u();this.a=null;Uz.f.l.call(this)};/*

 Distributed under - The MIT License (MIT).

 Copyright (c) 2014  Jyoti Deka
 dekajp{at}gmail{dot}com
 http://github.com/dekajp/google-closure-grid

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

 version 0.1

*/
function Tz(a){Q.call(this);this.b=a||ec();this.ef=0;this.ca=[];this.k=[];a=tc();a.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";var b=tc();fd(b,"200px","200px");a.appendChild(b);document.body.appendChild(a);b=a.offsetWidth-a.clientWidth;xc(a);this.mb=b;this.K={};this.ni=0;this.h={rowIndex:-1,cellIndex:-1};this.S={};this.C={xi:500,ji:600,ab:25,Zc:30,bf:30,hi:125,hf:50,Xc:!1,Wc:!1,$e:!1,Fd:!1,Jg:!1,Rg:!0,Jd:0}}B(Tz,Q);var xz=0,Wy=1,zz=2;g=Tz.prototype;g.Ma=null;
g.fa=null;g.na=null;g.sa=null;g.sc=0;g.Wb=0;g.Bg="";g.Yd=0;g.uc=null;g.Ja=null;g.bd=null;g.C=null;g.logger=O("pear.ui.Grid");g.setTitle=function(){};var Vz=O("demo");function Wz(a){a.sa=a.sa||[];return a.sa.length}g=Tz.prototype;g.hd=function(){return this.sa=this.sa||[]};function Xz(a){a.sc=a.sc||a.C.xi;return a.sc}g.getHeight=function(){return this.Wb=this.Wb||this.C.ji};
function Yz(a,b){if(!a.Gd){var c=tc();c.className=b;c.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";var d=tc();d.className="pear-grid-cell";fd(d,"200px","200px");c.appendChild(d);document.body.appendChild(c);a.Gd=sd(d);xc(c)}return a.Gd}function Zz(a){a.d||(a.d=new My([],[]),a.d.d=a);return a.d}g.Fa=function(){var a=this.d.Fa(),b=[];C(a,function(a){b.push(Fb(a))});return b};function $z(a,b){var c=a.d.Fa();return fb(c,function(a){return a.r()===b?!0:!1})}
function aA(a,b){var c=[];C(b,function(a){c.push(Fb(a))});Oy(Zz(a),c);Fz(a,"on-columns-changed")}function bA(a){if(Zz(a).c||!a.bd){var b=Zz(a);a.bd=b.b}return a.bd}function cA(a){var b;if(a.C.Wc){var c=a.Yd;b=a.C.hf;a=bA(a);c=c*b>a.length?a.length:c*b;b=a.slice(c,c+b>a.length?a.length:c+b)}else b=bA(a);return b}function dA(a){C(a.uc||[],function(a){if(a=Dg(this.na,a)){Pz(a,!1);var c=a.a;Sy(Zz(this),c,!1);eA(this,a,"on-gridrow-unselect")}},a);a.uc=[]}
function fA(a){xb({$e:!0,Jg:!0,Xc:!0,Rg:!1},function(a,c){this.C[c]=a},a)}g.isEnabled=function(){return!0};g.Q=function(){return!0};g.A=function(){Tz.f.A.call(this);this.e()};
g.n=function(){Tz.f.n.call(this);var a=ka(this);this.b.setProperties(this.e(),{id:this.r()});var b=this.b,a=b.j("div",{style:"position:fixed;width:0;height:0;top:0;left:0;outline:0;",id:"peargrid$focus"+a});a.setAttribute("tabindex",0);a.setAttribute("hidefocus","");b.appendChild(this.e(),a);this.c=a;b=R(this);a=this.Nb||(this.Nb=new Ui(this.c));b.listen(a,"focusout",this.Uj,!1);b.listen(a,"focusin",this.Lh,!1);Df(b,this.e(),"click",this.Lh);gd(this.e(),this.Wb);this.e().style.width=Yc(this.sc,!0);
b=this.e();T(b,gA(this));T(b,"pear-grid");T(b,"unselectable");Gz(this);Ez(this);this.F=new Sz;this.D(this.F,!0);this.Ma=this.Ma||new Kz(this,this.C.Zc,this.b);this.F.D(this.Ma,!0);this.Ma.ud=this.C.Zc;hA(this);iA(this);this.fa=new Q;this.D(this.fa,!0);this.fa.e().className="pear-grid-viewport";Cf(R(this),this.fa.e(),"scroll",this.Ri,this);this.na=new Q;this.fa.D(this.na,!0);this.na.e().className="pear-grid-body-canvas";Cf(Cf(Cf(R(this),this.ea||(this.ea=new Og(this.c)),Pg,this.ij,this),this.na.e(),
"click",this.Tj,this),this.na.e(),"dblclick",this.Wi,this);b=this.fa.e();a=this.Wb;a-=this.Ma.getHeight();gd(b,a);jA(this);this.C.Wc&&((b=0===this.Yd||!1)||(b=Math.ceil(bA(this).length/this.C.hf),b=0>--b),b?kA(this):(this.Yd=0,kA(this),K(this,new H("on-page-index-change",this))));lA(this,!1);mA(this);nA(this);Fz(this,"rendered");for(var c in this.K)this.K[c].enable(this),this.K[c].init()};function gA(a){return"peargrid"+ka(a)}
function oA(a){var b;if(!(b=a.M)){b=a.b;var c=gA(a);a.e();b=b.j("style",{id:c,type:"text/css",rel:"stylesheet"});document.getElementsByTagName("head")[0].appendChild(b)}a.M=b;return a.M}function pA(a,b,c){var d="."+gA(a);a.rb||(a.rb={});a.rb[d+" "+b]=c}function qA(a,b){var c=a+" { ";xb(b,function(a,b){c=c+b+" : "+a+" ; "});return c+=" }"}
function Gz(a){var b="."+gA(a);pA(a,".pear-grid",{width:Xz(a)+"px",height:a.getHeight()+"px"});pA(a,".pear-grid-header",{width:Xz(a)+"px",height:a.C.Zc+"px"});pA(a,".pear-grid-footer",{width:Xz(a)+"px",height:a.C.bf+"px"});pA(a,".pear-grid-viewport",{width:Xz(a)+"px"});a.C.Rg?pA(a,".pear-grid-cell",{"border-top-color":"silver"}):pA(a,".pear-grid-cell",{"border-top-color":"transparent"});var c=Yz(a,b),d;if(!a.Hd){d=tc();d.className=b;d.style.cssText="overflow:auto;position:absolute;top:0;width:30px;height:30px";
b=tc();T(b,"pear-grid-cell");T(b,"pear-grid-cell-data");fd(b,"25px","25px");d.appendChild(b);document.body.appendChild(d);var e=tc();T(e,"pear-grid-cell-data-content");fd(b,"20px","20px");b.appendChild(e);document.body.appendChild(d);a.Hd=rd(e,"padding");xc(d)}d=a.Hd;b=a.C.Zc-c.top-c.bottom;pA(a,".pear-grid-cell-header",{height:b+"px"});b=a.C.bf-c.top-c.bottom;pA(a,".pear-grid-cell-footer",{height:b+"px"});b=a.C.ab-c.top-c.bottom;pA(a,".pear-grid-cell-data",{height:b+"px"});b=a.C.ab-c.top-c.bottom-
d.top-d.bottom-2;pA(a,".pear-grid-cell-data-content",{"line-height":b+"px"});c=Dz(a);d=c+a.mb>Xz(a)?c+a.mb:Xz(a);pA(a,".pear-grid-row-data",{width:c+"px",height:a.C.ab+"px"});pA(a,".pear-grid-row-data pear-grid-row-even",{});pA(a,".pear-grid-row-data pear-grid-row-odd",{});pA(a,".pear-grid-row-header",{width:d+"px",height:a.C.Zc+"px"});pA(a,".pear-grid-row-footer",{width:d+"px",height:a.C.bf+"px"});pA(a,".pear-grid-body-canvas",{width:c+"px"})}
function Dz(a){var b="."+gA(a),c=Yz(a,b),d=0,e=0;C(a.d.Fa(),function(a,b){var k=a.Mc;pA(this,".col"+b,{width:k+"px",left:d+"px"});d=d+k+c.left+c.right;e=e+k+c.left+c.right},a);pA(a,".pear-grid-row-data",{width:e+"px",height:a.C.ab+"px"});a.qi=e;return a.qi}
function rA(a,b){var c="."+gA(a),d=Yz(a,c),e=0;C(a.d.Fa(),function(a,b){-1>=b&&(e=e+a.Mc+d.left+d.right)},a);a.ni=e;C(a.k,function(a){for(var c=0;-1>=c;c++)Sc(S(a,c).e(),"margin-left",b+"px")},a);for(var c=a.Ma,f=0;-1>=f;f++)Sc(S(c,f).e(),"margin-left",b+"px")}
function Ez(a){a.e();gA(a);var b="",c=oA(a);c.textContent="";xb(a.rb,function(a,c){var f=qA(c,a);oA(this);if(!this.w){var h=Cy();gA(this);for(var k,l=0;l<h.length;l++)if(h[l].ownerNode==this.M||h[l].owningElement==this.M){k=h[l];break}this.w=k}h=this.w;k=void 0;if(0>k||void 0==k)k=By(h).length;if(h.insertRule)h.insertRule(f,k);else if(l=/^([^\{]+)\{([^\{]+)\}/.exec(f),3==l.length)h.addRule(l[1],l[2],k);else throw Error("Your CSSRule appears to be ill-formatted.");b=b+" "+f},a);c.textContent=b}
function hA(a){var b=a.d.Fa();C(b,function(a,b){var e=new vz(this.b);e.xa=a;e.cd=b;this.Ma.Kd(e,!0);K(this,new sA("after-headercell-render",this))},a);K(a,new H("headercells-rendered",a))}function tA(a){var b=0,c=a.C.ab,b=a.C.Wc?Wz(a)*c:bA(a).length*c;xb(a.S,function(){b+=Math.abs(this.getHeight()/3)},a);gd(a.na.e(),b);a.li=hd(a.na.e())}function uA(a,b){b.getHeight();var c=a.C.hf,d=b.vd;(a.C.Wc?0===d%c:0===d)?Nz(b,0):Nz(b,a.vi+a.ti);a.vi=b.hc();a.ti=b.getHeight()}
function jA(a){var b=cA(a),c=a.C.ab;a.sa=[];C(b,function(a,b){var f=new Mz(this,c,this.b);f.a=a;f.vd=b;this.sa.push(f);uA(this,f)},a)}function vA(a,b){var c=a.C.ab;a.getHeight();var d=a.hd();C(d,function(a){a.r()===b.r()&&(a.ud=c,Qz(a));uA(this,a)},a);delete a.S[b.r()];tA(a)}function wA(a){xb(a.S,function(a){vA(this,a)},a);a.S={}}function mA(a){if(-1<a.h.rowIndex&&a.h.rowIndex<Wz(a)&&0<Wz(a)){var b;b=xA(a);(b=a.sa[b])&&b.J&&(yA(a,b,!0,!1),zA(a,AA(a)))}}
function nA(a){C(a.uc||[],function(a){(a=Dg(this.na,a))&&Pz(a,!0)},a)}function BA(a,b){var c=a.d.Fa();if(0<Gg(b)){var d=b.tg(!0);C(d,function(a){a.u()},a)}C(c,function(a,c){var d=new az(this.b,a.b);d.xa=a;d.cd=c;b.Kd(d,!0)},a)}function CA(a,b,c,d){var e=Math.floor((c+d)/2),f=a.sa[d],h=a.sa[e];if(e<=c)return e;if(b>=a.sa[c].hc()&&b<h.hc())return CA(a,b,c,e);if(b>=h.hc()&&b<=f.hc())return CA(a,b,e,d);throw Error("failed to find index for scrolltop:"+b);}
function DA(a,b){b&&0<Gg(a.na)&&a.na.tg(!0);C(a.ca,function(a,b){this.na.D(a,!0);BA(this,a);var e=a.vd,f=Wz(this);(this.C.Wc?0:e===f-1)&&Rz(a);this.k[b]=a},a);a.ca=[]}
g.Dg=function(a){var b,c,d=bA(this).length,e=this.fa.e().scrollTop,f;this.lb||(this.gf=this.gf||hd(this.fa.e()),this.lb=Math.ceil(this.gf.height/this.C.ab),this.lb*=2);f=this.lb;var h=CA(this,e,0,Wz(this)-1);b=0;b=0>h-f?0:h-f;c=0;c=h+f>d?d:h+f;d=document.createComment("ScrollTop:"+e+", Rendering Start:"+b+" End:"+c+", vRenderMaxRows:"+f+", Total Rows:"+(c-b)+", MidpointIndex: "+h);vc(this.c);this.c.appendChild(d);d=0;e=this.hd();for(d=b;d<c&&d<e.length;d++)this.k[d]||(f=this.sa[d],EA(this,f)||FA(this,
f)||(this.ca[d]=f));DA(this,a);for(var k in this.k)!(k<b||k>c)||EA(this,this.k[k])||FA(this,this.k[k])||(this.na.removeChild(this.k[k],!0),delete this.k[k]);mA(this);lg(Vz,"finished restoreHighlightedRow_");nA(this);lg(Vz,"finished restoreSelectedRows_")};function kA(a){wA(a);a.bd=null;jA(a);lA(a,!0);Lc(gc(a.c))!=a.c&&a.c.focus()}function GA(a,b){C(b,function(a){EA(this,a)||FA(this,a)||a.u()},a)}function lA(a,b){b&&(GA(a,a.k),a.k=[],GA(a,a.ca),a.ca=[]);tA(a);a.Dg(b)}g.refresh=function(){kA(this)};
function HA(a,b){if(Wz(a)){var c=a.fa.e().scrollTop,d=a.fa.e().scrollLeft,e=Zc(b.e()),f=kd(a.fa.e()),h=od(b.e()),k=S(b,AA(a)),l=Zc(k.e()),k=od(k.e()),m=Zz(a),m=a.Wb<(m.a?m.a.b:null).length*a.C.ab?a.mb:0,n=kd(a.na.e()).width>a.sc?a.mb:0;e.y+h.height>=f.height+c-n?c=e.y+h.height+n-f.height:e.y<=c&&(c=e.y);l.x+k.width>=f.width+d-m?d=l.x+k.width-f.width+m:l.x<=d&&(d=l.x);a.fa.e().scrollTop=c;a.fa.e().scrollLeft=d}}function FA(a,b){return!(!a.S[b.r()]||!b.J)}
function EA(a,b){return!!(a.Ja&&a.Ja.b&&a.Ja.b.getParent()&&(a.Ja&&a.Ja.b?a.Ja.b.getParent():null).r()===b.r()&&b.J)}function IA(a,b){if(a.af&&a.af.call(a,b.xa)){a.Ja&&a.Ja.u();a.Ja=new Uz(a);var c=a.Ja;c.b=b;var d;d=c.c;d=d.af?d.af.call(d,b.xa):null;c.a=d;c.a&&(c.a.a(c),c.a.open())}}function JA(a,b){return a.hd&&b?Ya(a.hd(),b):-1}function KA(a){var b=xA(a);return a.sa[b]}function LA(a){var b=AA(a);return S(KA(a),b)}function xA(a){return a.h.rowIndex=0>a.h.rowIndex?0:a.h.rowIndex}
function AA(a){return a.h.cellIndex=0>a.h.cellIndex?0:a.h.cellIndex}function zA(a,b){var c=KA(a),d=b=0>b?0:b;Oz(c);S(c,d).Qc(!0);a.h.cellIndex=b}function MA(a,b){-1<a.h.rowIndex&&a.h.rowIndex<Wz(a)&&0<Wz(a)&&yA(a,KA(a),!1,!0);var c=a.sa[b];a.h.rowIndex=b;if(c){var d=AA(a);Oz(c);S(c,d).Qc(!0);yA(a,c,!0,!0)}}function yA(a,b,c,d){b.Qc(c);JA(a,b);b=c?new NA("on-gridrow-highlighted",a):new NA("on-gridrow-unhighlighted",a);d&&K(a,b)}
function OA(a,b){PA(a,function(a,d){return 0===(a+1)%d?(b&&QA(this),0):a+1},AA(a))}function RA(a){PA(a,function(a,c){a--;0>a&&(a=c-1);return a},AA(a))}function PA(a,b,c){c=0>c?0:c;var d=Gg(KA(a));c=b.call(a,c,d);zA(a,c)}function SA(a){TA(a,function(a,c){return(a+1)%c},Wz(a)-1)}function UA(a){TA(a,function(a,c){a--;return 0>a?c-1:a},0)}function QA(a){TA(a,function(a,c){return 0===(a+1)%c?a:(a+1)%c},xA(a))}function VA(a){TA(a,function(a){a--;return 0>a?0:a},xA(a))}
function TA(a,b,c){c=0>c?0:c;var d=Wz(a);c=b.call(a,c,d);a.Yc=AA(a);a.Yc=0>a.Yc?0:a.Yc;(b=a.sa[c])&&b&&b.Q()&&b.isEnabled()&&(MA(a,c),zA(a,a.Yc))}function WA(a,b){for(var c=a.e();b&&b!==c;){var d=Dg(a.na,b.id);if(d)return d;b=b.parentNode}return null}function XA(a,b){a.e();var c=WA(a,b);if(c)a:{for(var d=b,e=c.e();d&&d!==e;){var f=Dg(c,d.id);if(f){c=f;break a}d=d.parentNode}c=null}else c=null;return c}function eA(a,b,c){JA(a,b);K(a,new NA(c,a))}function Fz(a,b){K(a,new H(b,a))}
function iA(a){Fg(a.Ma,function(a){this.C.Xc&&Cf(R(this),a,"action",this.aj,this);Cf(R(this),a,"evt-pear-grid-cell-options-click",this.bj,this)},a)}g.Uj=function(a){lg(Vz,"handleBlur - Received event "+a.type)};g.Lh=function(a){lg(Vz,"handleFocus - Received event "+a.type);a.d||(a=KA(this))&&a.J&&(yA(this,a,!0,!1),zA(this,AA(this)),HA(this,a))};
g.Ri=function(a){lg(Vz,"handleBodyCanvasScroll Received event "+a.type);if(!a.d){this.ef<=this.fa.e().scrollTop?this.p=2:this.p=1;if(2===this.p||1===this.p)this.v?this.v.Cf():(this.v&&this.v.u(),this.v=new Gx(this.Dg,25,this),this.v.Cf());this.ui<=this.fa.e().scrollLeft?this.p=4:this.p=3;if(3===this.p||4===this.p){var b=this.fa.e().scrollLeft;this.F.e().scrollLeft=b;rA(this,b)}this.p=0;this.ef=this.fa.e().scrollTop;a.preventDefault()}};
g.aj=function(a){lg(Vz,"handleHeaderCellClick Received event "+a.type);if(!a.d){var b=a.target,c=Lz(this.Ma,this.Bg);this.C.Xc&&(c&&c!==b&&yz(c,xz),this.Bg=b.xa.r(),wz(b)===Wy?yz(b,zz):wz(b)===zz?yz(b,Wy):yz(b,zz),b=new YA("on-sort",this,b),K(this,b));b=new sA("header-cell-on-click",this);K(this,b);a.preventDefault()}};g.bj=function(a){lg(Vz,"handleHeaderCellOptionClick Received event "+a.type);a.d||(K(this,new sA("header-cell-menu-click",this)),a.preventDefault())};
g.Tj=function(a){lg(Vz,"handleAction - "+a.type);if(!a.d){var b=XA(this,a.target);WA(this,a.target);b&&ZA(this,b);a.preventDefault()}};g.Wi=function(a){lg(Vz,"handleDoubleClick -  "+a.type);var b=XA(this,a.target),c=WA(this,a.target);b&&c&&IA(this,b);a.preventDefault()};
function ZA(a,b){var c=b.getParent();zA(a,Ig(c,b));Oz(KA(a));c=JA(a,c);MA(a,c);Lc(gc(a.c))!=a.c&&a.c.focus();if(0!==a.C.Jd)if(c=KA(a),c.d){if(2===a.C.Jd||3===a.C.Jd){var d=c.a;Sy(Zz(a),d,!1);Pz(c,!1);jb(a.uc,c.r());eA(a,c,"on-gridrow-unselect")}}else 2===a.C.Jd&&dA(a),d=c.a,Sy(Zz(a),d,!0),Pz(c,!0),a.uc=a.uc||[],a.uc.push(c.r()),eA(a,c,"on-gridrow-select");a.Ja&&a.Ja.u();K(a,new $A("datacell-on-action",a))}g.ij=function(a){lg(Vz,"Received event "+a.type);return this.va(a)};
g.va=function(a){lg(Vz,"Received event "+a.type);var b;if(b=this.isEnabled()&&0!=Wz(this))a:if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)b=!1;else{switch(a.a){case 27:break;case 36:SA(this);break;case 35:UA(this);break;case 38:VA(this);break;case 40:QA(this);break;case 9:OA(this,!0);break;case 39:OA(this);break;case 37:RA(this);break;case Tg:ZA(this,LA(this));break;case 113:IA(this,LA(this));break;default:b=!1;break a}b=!0}return b?(a.preventDefault(),a=KA(this),a.J||(a=this.fa.e().scrollTop,MA(this,
Math.floor(a/this.C.ab)),a=KA(this)),this.Dg(),HA(this,a),!0):!1};
g.l=function(){var a=0,b;for(b in this.K)this.K[b].u();delete this.K;this.K={};this.Ma&&this.Ma.u();this.Ma=null;C(this.hd(),function(a){a.u()});this.S=this.sa=null;this.fa&&this.fa.u();this.fa=null;this.na&&this.na.u();this.na=null;this.Og&&this.Og.u();this.Og=null;this.d&&this.d.u();delete this.lb;this.Gd=this.Hd=null;this.c&&xc(this.c);this.c=null;this.M&&xc(this.M);this.M=null;this.ea&&this.ea.u();this.ea=null;this.Nb&&this.Nb.u();this.Nb=null;this.v&&this.v.u();this.v=null;delete this.sc;delete this.Wb;
delete this.Bg;delete this.Yd;this.ui=this.p=this.li=this.gf=this.bd=null;delete this.ef;delete this.ca;delete this.k;delete this.mb;if(this.w)for(a=(this.w.cssRules||this.w.rules).length-1;0<=a;a--)Dy(this.w,a);this.w=this.rb=null;Tz.f.l.call(this)};function NA(a,b){H.call(this,a,b)}B(NA,H);function $A(a,b){H.call(this,a,b)}B($A,H);function sA(a,b){H.call(this,a,b)}B(sA,H);function YA(a,b,c){H.call(this,a,b);this.c=c;this.i=wz(c)}B(YA,H);function aB(a,b){Q.call(this,b);this.c=a}B(aB,Q);aB.prototype.A=function(){aB.f.A.call(this);var a=this.b,b=this.e();b.classList.add("sep-header");a=a.j("h3",null,this.c);b.appendChild(a)};function bB(a,b){Q.call(this,b);this.a=a;this.d=null;this.h=!1}B(bB,Q);bB.prototype.c=function(){this.h?cB(this):(dB(this),this.h=!0)};bB.prototype.logger=O("ydn.crm.tracking.Panel");var eB="Emails Tracked;Emails Opened;Opened;with Multiple Opens;# of Clicks;Avg. # Opens;Avg time to Open".split(";");g=bB.prototype;g.B=function(){return this.e().querySelector(".content")};function fB(a,b,c){a.e().querySelector("div.head .stats").children[b].querySelector(".value").textContent=c}
function gB(a,b){b||(b=[]);var c;if(!a.d){c=new Tz;fA(c);var d=a.B().clientWidth||1E3,d=d-8,e=(d-8)/15,e=[new Ey("Recipients","grid-recipients","recipients",4*e,Fy),new Ey("Subject","grid-subject","subject",4*e,Fy),new Ey("Sent Date","grid-sentdate","sentDate",2*e,"datetime"),new Ey("Opens","grid-opens","opens",e,"number"),new Ey("Clicks","grid-clicks","clicks",e,"number"),new Ey("Cities","grid-cities","cities",e,"number"),new Ey("Last Open","grid-lastopen","lastOpen",2*e,"datetime")];c.sc=d;c.Wb=
200;aA(c,e);R(a).listen(c,"on-sort",a.Rj);R(a).listen(Zz(c),"dataview-changed",a.Qj);d=ct(Xs.t());d=new aB("Emails tracked for "+d,a.b);a.D(d,!0);a.D(c,!0);a.d=c}c=a.d;d=b;e=Zz(c);Ky(e.a,d);e.c=!0;K(e,new Xy("datasource-changed",e.a));Ny(e);Ry(e);Fz(c,"on-grid-datasource-changed");c.refresh()}g.Rj=function(a){var b=a.target,c=Zz(b),d=a.i;a=$z(b,a.c.xa.r());Vy(c,d,a.yf)};g.Qj=function(a){a.target.d.refresh()};
function dB(a){window.console.log("refreshTrackingData");G(Fx(a.a),function(a){window.console.log(a);gB(this,a);fB(this,0,a.length);wf(function(){for(var c,d,e=0,f=0,h=0,k=0,l=0,m=0;m<a.length;m++){var n=a[m];if(!c||n.path<c)c=n.path;if(!d||n.path>c)d=n.path;n.opens&&e++;n.numCities&&(f++,l+=n.numCities);h+=n.clicks;n.timeToOpen&&(k+=n.timeToOpen)}c=a.length;qa();fB(this,0,c);fB(this,1,e.toFixed(0));f=(100*f/c).toFixed(1);fB(this,2,(100*e/c).toFixed(1).replace(/0+$/,""));fB(this,3,f.replace(/0+$/,
""));fB(this,4,h.toFixed(0));l&&fB(this,5,(l/e).toFixed(1));k&&(k=Math.abs(k/e),6E4>k?k="0 minutes":(e=Math.floor(k/864E5),k%=864E5,f=Math.floor(k/36E5),c=Math.floor(k%36E5/6E4),m=Av(e),d=Av(f),l=Av(c),k=e*(f+c)?" ":"",h=f*c?" ":"",e=vy("{COUNT, plural, =0 {}=1 {{TEXT} day}other {{TEXT} days}}",e,m),f=vy("{COUNT, plural, =0 {}=1 {{TEXT} hour}other {{TEXT} hours}}",f,d),c=vy("{COUNT, plural, =0 {}=1 {{TEXT} minute}other {{TEXT} minutes}}",c,l),k=e+(k+(f+(h+c)))),fB(this,6,k))},100,this)},function(a){window.console.error(a)},
a)}function cB(a){F(Yq().send("tracking-update"),function(a){window.console.log("model refresh",a);(a[0]||a[1])&&dB(this)},a)}
g.A=function(){bB.f.A.call(this);var a=this.e();a.classList.add("tracking-panel");var b=this.b,c=b.j("div","head"),d=b.j("div","content");a.appendChild(c);a.appendChild(d);a=[];for(d=0;d<eB.length;d++){var e=b.j("div","value-holder",[b.j("span","value","0")]),f=b.j("div","label",eB[d]);2!=d&&3!=d||e.appendChild(b.j("span","percent","%"));a[d]=b.j("div",{"class":"slot slot-"+d,tabindex:d},[e,f])}c.appendChild(b.j("div","stats",a))};g.toString=function(){return"Tracking"};function hB(){Xq("options");Zu();this.a={};var a=document.getElementById("sidebar-status"),b=new Iw(!0);b.render(a);Hs.b.push(b);this.b=!1}
function iB(a,b,c,d){a.a[b]=d;var e=document.getElementById("main-menu");a=document.getElementById("app-content");var f=document.createElement("li");0==e.childElementCount&&f.setAttribute("selected","");var h=document.createElement("a");h.href="#"+b;h.textContent=c;f.appendChild(h);e.appendChild(f);c=document.createElement("div");c.setAttribute("name",b);c.style.display="none";a.appendChild(c);d.render(c)}
function jB(a){return G(Yq().send("echo"),function(){Is("logging in...");var a=Xs.t();return G(Zs(a),function(){var c=a.a;wf(function(){window.console.log("user ready",c);if(c){var a=document.getElementById("user-login"),b=document.getElementById("user-name"),f=document.getElementById("main-menu"),h=document.getElementById("app-content");if(c.is_login)a.href=c.logout_url,a.textContent="logout",b.textContent=c.email,f.style.display="",h.style.display="";else{var k=c.login_url;"/"==k.charAt(0)&&(k=
"http://127.0.0.1:8080"+k);a.href=k;a.textContent="login";a.style.display="";b.textContent="";f.style.display="none";h.style.display="none"}}a=document.getElementById("app-content");c.is_login?a.style.display="":(a.style.display="none",Is("Not login"))},10,this);return c},function(a){Is("Error: "+(a.message?a.message:a))},this)},function(a){Is("Failed to connect to background page: "+(a instanceof Error?a.name+" "+a.message:a))},a)}
function kB(a){for(var b=location.hash.replace("#",""),b=(b||"home").trim().toLowerCase(),c=document.getElementById("main-menu"),d=document.getElementById("app-content"),e=-1,f=d.childElementCount-1;0<=f;f--)if(d.children[f].getAttribute("name")==b){e=f;break}if(-1==e)Is("Invalid tab name: "+b);else for(f=d.childElementCount-1;0<=f;f--){var h=d.children[f];h.getAttribute("name");var k=e==f;k&&a.a[b].c();c.children[f].className=k?"selected":"";h.style.display=k?"":"none"}}
function lB(a){window.addEventListener("popstate",function(){window.console.log("popstate "+location.hash);kB(a)},!1);var b=document.getElementById("user-login");b.addEventListener("click",function(a){a.preventDefault();"logout"==b.textContent&&Yq().send("logged-out");bv(a)},!0);chrome.runtime.onMessageExternal.addListener(function(a,b,e){"closing"==a&&(e("close"),location.reload())});F(jB(a),function(){this.b?wf(function(){var a=["sugarcrm","tracking","about-sugarcrm"],b=it();if("Email Tracker"==
b||"Email Tracker for Gmail"==b)a=["tracking","about-tracking"];for(b=0;b<a.length;b++){var e=a[b],f=0==b?"home":e;"tracking"==e?(e=new bB(new Ix),iB(this,f,e.toString(),e)):"about-sugarcrm"==e?(e=new ox("about-template"),iB(this,f,e.toString(),e)):"about-tracking"==e?(e=new ox("tracking-about-template"),iB(this,f,e.toString(),e)):"sugarcrm"==e?(e=new Bx,iB(this,f,e.toString(),e)):window.console.error("Invalid page name: "+e)}kB(this)},10,this):wf(function(){kB(this)},10,this)},a)}
ba("runOptionApp",function(){var a=new hB;a.b=!0;lB(a);return a});})();

                //# sourceMappingURL=https://ydn-src-1.storage.googleapis.com/jsc/crmininbox-0.16.7.js.map
            